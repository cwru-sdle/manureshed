[{"path":"https://exelegch.github.io/manureshed-docs/articles/advanced-features.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Advanced Features","text":"vignette covers advanced features power users: Custom thresholds parameters Parallel processing multiple years State-specific analysis Performance optimization Custom workflows","code":""},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/advanced-features.html","id":"understanding-thresholds","dir":"Articles","previous_headings":"Custom Thresholds","what":"Understanding Thresholds","title":"Advanced Features","text":"package excludes areas little cropland analysis. default 500 hectares (1,234 acres), can change :","code":"# More restrictive (exclude more areas) results_conservative <- run_builtin_analysis(   scale = \"huc8\",   year = 2016,   nutrients = \"nitrogen\",   cropland_threshold = 2000  # 2000 acres instead of 1234 )  # Less restrictive (include more areas) results_liberal <- run_builtin_analysis(   scale = \"huc8\",    year = 2016,   nutrients = \"nitrogen\",   cropland_threshold = 500   # 500 acres )  # Compare the difference conservative_excluded <- sum(results_conservative$agricultural$N_class == \"Excluded\") liberal_excluded <- sum(results_liberal$agricultural$N_class == \"Excluded\")  print(paste(\"Conservative:\", conservative_excluded, \"excluded\")) print(paste(\"Liberal:\", liberal_excluded, \"excluded\"))"},{"path":"https://exelegch.github.io/manureshed-docs/articles/advanced-features.html","id":"automatic-threshold-calculation","dir":"Articles","previous_headings":"Custom Thresholds","what":"Automatic Threshold Calculation","title":"Advanced Features","text":"HUC8 HUC2 scales, package calculates thresholds automatically based county data:","code":"# Load data for threshold calculation county_data <- load_builtin_nugis(\"county\", 2016) huc8_data <- load_builtin_nugis(\"huc8\", 2016)  # Calculate appropriate threshold for HUC8 custom_threshold <- get_cropland_threshold(   scale = \"huc8\",   county_data = county_data,   target_data = huc8_data,   baseline_ha = 750  # Use 750 ha instead of 500 ha baseline )  print(paste(\"Custom threshold:\", round(custom_threshold, 2), \"acres\"))  # Use in analysis results <- run_builtin_analysis(   scale = \"huc8\",   year = 2016,   nutrients = \"nitrogen\",   cropland_threshold = custom_threshold )"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/advanced-features.html","id":"single-state-analysis","dir":"Articles","previous_headings":"State-Specific Analysis","what":"Single State Analysis","title":"Advanced Features","text":"","code":"# Analyze specific states iowa_results <- run_state_analysis(   state = \"IA\",   scale = \"county\",    year = 2016,   nutrients = c(\"nitrogen\", \"phosphorus\"),   include_wwtp = TRUE )  # Quick state analysis with maps texas_results <- quick_state_analysis(   state = \"TX\",   scale = \"huc8\",   year = 2015,   nutrients = \"nitrogen\",   create_maps = TRUE,   create_networks = TRUE )"},{"path":"https://exelegch.github.io/manureshed-docs/articles/advanced-features.html","id":"multi-state-comparison","dir":"Articles","previous_headings":"State-Specific Analysis","what":"Multi-State Comparison","title":"Advanced Features","text":"","code":"# Compare agricultural states corn_belt_states <- c(\"IA\", \"IL\", \"IN\", \"NE\", \"OH\") state_results <- list()  for (state in corn_belt_states) {   state_results[[state]] <- run_state_analysis(     state = state,     scale = \"county\",     year = 2016,      nutrients = \"nitrogen\",     include_wwtp = TRUE,     verbose = FALSE  # Reduce output   ) }  # Compare state summaries state_summary <- do.call(rbind, lapply(names(state_results), function(state) {   result <- state_results[[state]]   classes <- table(result$agricultural$N_class)   data.frame(     State = state,     Total_Counties = sum(classes),     Source_Counties = classes[\"Source\"] %||% 0,     Sink_Counties = sum(classes[c(\"Sink_Deficit\", \"Sink_Fertilizer\")], na.rm = TRUE),     Source_Percent = round((classes[\"Source\"] %||% 0) / sum(classes) * 100, 1)   ) }))  print(state_summary)"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/advanced-features.html","id":"multiple-years","dir":"Articles","previous_headings":"Batch Processing","what":"Multiple Years","title":"Advanced Features","text":"","code":"# Analyze multiple years efficiently batch_results <- batch_analysis_years(   years = 2012:2016,   scale = \"huc8\",   nutrients = \"nitrogen\",    include_wwtp = TRUE,   create_comparative_plots = TRUE )  # Check which years succeeded successful_years <- names(batch_results$results) print(paste(\"Successful years:\", paste(successful_years, collapse = \", \")))"},{"path":"https://exelegch.github.io/manureshed-docs/articles/advanced-features.html","id":"parallel-processing","dir":"Articles","previous_headings":"Batch Processing","what":"Parallel Processing","title":"Advanced Features","text":"faster processing multiple analyses:","code":"# Use multiple CPU cores parallel_results <- batch_analysis_parallel(   years = 2014:2016,   n_cores = 2,  # Use 2 cores   scale = \"county\",   nutrients = \"nitrogen\",   include_wwtp = TRUE )  # Check results successful <- sum(!sapply(parallel_results, function(x) \"error\" %in% names(x))) print(paste(\"Successful analyses:\", successful, \"out of\", length(parallel_results)))"},{"path":"https://exelegch.github.io/manureshed-docs/articles/advanced-features.html","id":"enhanced-batch-analysis","dir":"Articles","previous_headings":"Batch Processing","what":"Enhanced Batch Analysis","title":"Advanced Features","text":"comprehensive batch analysis full visualizations:","code":"# Full batch analysis with all visualizations enhanced_results <- batch_analysis_enhanced(   years = 2015:2016,  # Use fewer years for demonstration   scale = \"county\",   nutrients = \"nitrogen\",   create_all_visualizations = TRUE,   create_comparative_plots = TRUE )"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/advanced-features.html","id":"benchmarking","dir":"Articles","previous_headings":"Performance Optimization","what":"Benchmarking","title":"Advanced Features","text":"Test analysis performance:","code":"# Benchmark different configurations benchmark_results <- benchmark_analysis(   scale = \"county\",   year = 2016,   nutrients = \"nitrogen\",   n_runs = 3,   include_wwtp = TRUE )  print(benchmark_results)  # Compare scales scales_to_test <- c(\"county\", \"huc8\", \"huc2\") benchmark_comparison <- list()  for (scale in scales_to_test) {   benchmark_comparison[[scale]] <- benchmark_analysis(     scale = scale,     year = 2016,     nutrients = \"nitrogen\",      n_runs = 2,     include_wwtp = TRUE   ) }  # Compare timing timing_comparison <- data.frame(   Scale = scales_to_test,   Mean_Time_Seconds = sapply(benchmark_comparison, function(x) x$timing$mean),   Memory_MB = sapply(benchmark_comparison, function(x) x$memory_mb$mean) )  print(timing_comparison)"},{"path":"https://exelegch.github.io/manureshed-docs/articles/advanced-features.html","id":"memory-management","dir":"Articles","previous_headings":"Performance Optimization","what":"Memory Management","title":"Advanced Features","text":"","code":"# Clear cache to free up space clear_data_cache()  # Check package health health_status <- health_check(verbose = TRUE)  # Test OSF connection connection_ok <- test_osf_connection() print(paste(\"OSF connection:\", ifelse(connection_ok, \"OK\", \"Failed\")))"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/advanced-features.html","id":"transition-probabilities","dir":"Articles","previous_headings":"Advanced Spatial Analysis","what":"Transition Probabilities","title":"Advanced Features","text":"Analyze nutrient classifications change across space:","code":"# Run analysis results <- run_builtin_analysis(   scale = \"huc8\",   year = 2016,   nutrients = \"nitrogen\",   include_wwtp = TRUE )  # Calculate centroids for spatial analysis centroids <- add_centroid_coordinates(results$integrated$nitrogen)  # Calculate transition probabilities agri_transitions <- calculate_transition_probabilities(   centroids, \"N_class\" )  combined_transitions <- calculate_transition_probabilities(   centroids, \"combined_N_class\" )  # Compare transition matrices print(\"Agricultural transitions:\") print(agri_transitions)  print(\"Combined (WWTP + Agricultural) transitions:\") print(combined_transitions)  # Create network plots create_network_plot(   agri_transitions, \"nitrogen\", \"Agricultural\",   \"network_agricultural.png\" )  create_network_plot(   combined_transitions, \"nitrogen\", \"Combined\",    \"network_combined.png\" )"},{"path":"https://exelegch.github.io/manureshed-docs/articles/advanced-features.html","id":"spatial-statistics","dir":"Articles","previous_headings":"Advanced Spatial Analysis","what":"Spatial Statistics","title":"Advanced Features","text":"","code":"# Calculate spatial statistics library(sf)  # Get results as spatial data spatial_results <- results$integrated$nitrogen  # Calculate areas of different classifications class_areas <- spatial_results %>%   mutate(area_km2 = as.numeric(st_area(.)) / 1000000) %>%   st_drop_geometry() %>%   group_by(combined_N_class) %>%   summarise(     count = n(),     total_area_km2 = sum(area_km2),     mean_area_km2 = mean(area_km2),     .groups = 'drop'   )  print(class_areas)  # Find neighboring relationships neighbors <- st_touches(spatial_results) neighbor_summary <- data.frame(   ID = spatial_results$ID,   N_neighbors = lengths(neighbors),   Class = spatial_results$combined_N_class )  print(\"Average neighbors by classification:\") neighbor_summary %>%   group_by(Class) %>%   summarise(mean_neighbors = mean(N_neighbors), .groups = 'drop')"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/advanced-features.html","id":"research-specific-analysis","dir":"Articles","previous_headings":"Custom Analysis Workflows","what":"Research-Specific Analysis","title":"Advanced Features","text":"","code":"# Example: Livestock-intensive regions analysis analyze_livestock_regions <- function(states, year = 2016) {      results <- list()      for (state in states) {     # Custom threshold for livestock regions     county_data <- load_builtin_nugis(\"county\", year)          # Calculate state-specific threshold     state_county <- county_data[substr(county_data$ID, 1, 2) == get_state_fips(state), ]     custom_threshold <- quantile(state_county$cropland, 0.25)  # 25th percentile          # Run analysis     state_result <- run_state_analysis(       state = state,       scale = \"county\",       year = year,       nutrients = \"nitrogen\",       include_wwtp = TRUE,       cropland_threshold = custom_threshold,       verbose = FALSE     )          results[[state]] <- state_result   }      return(results) }  # Apply to livestock states livestock_states <- c(\"IA\", \"NE\", \"NC\", \"MN\") livestock_results <- analyze_livestock_regions(livestock_states, 2016)"},{"path":"https://exelegch.github.io/manureshed-docs/articles/advanced-features.html","id":"time-series-analysis","dir":"Articles","previous_headings":"Custom Analysis Workflows","what":"Time Series Analysis","title":"Advanced Features","text":"","code":"# Custom time series analysis analyze_trends <- function(scale, years, nutrient = \"nitrogen\") {      trend_data <- list()      for (year in years) {     # Check if WWTP data available     use_wwtp <- year >= 2007 && year <= 2016          result <- run_builtin_analysis(       scale = scale,       year = year,       nutrients = nutrient,       include_wwtp = use_wwtp,       save_outputs = FALSE,       verbose = FALSE     )          # Extract classification summary     if (use_wwtp && \"integrated\" %in% names(result)) {       classes <- table(result$integrated[[nutrient]][[paste0(\"combined_\", toupper(substr(nutrient, 1, 1)), \"_class\")]])     } else {       classes <- table(result$agricultural[[paste0(toupper(substr(nutrient, 1, 1)), \"_class\")]])     }          trend_data[[as.character(year)]] <- list(       year = year,       wwtp_included = use_wwtp,       classes = classes,       source_count = classes[\"Source\"] %||% 0,       sink_count = sum(classes[c(\"Sink_Deficit\", \"Sink_Fertilizer\")], na.rm = TRUE)     )   }      return(trend_data) }  # Analyze nitrogen trends nitrogen_trends <- analyze_trends(\"huc8\", 2008:2016, \"nitrogen\")  # Convert to data frame for plotting trend_df <- do.call(rbind, lapply(nitrogen_trends, function(x) {   data.frame(     Year = x$year,     WWTP_Included = x$wwtp_included,     Source_Count = x$source_count,     Sink_Count = x$sink_count,     Total_Units = sum(x$classes)   ) }))  print(trend_df)"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/advanced-features.html","id":"export-for-other-software","dir":"Articles","previous_headings":"Data Export and Integration","what":"Export for Other Software","title":"Advanced Features","text":"","code":"# Export for GIS software gis_files <- export_for_gis(   results,   output_dir = \"gis_export\",   formats = c(\"shapefile\", \"geojson\") )  # Export for publication pub_files <- export_for_publication(   results,   output_dir = \"publication_export\",   dpi = 600 )  # Export for policy makers policy_files <- export_for_policy(   results,   output_dir = \"policy_export\" )  print(\"Created files:\") print(c(gis_files, pub_files, policy_files))"},{"path":"https://exelegch.github.io/manureshed-docs/articles/advanced-features.html","id":"integration-with-other-packages","dir":"Articles","previous_headings":"Data Export and Integration","what":"Integration with Other Packages","title":"Advanced Features","text":"","code":"# Example: Using with tigris for custom boundaries if (requireNamespace(\"tigris\", quietly = TRUE)) {   # Get state boundary   ohio_boundary <- tigris::states() %>%     filter(STUSPS == \"OH\") %>%     st_transform(5070)  # Transform to analysis CRS      # Spatial filter results   ohio_watersheds <- st_filter(results$integrated$nitrogen, ohio_boundary)      print(paste(\"Ohio watersheds:\", nrow(ohio_watersheds))) }  # Example: Using with nhdplusTools for watershed delineation if (requireNamespace(\"nhdplusTools\", quietly = TRUE)) {   # Find watershed for a specific point   point <- st_sfc(st_point(c(-83.0458, 42.3314)), crs = 4326)  # Detroit   watershed_info <- nhdplusTools::discover_nhdplus_id(point)      # Filter results to this watershed   if (!is.null(watershed_info$huc8)) {     watershed_result <- results$integrated$nitrogen %>%       filter(ID == watershed_info$huc8)     print(watershed_result)   } }"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/advanced-features.html","id":"advanced-validation","dir":"Articles","previous_headings":"Quality Control","what":"Advanced Validation","title":"Advanced Features","text":"","code":"# Comprehensive quality check validation_report <- list()  # Check data completeness validation_report$completeness <- list(   total_units = nrow(results$agricultural),   missing_n_class = sum(is.na(results$agricultural$N_class)),   excluded_percent = sum(results$agricultural$N_class == \"Excluded\", na.rm = TRUE) /                      nrow(results$agricultural) * 100 )  # Check balance calculations if (\"integrated\" %in% names(results)) {   n_data <- results$integrated$nitrogen   validation_report$balance_check <- list(     impossible_sources = sum(n_data$combined_N_surplus <= 0 &                              n_data$combined_N_class == \"Source\", na.rm = TRUE),     impossible_sinks = sum(n_data$combined_N_surplus > 0 &                            n_data$combined_N_class %in% c(\"Sink_Deficit\", \"Sink_Fertilizer\"), na.rm = TRUE)   ) }  # Check spatial validity if (inherits(results$agricultural, \"sf\")) {   validation_report$spatial_check <- list(     invalid_geometries = sum(!st_is_valid(results$agricultural)),     crs = st_crs(results$agricultural)$input   ) }  print(\"Validation Report:\") print(str(validation_report))"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/advanced-features.html","id":"performance-tips","dir":"Articles","previous_headings":"Tips for Advanced Users","what":"Performance Tips","title":"Advanced Features","text":"","code":"# 1. Use appropriate scales # County: ~3000 units, good for policy analysis # HUC8: ~2000 units, good for watershed analysis   # HUC2: ~18 units, good for regional analysis  # 2. Manage memory for large analyses gc()  # Garbage collection clear_data_cache()  # Clear package cache  # 3. Use parallel processing for multiple years # But be careful not to use too many cores  # 4. Save intermediate results save_spatial_data(results$agricultural, \"intermediate_results.rds\")"},{"path":"https://exelegch.github.io/manureshed-docs/articles/advanced-features.html","id":"reproducibility","dir":"Articles","previous_headings":"Tips for Advanced Users","what":"Reproducibility","title":"Advanced Features","text":"covers main advanced features. package designed flexible power users remaining accessible basic analyses.","code":"# Always document your analysis parameters analysis_params <- list(   scale = \"huc8\",   year = 2016,   nutrients = \"nitrogen\",    cropland_threshold = 1234,   include_wwtp = TRUE,   analysis_date = Sys.Date(),   package_version = packageVersion(\"manureshed\") )  # Save parameters with results results$analysis_params <- analysis_params save_analysis_summary(results, \"analysis_summary.json\", format = \"json\")"},{"path":"https://exelegch.github.io/manureshed-docs/articles/custom-efficiency-analyis.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Sensitivity Analysis with Custom Efficiency Factors","text":"vignette demonstrates conduct sensitivity analysis using custom nutrient efficiency factors manureshed package. standard analyses use established efficiency factors (0.5 nitrogen, 1.0 phosphorus), users may want explore different efficiency assumptions affect classification results.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/custom-efficiency-analyis.html","id":"standard-vs--custom-efficiency-factors","dir":"Articles","previous_headings":"","what":"Standard vs. Custom Efficiency Factors","title":"Sensitivity Analysis with Custom Efficiency Factors","text":"Standard Factors: - Nitrogen: 0.5 (50%) - Reflects typical losses nutrient cycling, application, uptake - Phosphorus: 1.0 (100%) - Assumes full phosphorus availability Use Custom Factors: - Evaluating improved management practices (higher efficiency) - Accounting regional differences application methods - Conducting uncertainty analysis - Testing different policy scenarios","code":""},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/custom-efficiency-analyis.html","id":"load-required-data","dir":"Articles","previous_headings":"Basic Sensitivity Analysis","what":"Load Required Data","title":"Sensitivity Analysis with Custom Efficiency Factors","text":"","code":"library(manureshed)  # Load built-in data for HUC8 watersheds nugis_data <- load_builtin_nugis(\"huc8\", 2016) boundaries <- load_builtin_boundaries(\"huc8\")"},{"path":"https://exelegch.github.io/manureshed-docs/articles/custom-efficiency-analyis.html","id":"compare-different-nitrogen-efficiencies","dir":"Articles","previous_headings":"Basic Sensitivity Analysis","what":"Compare Different Nitrogen Efficiencies","title":"Sensitivity Analysis with Custom Efficiency Factors","text":"","code":"# Standard analysis (50% efficiency) results_standard <- agri_classify_complete_custom(   nugis_data,    scale = \"huc8\",   n_efficiency = 0.5,   p_efficiency = 1.0 )  # Improved management scenario (70% efficiency) results_high <- agri_classify_complete_custom(   nugis_data,   scale = \"huc8\",    n_efficiency = 0.7,   p_efficiency = 1.0 )  # Conservative scenario (30% efficiency) results_low <- agri_classify_complete_custom(   nugis_data,   scale = \"huc8\",   n_efficiency = 0.3,   p_efficiency = 1.0 )  # Compare nitrogen classifications message(\"Standard (50% efficiency):\\n\") print(table(results_standard$N_class))  message(\"\\nImproved Management (70% efficiency):\\n\") print(table(results_high$N_class))  message(\"\\nConservative (30% efficiency):\\n\") print(table(results_low$N_class))"},{"path":"https://exelegch.github.io/manureshed-docs/articles/custom-efficiency-analyis.html","id":"visualize-sensitivity-results","dir":"Articles","previous_headings":"Basic Sensitivity Analysis","what":"Visualize Sensitivity Results","title":"Sensitivity Analysis with Custom Efficiency Factors","text":"","code":"library(ggplot2) library(dplyr)  # Create comparison data frame efficiency_scenarios <- data.frame(   Efficiency = c(0.3, 0.5, 0.7),   Scenario = c(\"Conservative\", \"Standard\", \"Improved\"),   Source = c(     sum(results_low$N_class == \"Source\", na.rm = TRUE),     sum(results_standard$N_class == \"Source\", na.rm = TRUE),     sum(results_high$N_class == \"Source\", na.rm = TRUE)   ),   Sink_Deficit = c(     sum(results_low$N_class == \"Sink_Deficit\", na.rm = TRUE),     sum(results_standard$N_class == \"Sink_Deficit\", na.rm = TRUE),     sum(results_high$N_class == \"Sink_Deficit\", na.rm = TRUE)   ) )  # Plot source watersheds across scenarios ggplot(efficiency_scenarios, aes(x = Efficiency, y = Source)) +   geom_line(size = 1.2, color = \"#2166ac\") +   geom_point(size = 3, color = \"#2166ac\") +   labs(     title = \"Impact of Nitrogen Efficiency on Source Watersheds\",     x = \"Nitrogen Efficiency Factor\",     y = \"Number of Source Watersheds\"   ) +   theme_minimal() +   theme(     plot.title = element_text(size = 14, face = \"bold\")   )"},{"path":"https://exelegch.github.io/manureshed-docs/articles/custom-efficiency-analyis.html","id":"phosphorus-sensitivity-analysis","dir":"Articles","previous_headings":"","what":"Phosphorus Sensitivity Analysis","title":"Sensitivity Analysis with Custom Efficiency Factors","text":"phosphorus typically uses 100% efficiency, can explore alternative scenarios:","code":"# Standard phosphorus analysis results_p_standard <- agri_classify_complete_custom(   nugis_data,   scale = \"huc8\",   n_efficiency = 0.5,   p_efficiency = 1.0 )  # Reduced phosphorus availability scenario results_p_reduced <- agri_classify_complete_custom(   nugis_data,   scale = \"huc8\",   n_efficiency = 0.5,   p_efficiency = 0.8 )  # Compare phosphorus classifications message(\"Standard (100% P efficiency):\\n\") print(table(results_p_standard$P_class))  message(\"\\nReduced Availability (80% P efficiency):\\n\") print(table(results_p_reduced$P_class))"},{"path":"https://exelegch.github.io/manureshed-docs/articles/custom-efficiency-analyis.html","id":"combined-sensitivity-analysis","dir":"Articles","previous_headings":"","what":"Combined Sensitivity Analysis","title":"Sensitivity Analysis with Custom Efficiency Factors","text":"Analyze nutrients simultaneously custom efficiencies:","code":"# Create multiple scenarios scenarios <- list(   baseline = list(n = 0.5, p = 1.0),   improved_n = list(n = 0.7, p = 1.0),   reduced_p = list(n = 0.5, p = 0.8),   both_modified = list(n = 0.6, p = 0.9) )  # Run all scenarios results_list <- lapply(names(scenarios), function(scenario_name) {   scenario <- scenarios[[scenario_name]]      results <- agri_classify_complete_custom(     nugis_data,     scale = \"huc8\",     n_efficiency = scenario$n,     p_efficiency = scenario$p   )      # Return summary statistics   data.frame(     Scenario = scenario_name,     N_Efficiency = scenario$n,     P_Efficiency = scenario$p,     N_Source = sum(results$N_class == \"Source\", na.rm = TRUE),     P_Source = sum(results$P_class == \"Source\", na.rm = TRUE),     N_Sink_Deficit = sum(results$N_class == \"Sink_Deficit\", na.rm = TRUE),     P_Sink_Deficit = sum(results$P_class == \"Sink_Deficit\", na.rm = TRUE)   ) })  # Combine results sensitivity_summary <- do.call(rbind, results_list) print(sensitivity_summary)"},{"path":"https://exelegch.github.io/manureshed-docs/articles/custom-efficiency-analyis.html","id":"mapping-results-across-scenarios","dir":"Articles","previous_headings":"","what":"Mapping Results Across Scenarios","title":"Sensitivity Analysis with Custom Efficiency Factors","text":"Visualize spatial differences efficiency scenarios:","code":"# Join with spatial boundaries spatial_standard <- boundaries %>%   left_join(results_standard, by = c(\"huc8\" = \"ID\"))  spatial_high <- boundaries %>%   left_join(results_high, by = c(\"huc8\" = \"ID\"))  # Create side-by-side maps map_standard <- map_agricultural_classification(   spatial_standard,    \"nitrogen\",    \"N_class\",   \"Standard Efficiency (50%)\" )  map_high <- map_agricultural_classification(   spatial_high,   \"nitrogen\",   \"N_class\",    \"Improved Efficiency (70%)\" )  # Display maps (requires cowplot or similar) # cowplot::plot_grid(map_standard, map_high, ncol = 2)"},{"path":"https://exelegch.github.io/manureshed-docs/articles/custom-efficiency-analyis.html","id":"interpreting-results","dir":"Articles","previous_headings":"","what":"Interpreting Results","title":"Sensitivity Analysis with Custom Efficiency Factors","text":"Key Considerations: Source Watersheds: Higher efficiency factors typically increase number source watersheds nitrogen becomes “available” redistribution Sink Classification: Lower efficiencies may shift “within watershed” areas deficit status Management Implications: Results inform decision-making : Required efficiency improvements achieve redistribution goals Sensitivity regional planning efficiency assumptions Infrastructure needs different management scenarios Uncertainty Quantification: Range results across scenarios indicates uncertainty due efficiency assumptions","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/custom-efficiency-analyis.html","id":"recommended-practice","dir":"Articles","previous_headings":"","what":"Recommended Practice","title":"Sensitivity Analysis with Custom Efficiency Factors","text":"publication policy analysis, consider: Report standard results using established efficiency factors (0.5 N, 1.0 P) Conduct sensitivity analysis reasonable alternative values (e.g., Â±20%) Document assumptions clearly methodology Discuss uncertainty based sensitivity results","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/custom-efficiency-analyis.html","id":"example-complete-sensitivity-workflow","dir":"Articles","previous_headings":"","what":"Example: Complete Sensitivity Workflow","title":"Sensitivity Analysis with Custom Efficiency Factors","text":"","code":"# Define efficiency range for nitrogen n_efficiency_values <- seq(0.3, 0.7, by = 0.1)  # Run sensitivity analysis sensitivity_results <- lapply(n_efficiency_values, function(eff) {   results <- agri_classify_complete_custom(     nugis_data,     scale = \"huc8\",     n_efficiency = eff,     p_efficiency = 1.0   )      data.frame(     N_Efficiency = eff,     N_Source = sum(results$N_class == \"Source\", na.rm = TRUE),     N_Sink_Deficit = sum(results$N_class == \"Sink_Deficit\", na.rm = TRUE),     N_Within_Watershed = sum(results$N_class == \"Within_Watershed\", na.rm = TRUE)   ) })  # Combine and visualize sensitivity_df <- do.call(rbind, sensitivity_results)  # Create sensitivity plot library(tidyr) sensitivity_long <- sensitivity_df %>%   pivot_longer(     cols = c(N_Source, N_Sink_Deficit, N_Within_Watershed),     names_to = \"Classification\",     values_to = \"Count\"   ) %>%   mutate(     Classification = gsub(\"N_\", \"\", Classification),     Classification = gsub(\"_\", \" \", Classification)   )  ggplot(sensitivity_long, aes(x = N_Efficiency, y = Count, color = Classification)) +   geom_line(size = 1.2) +   geom_point(size = 3) +   labs(     title = \"Nitrogen Classification Sensitivity to Efficiency Factor\",     x = \"Nitrogen Efficiency Factor\",     y = \"Number of Watersheds\",     color = \"Classification\"   ) +   theme_minimal() +   theme(     plot.title = element_text(size = 14, face = \"bold\"),     legend.position = \"bottom\"   )"},{"path":"https://exelegch.github.io/manureshed-docs/articles/custom-efficiency-analyis.html","id":"summary","dir":"Articles","previous_headings":"","what":"Summary","title":"Sensitivity Analysis with Custom Efficiency Factors","text":"Custom efficiency factors enable: - Sensitivity analysis quantify uncertainty - Scenario planning different management practices - Regional adaptation varying agricultural systems - Policy evaluation different assumptions applications, standard factors (N: 0.5, P: 1.0) remain appropriate, sensitivity analysis provides valuable context interpreting results informing decision-making.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/custom-efficiency-analyis.html","id":"references","dir":"Articles","previous_headings":"","what":"References","title":"Sensitivity Analysis with Custom Efficiency Factors","text":"Spiegal et al. (2020). Manuresheds: Advancing nutrient recycling US agriculture Flynn et al. (2023). Manureshed nutrient balances watershed scales Akanbi et al. (2025). Towards circular nutrient economies: Integrated framework information standard manureshed methodologies, see vignette(\"getting-started\").","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Using the Interactive Dashboard","text":"manureshed interactive dashboard provides user-friendly interface exploring nutrient balance data without writing R code. ideal : Policy makers decision makers Extension agents educators Students learning nutrient management Quick exploratory analysis Presentations demonstrations","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"installation-requirements","dir":"Articles","previous_headings":"","what":"Installation Requirements","title":"Using the Interactive Dashboard","text":"dashboard requires several additional packages beyond core manureshed package: packages optional - manureshed works fine without need programmatic interface. ’re needed interactive dashboard.","code":"# Install dashboard dependencies install.packages(c(   \"shiny\",   \"shinydashboard\",   \"leaflet\",   \"plotly\",   \"DT\" ))"},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"launching-the-dashboard","dir":"Articles","previous_headings":"","what":"Launching the Dashboard","title":"Using the Interactive Dashboard","text":"dependencies installed, launch dashboard : dashboard open default web browser. default, uses random available port. can specify port:","code":"library(manureshed)  # Launch the dashboard launch_dashboard() # Launch on specific port launch_dashboard(port = 3838)"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"main-components","dir":"Articles","previous_headings":"Dashboard Interface","what":"Main Components","title":"Using the Interactive Dashboard","text":"dashboard four main sections: Sidebar: Analysis parameters controls Map Tab: Interactive spatial visualization Statistics Tab: Summary metrics plots Data Table Tab: Detailed results table Help Tab: Documentation information","code":""},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"analysis-parameters","dir":"Articles","previous_headings":"Dashboard Interface > Sidebar Controls","what":"Analysis Parameters","title":"Using the Interactive Dashboard","text":"Spatial Scale: - County: ~3,000 units, good policy analysis - HUC8 Watershed: ~2,000 units, good watershed management - HUC2 Region: 18 units, good regional overview Year: - Slider 2007-2016 - 2007-2016: WWTP data available - Earlier years: Agricultural data Nutrient: - Nitrogen - Phosphorus Include Wastewater Treatment Plants: - Checked: Shows integrated agricultural + WWTP analysis - Unchecked: Shows agricultural-analysis Advanced Options (click “Show advanced options”): - Cropland Threshold: Minimum cropland area inclusion (default: 1,234 acres)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"action-buttons","dir":"Articles","previous_headings":"Dashboard Interface > Sidebar Controls","what":"Action Buttons","title":"Using the Interactive Dashboard","text":"Run Analysis: - Click execute analysis selected parameters - Shows progress indicator - Displays notification complete Download Data: - Exports results CSV file - Includes analysis columns","code":""},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"interactive-map-features","dir":"Articles","previous_headings":"Using the Map Tab","what":"Interactive Map Features","title":"Using the Interactive Dashboard","text":"map tab displays color-coded interactive map nutrient classifications: Color Legend: - Red: Nutrient sources (surplus) - Blue: Sinks deficit (fertilizer use) - Purple: Sinks deficit (despite fertilizer use) - Green: Within watershed/county (balanced WWTP) - Light blue: Excluded (cropland threshold) Interaction: - Zoom: Scroll wheel +/- buttons - Pan: Click drag - Click: See detailed information popup - Hover: Highlight individual units Popup Information: click map area, ’ll see: - Unit ID (FIPS code, HUC8, HUC2) - Classification - Surplus/deficit amount (kg) - Cropland area (acres)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"map-navigation-tips","dir":"Articles","previous_headings":"Using the Map Tab","what":"Map Navigation Tips","title":"Using the Interactive Dashboard","text":"Finding Specific Areas: 1. Zoom region interest 2. Use search function browser (Ctrl+F / Cmd+F) 3. Click areas identify Comparing Regions: 1. Run analysis WWTP included 2. Note colors patterns 3. Uncheck WWTP box 4. Run analysis 5. Compare classifications change","code":""},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"value-boxes","dir":"Articles","previous_headings":"Using the Statistics Tab","what":"Value Boxes","title":"Using the Interactive Dashboard","text":"Four key metrics displayed top: Sources: Red box - nutrient surplus areas Sink (Deficit): Blue box - deficit without fertilizer Sink (Fertilizer): Purple box - deficit despite fertilizer Within Watershed/County: Green box - balanced (WWTP included) Excluded: Light blue box - threshold","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"classification-distribution","dir":"Articles","previous_headings":"Using the Statistics Tab","what":"Classification Distribution","title":"Using the Interactive Dashboard","text":"Pie Chart: - Shows proportions classification - Interactive: Hover see exact counts - Click legend items show/hide categories","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"surplusdeficit-distribution","dir":"Articles","previous_headings":"Using the Statistics Tab","what":"Surplus/Deficit Distribution","title":"Using the Interactive Dashboard","text":"Histogram: - Shows distribution surplus (positive) deficit (negative) values - Interactive: Hover see bin counts - Zoom clicking dragging","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"summary-statistics","dir":"Articles","previous_headings":"Using the Statistics Tab","what":"Summary Statistics","title":"Using the Interactive Dashboard","text":"Text output showing: - Analysis parameters used - Total units analyzed - Classification counts - Statistical summary surplus/deficit values","code":""},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"interactive-table-features","dir":"Articles","previous_headings":"Using the Data Table Tab","what":"Interactive Table Features","title":"Using the Interactive Dashboard","text":"data table provides detailed results : Search: - Global search box (top right) - Column-specific search (top column) Sorting: - Click column headers sort - Click reverse sort - Multi-column sort: Shift+click Filtering: - Use column search boxes - Type partial matches - Filter multiple columns Pagination: - Choose rows per page (10, 25, 50, 100) - Navigate pages","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"useful-filters","dir":"Articles","previous_headings":"Using the Data Table Tab","what":"Useful Filters","title":"Using the Interactive Dashboard","text":"Find Sources: Find High Surplus Areas: Find Specific State:","code":"In classification column filter: type \"Source\" Sort by surplus column (descending) Look at top entries In ID column filter (for county scale): type state FIPS code Example: \"19\" for Iowa"},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"help-tab","dir":"Articles","previous_headings":"","what":"Help Tab","title":"Using the Interactive Dashboard","text":"Help tab provides: - manureshed information - use instructions - Classification definitions - Package version - Link documentation","code":""},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"example-1-basic-state-analysis","dir":"Articles","previous_headings":"Workflow Examples","what":"Example 1: Basic State Analysis","title":"Using the Interactive Dashboard","text":"Goal: Analyze Iowa watersheds 2016 Steps: 1. Launch dashboard: launch_dashboard() 2. Set Scale: HUC8 Watershed 3. Set Year: 2016 4. Set Nutrient: Nitrogen 5. Check: Include Wastewater Treatment Plants 6. Click: Run Analysis 7. Wait completion notification 8. Explore results Map tab 9. Click Download Data save results","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"example-2-compare-agricultural-vs--integrated","dir":"Articles","previous_headings":"Workflow Examples","what":"Example 2: Compare Agricultural vs. Integrated","title":"Using the Interactive Dashboard","text":"Goal: See WWTP changes classifications Steps: 1. Set parameters (e.g., HUC8, 2016, Nitrogen) 2. Check: Include WWTP 3. Click: Run Analysis 4. Note Statistics tab value boxes 5. Uncheck: Include WWTP 6. Observe value boxes change 7. Compare differences Look : - many sources remain? - many sinks become “Within Watershed”? - total surplus/deficit change?","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"example-3-year-over-year-exploration","dir":"Articles","previous_headings":"Workflow Examples","what":"Example 3: Year-over-Year Exploration","title":"Using the Interactive Dashboard","text":"Goal: Explore temporal trends Steps: 1. Set Scale: County 2. Set Nutrient: Nitrogen 3. Set Year: 2010 4. Check: Include WWTP 5. Run Analysis 6. Note key statistics 7. Change Year: 2013 8. Run Analysis 9. Compare 2010 results 10. Repeat 2016 Document Findings: - Screenshot Statistics tab year - Download data files year - Use scenario comparison function formal analysis","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"example-4-threshold-sensitivity","dir":"Articles","previous_headings":"Workflow Examples","what":"Example 4: Threshold Sensitivity","title":"Using the Interactive Dashboard","text":"Goal: See threshold affects excluded areas Steps: 1. Click: Show advanced options 2. Set Threshold: 500 acres 3. Run Analysis 4. Note number “Excluded” box 5. Set Threshold: 1234 acres (default) 6. Run Analysis 7. Note change “Excluded” 8. Set Threshold: 2000 acres 9. Run Analysis 10. Compare three","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"example-5-create-presentation-materials","dir":"Articles","previous_headings":"Workflow Examples","what":"Example 5: Create Presentation Materials","title":"Using the Interactive Dashboard","text":"Goal: Generate maps presentation Steps: 1. Set desired parameters 2. Run Analysis 3. Map tab: Take screenshot (Print Screen / Cmd+Shift+4) 4. Statistics tab: Take screenshot charts 5. Arrange screenshots presentation software Tips: - Zoom map desired extent screenshot - Use full-screen browser mode cleaner screenshots - Consider running multiple scenarios","code":""},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"data-download","dir":"Articles","previous_headings":"Downloading Results","what":"Data Download","title":"Using the Interactive Dashboard","text":"Click “Download Data” button export CSV file containing: Columns Include: - Unit ID (FIPS, HUC8, HUC2) - Cropland area - Surplus/deficit values - Classifications - WWTP included: combined classifications surplus File Name Format: Example: manureshed_huc8_2016_nitrogen.csv","code":"manureshed_[scale]_[year]_[nutrient].csv"},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"using-downloaded-data","dir":"Articles","previous_headings":"Downloading Results","what":"Using Downloaded Data","title":"Using the Interactive Dashboard","text":"Import spreadsheet software: analysis R:","code":"# In Excel or Google Sheets: # File > Import > CSV # Select the downloaded file # Read downloaded data data <- read.csv(\"manureshed_huc8_2016_nitrogen.csv\")  # Filter to sources only sources <- data[data$N_class == \"Source\", ]  # Calculate statistics mean(sources$N_surplus)"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"for-faster-analysis","dir":"Articles","previous_headings":"Performance Tips","what":"For Faster Analysis","title":"Using the Interactive Dashboard","text":"Choose Appropriate Scale: - HUC2: Fastest (~18 units) - HUC8: Moderate (~2,000 units) - County: Slowest (~3,000 units) Processing Times (approximate): - County: 30-60 seconds - HUC8: 20-40 seconds - HUC2: 5-10 seconds Note: First run year slower (downloads data), subsequent runs faster (uses cached data).","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"browser-performance","dir":"Articles","previous_headings":"Performance Tips","what":"Browser Performance","title":"Using the Interactive Dashboard","text":"Recommended Browsers: - Chrome (best performance) - Firefox (good performance) - Safari (good Mac) - Edge (good Windows) Dashboard Slow: - Close unused browser tabs - Try different browser - Restart R session - Clear browser cache","code":""},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"dashboard-wont-launch","dir":"Articles","previous_headings":"Troubleshooting","what":"Dashboard Won’t Launch","title":"Using the Interactive Dashboard","text":"Error: “Package ‘shiny’ required” Solution: Error: “find dashboard files” Solution:","code":"install.packages(c(\"shiny\", \"shinydashboard\", \"leaflet\", \"plotly\", \"DT\")) devtools::install()  # Reinstall package"},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"analysis-fails","dir":"Articles","previous_headings":"Troubleshooting","what":"Analysis Fails","title":"Using the Interactive Dashboard","text":"Error analysis: Possible causes: - Network issue (downloading data) - Invalid year selection - Insufficient memory Solutions: 1. Check internet connection 2. Try different year 3. Use smaller scale (HUC2) 4. Restart R session","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"map-not-displaying","dir":"Articles","previous_headings":"Troubleshooting","what":"Map Not Displaying","title":"Using the Interactive Dashboard","text":"Map shows base layer , colored regions: Possible causes: - Analysis run yet - Analysis failed silently Solutions: 1. Click “Run Analysis” 2. Check browser console (F12) errors 3. Try different parameters","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"value-boxes-show-zero","dir":"Articles","previous_headings":"Troubleshooting","what":"Value Boxes Show Zero","title":"Using the Interactive Dashboard","text":"Green box shows 0: normal : - Agricultural-analysis (“Within Watershed” category) - Area genuinely balanced units see non-zero values: - Check “Include WWTP” - Run Analysis","code":""},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"when-to-use-dashboard","dir":"Articles","previous_headings":"Comparison with Programmatic Interface","what":"When to Use Dashboard","title":"Using the Interactive Dashboard","text":"Dashboard better : - Quick exploration - Demonstrations - Non-R users - Visual presentations - Teaching","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"when-to-use-r-code","dir":"Articles","previous_headings":"Comparison with Programmatic Interface","what":"When to Use R Code","title":"Using the Interactive Dashboard","text":"R code better : - Batch processing multiple years - Custom analyses - Reproducible research - Integration analyses - Automated workflows","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"hybrid-approach","dir":"Articles","previous_headings":"Comparison with Programmatic Interface","what":"Hybrid Approach","title":"Using the Interactive Dashboard","text":"Use together:","code":"# 1. Explore with dashboard launch_dashboard() # Identify interesting patterns  # 2. Reproduce in code for publication results <- run_builtin_analysis(   scale = \"huc8\",   year = 2016,   nutrients = \"nitrogen\",   include_wwtp = TRUE )  # 3. Do advanced analysis comparison <- compare_scenarios(...)"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"for-colleagues-without-r","dir":"Articles","previous_headings":"Sharing Results","what":"For Colleagues Without R","title":"Using the Interactive Dashboard","text":"Take screenshots dashboard Download data CSV files Email files brief explanation","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"for-r-users","dir":"Articles","previous_headings":"Sharing Results","what":"For R Users","title":"Using the Interactive Dashboard","text":"Share code instead:","code":"# Colleagues can reproduce with: library(manureshed) results <- run_builtin_analysis(   scale = \"huc8\",   year = 2016,   nutrients = \"nitrogen\",   include_wwtp = TRUE )"},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"for-presentations","dir":"Articles","previous_headings":"Sharing Results","what":"For Presentations","title":"Using the Interactive Dashboard","text":"Use dashboard presentation mode Navigate pre-analyzed results Use zoom highlight areas interest Switch tabs show different views","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"accessibility-features","dir":"Articles","previous_headings":"","what":"Accessibility Features","title":"Using the Interactive Dashboard","text":"dashboard includes: - Keyboard navigation support - Screen reader compatibility - High contrast color schemes - Resizable text - Alternative text graphics","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"privacy-and-security","dir":"Articles","previous_headings":"","what":"Privacy and Security","title":"Using the Interactive Dashboard","text":"Data Privacy: - analysis runs locally computer - data sent external servers - Downloads saved local machine Security: - Dashboard runs localhost (computer ) - accessible internet - authentication required (local use )","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"advanced-deploying-for-teams","dir":"Articles","previous_headings":"","what":"Advanced: Deploying for Teams","title":"Using the Interactive Dashboard","text":"want share dashboard team:","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"option-1-shinyapps-io","dir":"Articles","previous_headings":"Advanced: Deploying for Teams","what":"Option 1: Shinyapps.io","title":"Using the Interactive Dashboard","text":"Deploy cloud hosting:","code":"library(rsconnect)  # Configure account (one time) setAccountInfo(name=\"your-account\", token=\"...\", secret=\"...\")  # Deploy deployApp(   appDir = system.file(\"shiny\", \"dashboard\", package = \"manureshed\"),   appName = \"manureshed-dashboard\" )"},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"option-2-rstudio-connect","dir":"Articles","previous_headings":"Advanced: Deploying for Teams","what":"Option 2: RStudio Connect","title":"Using the Interactive Dashboard","text":"Deploy institutional server:","code":"# Follow RStudio Connect deployment guide # Requires RStudio Connect server"},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"option-3-shiny-server","dir":"Articles","previous_headings":"Advanced: Deploying for Teams","what":"Option 3: Shiny Server","title":"Using the Interactive Dashboard","text":"Install shared server: - Requires system administration access - Best long-term team use - See Shiny Server documentation","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"getting-help","dir":"Articles","previous_headings":"","what":"Getting Help","title":"Using the Interactive Dashboard","text":"Within Dashboard: - Click “Help” tab basic information Package Documentation: Online Resources: - Package website - GitHub repository - Vignettes: browseVignettes(\"manureshed\") Report Issues: - Use GitHub issues bug reports - Include error messages screenshots - Describe steps reproduce","code":"?launch_dashboard ?run_builtin_analysis"},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"related-vignettes","dir":"Articles","previous_headings":"","what":"Related Vignettes","title":"Using the Interactive Dashboard","text":"vignette(\"getting-started\") - Basic package usage vignette(\"scenario-comparison\") - Compare multiple scenarios vignette(\"advanced-features\") - Advanced analysis techniques vignette(\"data-integration\") - Using custom data","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/dashboard-guide.html","id":"summary","dir":"Articles","previous_headings":"","what":"Summary","title":"Using the Interactive Dashboard","text":"manureshed interactive dashboard provides: Pros: - R coding required - Visual intuitive - Great exploration - Easy demonstrate - Interactive maps plots Cons: - Requires additional packages - Limited one analysis time - suitable batch processing - Less flexible coding Best : - Initial data exploration - Presentations teaching - Non-programmer collaborators - Quick “” scenarios - Visual communication reproducible research complex workflows, use programmatic interface alongside dashboard.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Using Your Own Data","text":"manureshed package includes data 1987-2016, can add : WWTP data years outside 2007-2016 Agricultural data sources Custom spatial boundaries Industrial urban nutrient sources","code":""},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"for-years-outside-2007-2016","dir":"Articles","previous_headings":"Using Custom WWTP Data","what":"For Years Outside 2007-2016","title":"Using Your Own Data","text":"package WWTP data 2007-2016. years, provide : example shows complete workflow custom data final maps saved results.","code":"# Use your WWTP files for 2020 results_2020 <- run_builtin_analysis(   scale = \"huc8\",   year = 2020,  # Agricultural data available 1987-2016   nutrients = \"nitrogen\",   include_wwtp = TRUE,   custom_wwtp_nitrogen = \"nitrogen_2021.csv\",   wwtp_load_units = \"kg\" )  # 3. Check results summarize_results(results_custom) quick_check(results_custom)  # 4. Create maps nitrogen_map <- map_agricultural_classification(   results_custom$integrated$nitrogen,   \"nitrogen\", \"combined_N_class\",   \"2021 Nitrogen with Custom WWTP Data\" )  save_plot(nitrogen_map, \"custom_analysis_2021.png\")  # 5. Save results save_spatial_data(   results_custom$integrated$nitrogen,   \"nitrogen_2021_results.rds\" )"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"adding-other-nutrient-sources","dir":"Articles","previous_headings":"Advanced Custom Data Integration","what":"Adding Other Nutrient Sources","title":"Using Your Own Data","text":"can integrate additional nutrient sources beyond WWTP:","code":"# Example: Adding industrial sources industrial_data <- data.frame(   Facility_Name = c(\"Steel Plant A\", \"Chemical Plant B\", \"Food Processor C\"),   Lat = c(41.5, 40.7, 42.1),   Long = c(-81.7, -82.1, -83.5),   N_Load_tons = c(50, 75, 30),   P_Load_tons = c(10, 15, 8),   Source_Type = \"Industrial\" )  # Convert to spatial format industrial_sf <- st_as_sf(industrial_data,                           coords = c(\"Long\", \"Lat\"),                           crs = 4326) %>%   st_transform(5070)  # Transform to analysis CRS  # Aggregate by spatial units (example for HUC8) boundaries <- load_builtin_boundaries(\"huc8\") industrial_aggregated <- wwtp_aggregate_by_boundaries(   industrial_sf, boundaries, \"nitrogen\", \"huc8\" )  # Add to existing results # (You would modify the integration functions to include industrial sources)"},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"working-with-different-time-periods","dir":"Articles","previous_headings":"Advanced Custom Data Integration","what":"Working with Different Time Periods","title":"Using Your Own Data","text":"","code":"# Create a time series dataset years_to_analyze <- 2018:2022 time_series_results <- list()  for (year in years_to_analyze) {   # Check if you have WWTP data for this year   wwtp_file <- paste0(\"wwtp_nitrogen_\", year, \".csv\")      if (file.exists(wwtp_file)) {     time_series_results[[as.character(year)]] <- run_builtin_analysis(       scale = \"huc8\",       year = year,       nutrients = \"nitrogen\",       include_wwtp = TRUE,       custom_wwtp_nitrogen = wwtp_file,       save_outputs = FALSE,       verbose = FALSE     )   } else {     # Agricultural only if no WWTP data     time_series_results[[as.character(year)]] <- run_builtin_analysis(       scale = \"huc8\",        year = year,       nutrients = \"nitrogen\",       include_wwtp = FALSE,       save_outputs = FALSE,       verbose = FALSE     )   } }  # Compare results across years yearly_summary <- do.call(rbind, lapply(names(time_series_results), function(year) {   result <- time_series_results[[year]]   classes <- table(result$agricultural$N_class)      data.frame(     Year = as.numeric(year),     Total_Units = sum(classes),     Source_Units = classes[\"Source\"] %||% 0,     Sink_Units = sum(classes[c(\"Sink_Deficit\", \"Sink_Fertilizer\")], na.rm = TRUE),     Excluded_Units = classes[\"Excluded\"] %||% 0   ) }))  print(yearly_summary)"},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"custom-agricultural-data","dir":"Articles","previous_headings":"Advanced Custom Data Integration","what":"Custom Agricultural Data","title":"Using Your Own Data","text":"agricultural data sources:","code":"# Example: Custom agricultural data format custom_farm_data <- data.frame(   County_FIPS = c(\"39001\", \"39003\", \"39005\"),   Manure_N_kg = c(100000, 150000, 200000),   Manure_P_kg = c(20000, 30000, 40000),   Fertilizer_N_kg = c(50000, 75000, 100000),   Fertilizer_P_kg = c(10000, 15000, 20000),   N_Fixation_kg = c(25000, 40000, 35000),   Crop_N_Removal_kg = c(80000, 120000, 140000),   Crop_P_Removal_kg = c(15000, 25000, 30000),   Cropland_acres = c(45000, 67000, 52000) )  # Convert to package format standardized_farm_data <- data.frame(   ID = custom_farm_data$County_FIPS,   NAME = paste(\"County\", substr(custom_farm_data$County_FIPS, 3, 5)),   manure_N = custom_farm_data$Manure_N_kg,   manure_P = custom_farm_data$Manure_P_kg,   fertilizer_N = custom_farm_data$Fertilizer_N_kg,   fertilizer_P = custom_farm_data$Fertilizer_P_kg,   N_fixation = custom_farm_data$N_Fixation_kg,   crop_removal_N = custom_farm_data$Crop_N_Removal_kg,   crop_removal_P = custom_farm_data$Crop_P_Removal_kg,   cropland = custom_farm_data$Cropland_acres )  # Apply classifications custom_classified <- standardized_farm_data %>%   agri_classify_nitrogen(cropland_threshold = 1234, scale = \"county\") %>%   agri_classify_phosphorus(cropland_threshold = 1234, scale = \"county\")  print(custom_classified)"},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"data-validation-and-quality-control","dir":"Articles","previous_headings":"Advanced Custom Data Integration","what":"Data Validation and Quality Control","title":"Using Your Own Data","text":"","code":"# Function to validate your custom data validate_custom_data <- function(data, data_type = \"wwtp\") {      issues <- list()      if (data_type == \"wwtp\") {     # Check required columns     required_cols <- c(\"Facility_Name\", \"Lat\", \"Long\")     missing_cols <- setdiff(required_cols, names(data))     if (length(missing_cols) > 0) {       issues$missing_columns <- missing_cols     }          # Check coordinate ranges (for US)     if (\"Lat\" %in% names(data) && \"Long\" %in% names(data)) {       invalid_coords <- sum(data$Lat < 24 | data$Lat > 50 |                             data$Long < -125 | data$Long > -66, na.rm = TRUE)       if (invalid_coords > 0) {         issues$invalid_coordinates <- invalid_coords       }     }          # Check for negative loads     load_cols <- names(data)[grepl(\"Load|load\", names(data))]     for (col in load_cols) {       if (col %in% names(data)) {         negative_loads <- sum(data[[col]] < 0, na.rm = TRUE)         if (negative_loads > 0) {           issues[[paste0(\"negative_\", col)]] <- negative_loads         }       }     }   }      if (data_type == \"agricultural\") {     # Check for negative values in nutrient data     nutrient_cols <- c(\"manure_N\", \"manure_P\", \"fertilizer_N\", \"fertilizer_P\",                        \"crop_removal_N\", \"crop_removal_P\", \"cropland\")          for (col in nutrient_cols) {       if (col %in% names(data)) {         negative_values <- sum(data[[col]] < 0, na.rm = TRUE)         if (negative_values > 0) {           issues[[paste0(\"negative_\", col)]] <- negative_values         }       }     }   }      if (length(issues) == 0) {     message(\"âœ“ Data validation passed\")   } else {     message(\"âš  Data validation issues found:\")     for (issue in names(issues)) {       message(\"  \", issue, \": \", issues[[issue]])     }   }      return(issues) }  # Use the validation function # validate_custom_data(your_wwtp_data, \"wwtp\") # validate_custom_data(your_farm_data, \"agricultural\")"},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"exporting-results","dir":"Articles","previous_headings":"Advanced Custom Data Integration","what":"Exporting Results","title":"Using Your Own Data","text":"","code":"# Export results in different formats export_analysis_results <- function(results, output_dir = \"exports\") {      dir.create(output_dir, showWarnings = FALSE)      # Export agricultural data as CSV   agri_csv <- st_drop_geometry(results$agricultural)   write.csv(agri_csv, file.path(output_dir, \"agricultural_results.csv\"), row.names = FALSE)      # Export as shapefile (if sf package available)   if (requireNamespace(\"sf\", quietly = TRUE)) {     st_write(results$agricultural, file.path(output_dir, \"agricultural_results.shp\"),               delete_dsn = TRUE, quiet = TRUE)   }      # Export WWTP facilities if available   if (\"wwtp\" %in% names(results)) {     for (nutrient in names(results$wwtp)) {       facility_data <- results$wwtp[[nutrient]]$facility_data       write.csv(facility_data,                  file.path(output_dir, paste0(\"wwtp_\", nutrient, \"_facilities.csv\")),                  row.names = FALSE)     }   }      # Export integrated results if available   if (\"integrated\" %in% names(results)) {     for (nutrient in names(results$integrated)) {       integrated_csv <- st_drop_geometry(results$integrated[[nutrient]])       write.csv(integrated_csv,                  file.path(output_dir, paste0(\"integrated_\", nutrient, \"_results.csv\")),                  row.names = FALSE)     }   }      message(\"Results exported to: \", output_dir) }  # Use the export function # export_analysis_results(results_custom, \"my_exports\")"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"wwtp-data-issues","dir":"Articles","previous_headings":"Troubleshooting Common Issues","what":"WWTP Data Issues","title":"Using Your Own Data","text":"","code":"# Common WWTP data problems and solutions  # Problem 1: \"No valid facilities remaining after cleaning\" # Solution: Check coordinates and load values wwtp_data <- read.csv(\"your_wwtp_file.csv\") summary(wwtp_data)  # Look for obvious issues  # Check coordinate ranges summary(wwtp_data$Latitude)   # Should be ~24-50 for US summary(wwtp_data$Longitude)  # Should be ~-125 to -66 for US  # Check load values summary(wwtp_data$Load)  # Should be positive numbers  # Problem 2: Wrong coordinate system # Solution: Make sure coordinates are in decimal degrees (not UTM) # Example conversion if needed: # library(sf) # points_utm <- st_as_sf(data, coords = c(\"X_UTM\", \"Y_UTM\"), crs = 32617) # points_dd <- st_transform(points_utm, 4326) # coords_dd <- st_coordinates(points_dd)  # Problem 3: Mixed units in same file # Solution: Standardize units before analysis standardize_mixed_units <- function(data, load_col, unit_col) {   data$standardized_load <- ifelse(     data[[unit_col]] == \"kg\", data[[load_col]],     ifelse(data[[unit_col]] == \"lbs\", data[[load_col]] / 2.20462,            data[[load_col]] * 907.185)  # assuming tons   )   return(data) }"},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"agricultural-data-issues","dir":"Articles","previous_headings":"Troubleshooting Common Issues","what":"Agricultural Data Issues","title":"Using Your Own Data","text":"","code":"# Common agricultural data problems  # Problem: Impossible nutrient balances # Solution: Check your units and conversion factors check_nutrient_balance <- function(data) {   # Calculate simple checks   data$total_inputs_N <- data$manure_N + data$fertilizer_N + data$N_fixation   data$efficiency_N <- data$crop_removal_N / data$total_inputs_N      # Flag suspicious values   suspicious <- data$efficiency_N > 2.0 | data$efficiency_N < 0.1      if (sum(suspicious, na.rm = TRUE) > 0) {     message(\"Warning: \", sum(suspicious, na.rm = TRUE), \" units have suspicious N efficiency\")     print(data[suspicious, c(\"ID\", \"total_inputs_N\", \"crop_removal_N\", \"efficiency_N\")])   }      return(data) }  # Problem: Missing spatial boundaries # Solution: Use built-in boundaries or provide your own # county_boundaries <- load_builtin_boundaries(\"county\") # your_data_with_boundaries <- merge(your_data, county_boundaries, by.x = \"FIPS\", by.y = \"FIPS\")"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"common-questions","dir":"Articles","previous_headings":"Getting Help","what":"Common Questions","title":"Using Your Own Data","text":"Q: format WWTP data ? : CSV file columns facility name, latitude, longitude, annual load, state. package can auto-detect EPA formats. Q: units can use loads? : “kg”, “lbs”, “pounds”, “tons”. Specify wwtp_load_units. Q: Can use data countries? : spatial boundaries US-, provide boundaries modify coordinate system. Q: handle missing data? : package excludes facilities missing coordinates loads. Clean data first best results. Q: analysis running slowly. can ? : Try using smaller spatial scale (HUC2 < HUC8 < County terms processing time), fewer years, clear data cache clear_data_cache(). Q: cite package data? : Use citation_info() get proper citations package underlying datasets.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"function-help","dir":"Articles","previous_headings":"Getting Help","what":"Function Help","title":"Using Your Own Data","text":"","code":"# Get help on specific functions ?load_user_wwtp ?run_builtin_analysis   ?wwtp_clean_data  # Check what data is available check_builtin_data() list_available_years()  # Package health check health_check()  # Test data download connection test_osf_connection()"},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"getting-more-help","dir":"Articles","previous_headings":"Getting Help","what":"Getting More Help","title":"Using Your Own Data","text":"Check vignettes: vignette(\"getting-started\"), vignette(\"visualization-guide\"), vignette(\"advanced-features\") Look function documentation: ?function_name Check package website GitHub repository examples Use quick_check() validate results manureshed package designed work data easily possible. Start built-examples, gradually add data needed.nitrogen_2020.csv” )","code":""},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"standard-epa-format","dir":"Articles","previous_headings":"Getting Help > Handling Different Data Formats","what":"Standard EPA Format","title":"Using Your Own Data","text":"EPA WWTP files work automatically:","code":"# Standard EPA format (auto-detected) results <- run_builtin_analysis(   scale = \"county\",   year = 2018,   nutrients = c(\"nitrogen\", \"phosphorus\"),   include_wwtp = TRUE,   custom_wwtp_nitrogen = \"nitrogen_2018.csv\",   custom_wwtp_phosphorus = \"phosphorus_2018.csv\" )"},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"different-units","dir":"Articles","previous_headings":"Getting Help > Handling Different Data Formats","what":"Different Units","title":"Using Your Own Data","text":"","code":"# If your data uses pounds instead of kg results <- run_builtin_analysis(   scale = \"huc8\",    year = 2019,   nutrients = \"nitrogen\",   include_wwtp = TRUE,   custom_wwtp_nitrogen = \"nitrogen_pounds_2019.csv\",   wwtp_load_units = \"lbs\"  # Converts automatically )  # Other units: \"kg\", \"lbs\", \"pounds\", \"tons\""},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"different-file-format","dir":"Articles","previous_headings":"Getting Help > Handling Different Data Formats","what":"Different File Format","title":"Using Your Own Data","text":"","code":"# If headers are in different rows results <- run_builtin_analysis(   scale = \"county\",   year = 2021,    nutrients = \"nitrogen\",   include_wwtp = TRUE,   custom_wwtp_nitrogen = \"nitrogen_2021.csv\",   wwtp_skip_rows = 3,      # Skip first 3 rows   wwtp_header_row = 1      # Headers in row 1 after skipping )"},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"custom-column-names","dir":"Articles","previous_headings":"Getting Help > Handling Different Data Formats","what":"Custom Column Names","title":"Using Your Own Data","text":"","code":"# If your columns have different names custom_mapping <- list(   facility_name = \"Plant_Name\",   latitude = \"Lat_DD\",   longitude = \"Long_DD\",    pollutant_load = \"Annual_Load_kg\",   state = \"State_Code\" )  results <- run_builtin_analysis(   scale = \"huc8\",   year = 2022,   nutrients = \"nitrogen\",    include_wwtp = TRUE,   custom_wwtp_nitrogen = \"custom_format.csv\",   wwtp_column_mapping = custom_mapping )"},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"manual-wwtp-processing","dir":"Articles","previous_headings":"Getting Help","what":"Manual WWTP Processing","title":"Using Your Own Data","text":"full control, process WWTP data step step:","code":"# Step 1: Load your WWTP file wwtp_raw <- load_user_wwtp(   file_path = \"nitrogen_2020.csv\",   nutrient = \"nitrogen\",   load_units = \"lbs\" )  # Step 2: Clean the data wwtp_clean <- wwtp_clean_data(wwtp_raw, \"nitrogen\")  # Step 3: Classify facilities by size wwtp_classified <- wwtp_classify_sources(wwtp_clean, \"nitrogen\")  # Step 4: Convert to spatial format wwtp_spatial <- wwtp_to_spatial(wwtp_classified)  # Step 5: Load boundaries and aggregate by spatial units boundaries <- load_builtin_boundaries(\"huc8\") wwtp_aggregated <- wwtp_aggregate_by_boundaries(   wwtp_spatial, boundaries, \"nitrogen\", \"huc8\" )  # Step 6: Integrate with agricultural data agri_data <- load_builtin_nugis(\"huc8\", 2020) agri_processed <- agri_classify_complete(agri_data, \"huc8\")  integrated <- integrate_wwtp_agricultural(   agri_processed, wwtp_aggregated, \"nitrogen\",    cropland_threshold = 1234, scale = \"huc8\" )"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"common-conversions","dir":"Articles","previous_headings":"Unit Conversions","what":"Common Conversions","title":"Using Your Own Data","text":"","code":"# Convert between units kg_loads <- c(1000, 2000, 5000) tons_loads <- convert_load_units(kg_loads, \"kg\")  lbs_loads <- c(2000, 4000, 10000)   tons_loads <- convert_load_units(lbs_loads, \"lbs\")  print(data.frame(   Original_kg = kg_loads,   Converted_tons = convert_load_units(kg_loads, \"kg\") ))"},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"handling-p2o5-vs-p","dir":"Articles","previous_headings":"Unit Conversions","what":"Handling P2O5 vs P","title":"Using Your Own Data","text":"package automatically converts P2O5 P, can manually:","code":"# If you have P2O5 data, convert to P p2o5_values <- c(100, 200, 300)  # kg P2O5 p_values <- p2o5_values * P2O5_TO_P  # Convert to P  print(paste(\"P2O5 to P conversion factor:\", P2O5_TO_P))"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"county-data-fips-codes","dir":"Articles","previous_headings":"Working with Different Spatial Scales","what":"County Data (FIPS Codes)","title":"Using Your Own Data","text":"","code":"# County analysis - make sure you have 5-digit FIPS codes county_results <- run_builtin_analysis(   scale = \"county\",   year = 2016,   nutrients = \"nitrogen\" )  # Your county WWTP data should have state and county info"},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"huc8-watersheds","dir":"Articles","previous_headings":"Working with Different Spatial Scales","what":"HUC8 Watersheds","title":"Using Your Own Data","text":"","code":"# HUC8 analysis - 8-digit watershed codes huc8_results <- run_builtin_analysis(   scale = \"huc8\",    year = 2016,   nutrients = \"nitrogen\" )  # Make sure HUC8 codes are 8 digits (add leading zero if needed) huc8_codes <- c(\"4110001\", \"4110002\")  # 7 digits formatted_codes <- format_huc8(huc8_codes)  # Adds leading zero print(formatted_codes)  # \"04110001\", \"04110002\""},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"huc2-regions","dir":"Articles","previous_headings":"Working with Different Spatial Scales","what":"HUC2 Regions","title":"Using Your Own Data","text":"","code":"# HUC2 analysis - 2-digit regional codes huc2_results <- run_builtin_analysis(   scale = \"huc2\",   year = 2016,    nutrients = \"nitrogen\" )"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"single-state","dir":"Articles","previous_headings":"State-Specific Analysis","what":"Single State","title":"Using Your Own Data","text":"","code":"# Analyze just one state iowa_results <- run_state_analysis(   state = \"IA\",   scale = \"county\",   year = 2016,   nutrients = \"nitrogen\",   include_wwtp = TRUE )  # With custom WWTP data texas_results <- run_state_analysis(   state = \"TX\",   scale = \"huc8\",   year = 2020,   nutrients = \"nitrogen\",    include_wwtp = TRUE,   custom_wwtp_nitrogen = \"texas_wwtp_2020.csv\" )"},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"multiple-states","dir":"Articles","previous_headings":"State-Specific Analysis","what":"Multiple States","title":"Using Your Own Data","text":"","code":"# Analyze several states midwest_states <- c(\"IA\", \"IL\", \"IN\", \"OH\")  state_results <- list()  for (state in midwest_states) {   state_results[[state]] <- run_state_analysis(     state = state,     scale = \"county\",     year = 2016,     nutrients = \"nitrogen\",      include_wwtp = TRUE   ) }"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"validate-your-data","dir":"Articles","previous_headings":"Quality Control","what":"Validate Your Data","title":"Using Your Own Data","text":"","code":"# Check your results make sense quick_check(results)  # Look at the classifications table(results$agricultural$N_class)  # Check WWTP facility counts if (\"wwtp\" %in% names(results)) {   print(paste(\"WWTP facilities:\", nrow(results$wwtp$nitrogen$facility_data))) }"},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"common-data-issues","dir":"Articles","previous_headings":"Quality Control","what":"Common Data Issues","title":"Using Your Own Data","text":"","code":"# Problem: Negative nutrient values # Solution: Check your data source and units  # Problem: All facilities excluded   # Solution: Check coordinate system (should be decimal degrees)  # Problem: No WWTP facilities found # Solution: Check facility coordinates are in correct format  # Problem: Classification doesn't make sense # Solution: Check cropland threshold and nutrient balance calculations"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"time-series-analysis","dir":"Articles","previous_headings":"Working with Multiple Years","what":"Time Series Analysis","title":"Using Your Own Data","text":"","code":"# Analyze multiple years years_to_analyze <- 2014:2016  batch_results <- batch_analysis_years(   years = years_to_analyze,   scale = \"huc8\",   nutrients = \"nitrogen\",    include_wwtp = TRUE )  # With custom WWTP data for some years custom_wwtp_files <- list(   \"2018\" = \"nitrogen_2018.csv\",   \"2019\" = \"nitrogen_2019.csv\",    \"2020\" = \"nitrogen_2020.csv\" )  # Process each year with custom data custom_results <- list() for (year in names(custom_wwtp_files)) {   custom_results[[year]] <- run_builtin_analysis(     scale = \"county\",     year = as.numeric(year),     nutrients = \"nitrogen\",     include_wwtp = TRUE,     custom_wwtp_nitrogen = custom_wwtp_files[[year]]   ) }"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"file-organization","dir":"Articles","previous_headings":"Data Management Tips","what":"File Organization","title":"Using Your Own Data","text":"","code":"# Organize your data files # project_folder/ #   â”œâ”€â”€ wwtp_data/ #   â”‚   â”œâ”€â”€ nitrogen_2018.csv #   â”‚   â”œâ”€â”€ nitrogen_2019.csv #   â”‚   â””â”€â”€ phosphorus_2018.csv #   â”œâ”€â”€ results/ #   â””â”€â”€ maps/  # Set working directory setwd(\"project_folder\")  # Run analysis with organized files results <- run_builtin_analysis(   scale = \"huc8\",   year = 2018,   nutrients = \"nitrogen\",   include_wwtp = TRUE,   custom_wwtp_nitrogen = \"wwtp_data/nitrogen_2018.csv\",   output_dir = \"results\" )"},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"memory-management","dir":"Articles","previous_headings":"Data Management Tips","what":"Memory Management","title":"Using Your Own Data","text":"","code":"# For large datasets, clear cache periodically clear_data_cache()  # Check package health health_check()  # Free up memory between analyses rm(large_results) gc()"},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"example-complete-custom-workflow","dir":"Articles","previous_headings":"","what":"Example: Complete Custom Workflow","title":"Using Your Own Data","text":"’s complete example using custom data:","code":"# 1. Prepare your WWTP file (nitrogen_2021.csv) # Make sure it has columns: Facility Name, Latitude, Longitude, Load (kg/yr), State  # 2. Run analysis results_custom <- run_builtin_analysis(   scale = \"huc8\",   year = 2021,  # Agricultural data extrapolated to 2021   nutrients = \"nitrogen\",   include_wwtp = TRUE,   custom_wwtp_nitrogen = \"nitrogen_2021.csv\",   wwtp_load_units = \"kg\" )  # 3. Check results summarize_results(results_custom) quick_check(results_custom)  # 4. Create maps nitrogen_map <- map_agricultural_classification(   results_custom$integrated$nitrogen,   \"nitrogen\", \"combined_N_class\",   \"2021 Nitrogen with Custom WWTP Data\" )  save_plot(nitrogen_map, \"custom_analysis_2021.png\")  # 5. Save results save_spatial_data(   results_custom$integrated$nitrogen,   \"nitrogen_2021_results.rds\" )"},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"integration-issues","dir":"Articles","previous_headings":"Example: Complete Custom Workflow","what":"Integration Issues","title":"Using Your Own Data","text":"","code":"# Common integration problems  # Problem: WWTP facilities not matching spatial units # Solution: Check coordinate systems and boundary files check_wwtp_spatial_match <- function(wwtp_data, boundaries) {      # Convert WWTP to spatial   wwtp_sf <- st_as_sf(wwtp_data, coords = c(\"Long\", \"Lat\"), crs = 4326)   wwtp_projected <- st_transform(wwtp_sf, st_crs(boundaries))      # Check spatial intersection   intersections <- st_intersects(wwtp_projected, boundaries)      # Count facilities per spatial unit   matches <- lengths(intersections)      message(\"WWTP spatial matching summary:\")   message(\"  Total facilities: \", nrow(wwtp_data))   message(\"  Facilities matched to boundaries: \", sum(matches > 0))   message(\"  Facilities not matched: \", sum(matches == 0))      if (sum(matches == 0) > 0) {     unmatched <- wwtp_data[matches == 0, ]     message(\"  Check coordinates for unmatched facilities\")     print(head(unmatched))   }      return(matches) }  # Problem: Scale mismatch between data sources # Solution: Ensure consistent spatial scales verify_scale_consistency <- function(agricultural_data, wwtp_data, scale) {      message(\"Scale consistency check for: \", scale)      # Check ID formats   if (scale == \"county\") {     # FIPS codes should be 5 digits     invalid_fips <- sum(nchar(agricultural_data$ID) != 5)     message(\"  Invalid FIPS codes: \", invalid_fips)   } else if (scale == \"huc8\") {     # HUC8 codes should be 8 digits     invalid_huc8 <- sum(nchar(agricultural_data$ID) != 8)     message(\"  Invalid HUC8 codes: \", invalid_huc8)   }      # Check coordinate ranges   coord_summary <- list(     lat_range = range(wwtp_data$Lat, na.rm = TRUE),     long_range = range(wwtp_data$Long, na.rm = TRUE)   )      message(\"  WWTP coordinate ranges:\")   message(\"    Latitude: \", paste(round(coord_summary$lat_range, 2), collapse = \" to \"))   message(\"    Longitude: \", paste(round(coord_summary$long_range, 2), collapse = \" to \"))      return(coord_summary) }"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"file-organization-1","dir":"Articles","previous_headings":"Best Practices for Custom Data","what":"File Organization","title":"Using Your Own Data","text":"","code":"# Recommended project structure create_project_structure <- function(project_name) {      # Create main directories   dir.create(project_name, showWarnings = FALSE)   dir.create(file.path(project_name, \"data\"), showWarnings = FALSE)   dir.create(file.path(project_name, \"data\", \"wwtp\"), showWarnings = FALSE)   dir.create(file.path(project_name, \"data\", \"agricultural\"), showWarnings = FALSE)   dir.create(file.path(project_name, \"results\"), showWarnings = FALSE)   dir.create(file.path(project_name, \"maps\"), showWarnings = FALSE)   dir.create(file.path(project_name, \"exports\"), showWarnings = FALSE)      # Create README   readme_content <- paste(     \"# Manureshed Analysis Project\",     \"\",     \"## Data Files\",     \"- data/wwtp/ - WWTP facility data files\",     \"- data/agricultural/ - Custom agricultural data\",     \"\",     \"## Outputs\",      \"- results/ - Analysis results (.rds files)\",     \"- maps/ - Generated maps (.png files)\",     \"- exports/ - Exported data (.csv, .shp files)\",     \"\",     \"## Analysis Scripts\",     \"- analysis.R - Main analysis script\",     \"\",     sep = \"\\n\"   )      writeLines(readme_content, file.path(project_name, \"README.md\"))      message(\"Project structure created: \", project_name)   message(\"Add your data files to the appropriate folders\") }  # Create organized project # create_project_structure(\"my_nutrient_analysis\")"},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"data-documentation","dir":"Articles","previous_headings":"Best Practices for Custom Data","what":"Data Documentation","title":"Using Your Own Data","text":"","code":"# Document your custom data sources document_data_sources <- function(wwtp_files = NULL, agricultural_files = NULL,                                   output_file = \"data_documentation.txt\") {      doc_content <- c(     \"DATA SOURCES DOCUMENTATION\",     \"============================\",     \"\",     \"Analysis Date: \", as.character(Sys.Date()),     \"Package Version: \", as.character(packageVersion(\"manureshed\")),     \"\"   )      if (!is.null(wwtp_files)) {     doc_content <- c(doc_content,       \"WWTP DATA FILES:\",       \"----------------\"     )          for (file in wwtp_files) {       if (file.exists(file)) {         file_info <- file.info(file)         doc_content <- c(doc_content,           paste(\"File:\", file),           paste(\"  Size:\", round(file_info$size / 1024, 2), \"KB\"),           paste(\"  Modified:\", file_info$mtime),           paste(\"  Rows:\", nrow(read.csv(file))),           \"\"         )       }     }   }      if (!is.null(agricultural_files)) {     doc_content <- c(doc_content,       \"AGRICULTURAL DATA FILES:\",       \"------------------------\"     )          for (file in agricultural_files) {       if (file.exists(file)) {         file_info <- file.info(file)         doc_content <- c(doc_content,           paste(\"File:\", file),           paste(\"  Size:\", round(file_info$size / 1024, 2), \"KB\"),           paste(\"  Modified:\", file_info$mtime),           paste(\"  Rows:\", nrow(read.csv(file))),           \"\"         )       }     }   }      doc_content <- c(doc_content,     \"ANALYSIS PARAMETERS:\",     \"--------------------\",     \"Built-in data years: 1987-2016 (Agricultural), 2007-2016 (WWTP)\",     \"Spatial scales: county, huc8, huc2\",     \"Default cropland threshold: 500 ha (1,234 acres)\",     \"\"   )      writeLines(doc_content, output_file)   message(\"Data documentation saved to: \", output_file) }  # Use documentation function # document_data_sources( #   wwtp_files = c(\"data/wwtp/nitrogen_2020.csv\", \"data/wwtp/phosphorus_2020.csv\"), #   agricultural_files = c(\"data/agricultural/custom_farm_data.csv\") # )"},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"quality-assurance-workflow","dir":"Articles","previous_headings":"Best Practices for Custom Data","what":"Quality Assurance Workflow","title":"Using Your Own Data","text":"","code":"# Complete quality assurance workflow quality_assurance_workflow <- function(results, data_sources = NULL) {      qa_report <- list()   qa_report$timestamp <- Sys.time()   qa_report$data_sources <- data_sources      # 1. Basic data checks   qa_report$basic_checks <- list(     total_spatial_units = nrow(results$agricultural),     missing_classifications = sum(is.na(results$agricultural$N_class))   )      # 2. Classification distribution   if (\"N_class\" %in% names(results$agricultural)) {     n_dist <- table(results$agricultural$N_class)     qa_report$classification_distribution <- list(       nitrogen = n_dist,       excluded_percentage = round(n_dist[\"Excluded\"] / sum(n_dist) * 100, 1)     )   }      # 3. WWTP integration checks   if (\"wwtp\" %in% names(results)) {     qa_report$wwtp_checks <- list()          for (nutrient in names(results$wwtp)) {       facilities <- results$wwtp[[nutrient]]$facility_data       qa_report$wwtp_checks[[nutrient]] <- list(         total_facilities = nrow(facilities),         facilities_with_loads = sum(!is.na(facilities[[paste0(toupper(substr(nutrient, 1, 1)), \"_Load_tons\")]]))       )     }   }      # 4. Spatial validation   if (inherits(results$agricultural, \"sf\")) {     qa_report$spatial_checks <- list(       invalid_geometries = sum(!st_is_valid(results$agricultural)),       crs = st_crs(results$agricultural)$input     )   }      # 5. Range checks   if (\"integrated\" %in% names(results)) {     for (nutrient in names(results$integrated)) {       data <- results$integrated[[nutrient]]       surplus_col <- paste0(substr(nutrient, 1, 1), \"_surplus\")              if (surplus_col %in% names(data)) {         qa_report$range_checks[[nutrient]] <- list(           min_surplus = min(data[[surplus_col]], na.rm = TRUE),           max_surplus = max(data[[surplus_col]], na.rm = TRUE),           extreme_values = sum(abs(data[[surplus_col]]) > 1000, na.rm = TRUE)         )       }     }   }      # Generate QA summary   qa_summary <- list(     passed = TRUE,     warnings = character(),     errors = character()   )      # Check for issues   if (qa_report$basic_checks$missing_classifications > 0) {     qa_summary$warnings <- c(qa_summary$warnings,                               paste(\"Missing classifications:\", qa_report$basic_checks$missing_classifications))   }      if (qa_report$classification_distribution$excluded_percentage > 50) {     qa_summary$warnings <- c(qa_summary$warnings,                              paste(\"High exclusion rate:\", qa_report$classification_distribution$excluded_percentage, \"%\"))   }      if (\"spatial_checks\" %in% names(qa_report) && qa_report$spatial_checks$invalid_geometries > 0) {     qa_summary$errors <- c(qa_summary$errors,                            paste(\"Invalid geometries:\", qa_report$spatial_checks$invalid_geometries))     qa_summary$passed <- FALSE   }      # Print summary   message(\"Quality Assurance Summary:\")   message(\"  Status: \", ifelse(qa_summary$passed, \"PASSED\", \"FAILED\"))      if (length(qa_summary$warnings) > 0) {     message(\"  Warnings:\")     for (warning in qa_summary$warnings) {       message(\"    - \", warning)     }   }      if (length(qa_summary$errors) > 0) {     message(\"  Errors:\")     for (error in qa_summary$errors) {       message(\"    - \", error)     }   }      qa_report$summary <- qa_summary   return(qa_report) }  # Run QA workflow # qa_results <- quality_assurance_workflow(results_custom, \"Custom 2021 WWTP data\")"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"common-questions-1","dir":"Articles","previous_headings":"Getting Help","what":"Common Questions","title":"Using Your Own Data","text":"Q: format WWTP data ? : CSV file columns facility name, latitude, longitude, annual load, state. package can auto-detect EPA formats. Q: units can use loads? : “kg”, “lbs”, “pounds”, “tons”. Specify wwtp_load_units. Q: Can use data countries? : spatial boundaries US-, provide boundaries modify coordinate system. Q: handle missing data? : package excludes facilities missing coordinates loads. Clean data first best results. Q: analysis running slowly. can ? : Try using smaller spatial scale (HUC2 < HUC8 < County terms processing time), fewer years, clear data cache clear_data_cache(). Q: cite package data? : Use citation_info() get proper citations package underlying datasets. Q: Can analyze partial years seasonal data? : package designed annual data. seasonal analysis, need aggregate data annual totals first. Q: WWTP data different pollutant measurements? : package expects total nitrogen total phosphorus loads. forms (NO3, NH4, PO4), ’ll need convert total N P first.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"function-help-1","dir":"Articles","previous_headings":"Getting Help","what":"Function Help","title":"Using Your Own Data","text":"","code":"# Get help on specific functions ?load_user_wwtp ?run_builtin_analysis   ?wwtp_clean_data ?validate_columns  # Check what data is available check_builtin_data() list_available_years()  # Package health check health_check()  # Test data download connection test_osf_connection()"},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"getting-more-help-1","dir":"Articles","previous_headings":"Getting Help","what":"Getting More Help","title":"Using Your Own Data","text":"Check vignettes: vignette(\"getting-started\"), vignette(\"visualization-guide\"), vignette(\"advanced-features\") Look function documentation: ?function_name Check package website GitHub repository examples Use quick_check() validate results Run health_check() encounter installation data loading issues","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/data-integration.html","id":"reporting-issues","dir":"Articles","previous_headings":"Getting Help","what":"Reporting Issues","title":"Using Your Own Data","text":"encounter bugs feature requests: Check data format matches expected format Run health_check() verify package installation Try built-data first isolate issue Document error message steps reproduce Check package documentation vignettes Report issues minimal reproducible example manureshed package designed work data easily possible. Start built-examples, gradually add data needed. key ensure data properly formatted validated running analysis.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/getting-started.html","id":"what-is-manureshed","dir":"Articles","previous_headings":"","what":"What is manureshed?","title":"Getting Started with manureshed","text":"manureshed package analyzes agricultural nutrient balances different spatial scales (county, HUC8 watershed, HUC2 region) can integrate wastewater treatment plant (WWTP) effluent data show municipal nutrient loads affect agricultural areas.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/getting-started.html","id":"view-cheatsheet","dir":"Articles","previous_headings":"","what":"View cheatsheet","title":"Getting Started with manureshed","text":"","code":"view_cheatsheet()"},{"path":"https://exelegch.github.io/manureshed-docs/articles/getting-started.html","id":"quick-start---complete-analysis","dir":"Articles","previous_headings":"","what":"Quick Start - Complete Analysis","title":"Getting Started with manureshed","text":"easiest way get started quick_analysis(): creates: - Classification maps - WWTP facility maps - Network plots - Comparison charts - saved output directory","code":"# Complete analysis with maps and plots results <- quick_analysis(   scale = \"huc8\",           # Choose: \"county\", \"huc8\", or \"huc2\"   year = 2016,              # Any year 1987-2016   nutrients = \"nitrogen\",   # Choose: \"nitrogen\", \"phosphorus\", or both   include_wwtp = TRUE       # Include wastewater plants (2007-2016 only) )"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/getting-started.html","id":"check-available-data","dir":"Articles","previous_headings":"Step-by-Step Analysis","what":"1. Check Available Data","title":"Getting Started with manureshed","text":"","code":"# See what data is available check_builtin_data()  # Download all data (optional, ~40MB) download_all_data()"},{"path":"https://exelegch.github.io/manureshed-docs/articles/getting-started.html","id":"basic-agricultural-analysis","dir":"Articles","previous_headings":"Step-by-Step Analysis","what":"2. Basic Agricultural Analysis","title":"Getting Started with manureshed","text":"","code":"# Analyze just agricultural data results <- run_builtin_analysis(   scale = \"county\",   year = 2010,   nutrients = \"nitrogen\",   include_wwtp = FALSE    # No WWTP data )  # Quick summary summarize_results(results)"},{"path":"https://exelegch.github.io/manureshed-docs/articles/getting-started.html","id":"add-wwtp-data","dir":"Articles","previous_headings":"Step-by-Step Analysis","what":"3. Add WWTP Data","title":"Getting Started with manureshed","text":"","code":"# Analysis with wastewater plants (2007-2016 available) results_wwtp <- run_builtin_analysis(   scale = \"huc8\",   year = 2016,   nutrients = c(\"nitrogen\", \"phosphorus\"),   include_wwtp = TRUE )  # See the difference WWTP makes comparison <- compare_analyses(results, results_wwtp, \"nitrogen\") print(comparison)"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/getting-started.html","id":"classifications","dir":"Articles","previous_headings":"Understanding the Results","what":"Classifications","title":"Getting Started with manureshed","text":"spatial unit gets classified : Source: excess nutrients export Sink Deficit: Needs nutrient imports Sink Fertilizer: fertilizer surplus, accept manure Within Watershed/County: Balanced Excluded: little cropland analyze","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/getting-started.html","id":"accessing-results","dir":"Articles","previous_headings":"Understanding the Results","what":"Accessing Results","title":"Getting Started with manureshed","text":"","code":"# Agricultural data with classifications agri_data <- results$agricultural  # WWTP facility data wwtp_facilities <- results$wwtp$nitrogen$facility_data  # Combined results (agricultural + WWTP) combined_data <- results$integrated$nitrogen  # Analysis settings parameters <- results$parameters"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/getting-started.html","id":"classification-maps","dir":"Articles","previous_headings":"Creating Maps","what":"Classification Maps","title":"Getting Started with manureshed","text":"","code":"# Basic nitrogen map n_map <- map_agricultural_classification(   data = results$agricultural,   nutrient = \"nitrogen\",    classification_col = \"N_class\",   title = \"Nitrogen Classifications\" )  # Save the map save_plot(n_map, \"nitrogen_map.png\", width = 10, height = 8)"},{"path":"https://exelegch.github.io/manureshed-docs/articles/getting-started.html","id":"wwtp-maps","dir":"Articles","previous_headings":"Creating Maps","what":"WWTP Maps","title":"Getting Started with manureshed","text":"","code":"# Map WWTP facilities facility_map <- map_wwtp_points(   results$wwtp$nitrogen$spatial_data,   nutrient = \"nitrogen\",   title = \"Nitrogen WWTP Facilities\" )  # Map WWTP influence on agricultural areas influence_map <- map_wwtp_influence(   results$integrated$nitrogen,   nutrient = \"nitrogen\",    title = \"WWTP Influence on Nitrogen\" )"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/getting-started.html","id":"single-years","dir":"Articles","previous_headings":"Working with Different Years","what":"Single Years","title":"Getting Started with manureshed","text":"","code":"# Any year 1987-2016 for agricultural data results_1990 <- run_builtin_analysis(scale = \"county\", year = 1990,                                       nutrients = \"nitrogen\", include_wwtp = FALSE)  results_2005 <- run_builtin_analysis(scale = \"huc8\", year = 2005,                                       nutrients = \"phosphorus\", include_wwtp = FALSE)  # WWTP data available 2007-2016 results_2012 <- run_builtin_analysis(scale = \"huc8\", year = 2012,                                       nutrients = \"nitrogen\", include_wwtp = TRUE)"},{"path":"https://exelegch.github.io/manureshed-docs/articles/getting-started.html","id":"multiple-years","dir":"Articles","previous_headings":"Working with Different Years","what":"Multiple Years","title":"Getting Started with manureshed","text":"","code":"# Analyze several years at once batch_results <- batch_analysis_years(   years = 2014:2016,   scale = \"county\",    nutrients = \"nitrogen\",   include_wwtp = TRUE )"},{"path":"https://exelegch.github.io/manureshed-docs/articles/getting-started.html","id":"using-custom-wwtp-data","dir":"Articles","previous_headings":"","what":"Using Custom WWTP Data","title":"Getting Started with manureshed","text":"years outside 2007-2016, provide WWTP data:","code":"# Use your own WWTP files results_2020 <- run_builtin_analysis(   scale = \"huc8\",   year = 2020,  # Agricultural data available   nutrients = \"nitrogen\",   include_wwtp = TRUE,   custom_wwtp_nitrogen = \"my_wwtp_data_2020.csv\",   wwtp_load_units = \"lbs\"  # Handle different units )"},{"path":"https://exelegch.github.io/manureshed-docs/articles/getting-started.html","id":"state-specific-analysis","dir":"Articles","previous_headings":"","what":"State-Specific Analysis","title":"Getting Started with manureshed","text":"","code":"# Analyze a specific state texas_results <- run_state_analysis(   state = \"TX\",   scale = \"county\",   year = 2016,   nutrients = \"nitrogen\",   include_wwtp = TRUE )  # Quick state analysis with maps ohio_quick <- quick_state_analysis(   state = \"OH\",   scale = \"huc8\",    year = 2015,   nutrients = \"phosphorus\" )"},{"path":"https://exelegch.github.io/manureshed-docs/articles/getting-started.html","id":"loading-individual-datasets","dir":"Articles","previous_headings":"","what":"Loading Individual Datasets","title":"Getting Started with manureshed","text":"","code":"# Load specific datasets county_2016 <- load_builtin_nugis(\"county\", 2016) huc8_boundaries <- load_builtin_boundaries(\"huc8\") wwtp_nitrogen <- load_builtin_wwtp(\"nitrogen\", 2012)  # Check what years are available list_available_years()"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/getting-started.html","id":"memory-management","dir":"Articles","previous_headings":"Tips for Success","what":"Memory Management","title":"Getting Started with manureshed","text":"","code":"# For large analyses, clear cache if needed clear_data_cache()  # Check package health health_check()"},{"path":"https://exelegch.github.io/manureshed-docs/articles/getting-started.html","id":"quality-checks","dir":"Articles","previous_headings":"Tips for Success","what":"Quality Checks","title":"Getting Started with manureshed","text":"","code":"# Always validate your results quick_check(results)  # Get package citation citation_info()"},{"path":"https://exelegch.github.io/manureshed-docs/articles/getting-started.html","id":"next-steps","dir":"Articles","previous_headings":"","what":"Next Steps","title":"Getting Started with manureshed","text":"Advanced Features: See vignette(\"advanced-features\") state analysis, custom thresholds, parallel processing Visualization Guide: See vignette(\"visualization-guide\") detailed mapping options Data Integration: See vignette(\"data-integration\") using custom datasets","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/getting-started.html","id":"getting-help","dir":"Articles","previous_headings":"","what":"Getting Help","title":"Getting Started with manureshed","text":"’s ! now know basics using manureshed nutrient flow analysis.","code":"# Function documentation ?run_builtin_analysis ?quick_analysis ?map_agricultural_classification  # Package overview ?manureshed  # Check if everything is working health_check()"},{"path":"https://exelegch.github.io/manureshed-docs/articles/scenario-comparison.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Scenario Comparison Analysis","text":"compare_scenarios() function allows compare multiple analysis scenarios side--side. useful : Comparing agricultural-vs. WWTP-integrated analyses Testing different cropland thresholds Evaluating management scenarios Year--year comparisons Scale comparisons","code":""},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/scenario-comparison.html","id":"simple-comparison-agricultural-vs--wwtp","dir":"Articles","previous_headings":"Basic Usage","what":"Simple Comparison: Agricultural vs. WWTP","title":"Scenario Comparison Analysis","text":"common use case comparing agricultural nutrient balances without wastewater treatment plant data.","code":"library(manureshed)  # Run analysis without WWTP base_scenario <- run_builtin_analysis(   scale = \"huc8\",   year = 2016,   nutrients = \"nitrogen\",   include_wwtp = FALSE )  # Run analysis with WWTP wwtp_scenario <- run_builtin_analysis(   scale = \"huc8\",   year = 2016,   nutrients = \"nitrogen\",   include_wwtp = TRUE )  # Compare the two scenarios comparison <- compare_scenarios(list(   \"Agricultural Only\" = base_scenario,   \"Agricultural + WWTP\" = wwtp_scenario ))"},{"path":"https://exelegch.github.io/manureshed-docs/articles/scenario-comparison.html","id":"understanding-the-results","dir":"Articles","previous_headings":"","what":"Understanding the Results","title":"Scenario Comparison Analysis","text":"comparison returns three main components:","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/scenario-comparison.html","id":"comparison-data","dir":"Articles","previous_headings":"Understanding the Results","what":"1. Comparison Data","title":"Scenario Comparison Analysis","text":"data frame metrics scenario: Key metrics include: - n_sources: Number nutrient source areas - n_sinks: Number nutrient sink areas - n_balanced / n_within_watershed: Balanced areas - n_excluded: Excluded areas (cropland threshold) - total_surplus_kg: Total nutrient surplus - total_deficit_kg: Total nutrient deficit","code":"# View the comparison data print(comparison$comparison_data)"},{"path":"https://exelegch.github.io/manureshed-docs/articles/scenario-comparison.html","id":"summary-statistics","dir":"Articles","previous_headings":"Understanding the Results","what":"2. Summary Statistics","title":"Scenario Comparison Analysis","text":"Statistical comparison showing differences scenarios: summary shows: - Base scenario name - Delta (change) key metrics - Percent change base scenario","code":"# View summary print(comparison$summary)  # See specific differences print(comparison$summary$differences)"},{"path":"https://exelegch.github.io/manureshed-docs/articles/scenario-comparison.html","id":"visualization-plots","dir":"Articles","previous_headings":"Understanding the Results","what":"3. Visualization Plots","title":"Scenario Comparison Analysis","text":"Three plots automatically generated:","code":"# Bar chart comparing classification counts comparison$plots$bar_chart  # Surplus/deficit comparison comparison$plots$surplus_deficit  # Percent change from base scenario comparison$plots$percent_change"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/scenario-comparison.html","id":"multiple-scenarios","dir":"Articles","previous_headings":"Advanced Examples","what":"Multiple Scenarios","title":"Scenario Comparison Analysis","text":"Compare two scenarios:","code":"# Create three different scenarios conservative <- run_builtin_analysis(   scale = \"huc8\",   year = 2016,   nutrients = \"nitrogen\",   include_wwtp = FALSE,   cropland_threshold = 2000  # More restrictive )  moderate <- run_builtin_analysis(   scale = \"huc8\",   year = 2016,   nutrients = \"nitrogen\",   include_wwtp = TRUE,   cropland_threshold = 1234  # Default )  liberal <- run_builtin_analysis(   scale = \"huc8\",   year = 2016,   nutrients = \"nitrogen\",   include_wwtp = TRUE,   cropland_threshold = 500   # Less restrictive )  # Compare all three multi_comparison <- compare_scenarios(list(   \"Conservative (No WWTP, High Threshold)\" = conservative,   \"Moderate (WWTP, Default Threshold)\" = moderate,   \"Liberal (WWTP, Low Threshold)\" = liberal ))  # View results print(multi_comparison$comparison_data) multi_comparison$plots$bar_chart"},{"path":"https://exelegch.github.io/manureshed-docs/articles/scenario-comparison.html","id":"year-over-year-comparison","dir":"Articles","previous_headings":"Advanced Examples","what":"Year-over-Year Comparison","title":"Scenario Comparison Analysis","text":"Compare parameters across different years:","code":"# Analyze multiple years year_2010 <- run_builtin_analysis(   scale = \"county\",   year = 2010,   nutrients = \"nitrogen\",   include_wwtp = TRUE )  year_2013 <- run_builtin_analysis(   scale = \"county\",   year = 2013,   nutrients = \"nitrogen\",   include_wwtp = TRUE )  year_2016 <- run_builtin_analysis(   scale = \"county\",   year = 2016,   nutrients = \"nitrogen\",   include_wwtp = TRUE )  # Compare temporal trends temporal <- compare_scenarios(list(   \"2010\" = year_2010,   \"2013\" = year_2013,   \"2016\" = year_2016 ))  # See how classifications changed over time temporal$plots$bar_chart temporal$plots$percent_change"},{"path":"https://exelegch.github.io/manureshed-docs/articles/scenario-comparison.html","id":"scale-comparison","dir":"Articles","previous_headings":"Advanced Examples","what":"Scale Comparison","title":"Scenario Comparison Analysis","text":"Compare year different spatial scales:","code":"county_scale <- run_builtin_analysis(   scale = \"county\",   year = 2016,   nutrients = \"nitrogen\",   include_wwtp = TRUE )  huc8_scale <- run_builtin_analysis(   scale = \"huc8\",   year = 2016,   nutrients = \"nitrogen\",   include_wwtp = TRUE )  huc2_scale <- run_builtin_analysis(   scale = \"huc2\",   year = 2016,   nutrients = \"nitrogen\",   include_wwtp = TRUE )  # Compare scales scale_comp <- compare_scenarios(list(   \"County (n=~3000)\" = county_scale,   \"HUC8 (n=~2000)\" = huc8_scale,   \"HUC2 (n=18)\" = huc2_scale ))  print(scale_comp$comparison_data)"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/scenario-comparison.html","id":"save-plots","dir":"Articles","previous_headings":"Saving Results","what":"Save Plots","title":"Scenario Comparison Analysis","text":"Save comparison plots files:","code":"# Create output directory output_dir <- \"scenario_comparison_results\" dir.create(output_dir, showWarnings = FALSE)  # Save all plots save_plot(   comparison$plots$bar_chart,   file.path(output_dir, \"classification_comparison.png\"),   width = 12, height = 8 )  save_plot(   comparison$plots$surplus_deficit,   file.path(output_dir, \"surplus_deficit_comparison.png\"),   width = 12, height = 8 )  save_plot(   comparison$plots$percent_change,   file.path(output_dir, \"percent_change.png\"),   width = 12, height = 8 )"},{"path":"https://exelegch.github.io/manureshed-docs/articles/scenario-comparison.html","id":"save-data","dir":"Articles","previous_headings":"Saving Results","what":"Save Data","title":"Scenario Comparison Analysis","text":"Export comparison data CSV:","code":"# Save comparison data write.csv(   comparison$comparison_data,   file.path(output_dir, \"scenario_comparison_data.csv\"),   row.names = FALSE )  # Save summary statistics write.csv(   comparison$summary$differences,   file.path(output_dir, \"scenario_differences.csv\"),   row.names = FALSE )"},{"path":"https://exelegch.github.io/manureshed-docs/articles/scenario-comparison.html","id":"auto-save-during-comparison","dir":"Articles","previous_headings":"Saving Results","what":"Auto-save During Comparison","title":"Scenario Comparison Analysis","text":"plots automatically saved:","code":"# Comparison with automatic plot saving comparison <- compare_scenarios(   scenario_list = list(     \"Base\" = base_scenario,     \"WWTP\" = wwtp_scenario   ),   create_plots = TRUE,   output_dir = \"my_comparison_results\"  # Plots saved here )"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/scenario-comparison.html","id":"understanding-deltas","dir":"Articles","previous_headings":"Interpreting Results","what":"Understanding Deltas","title":"Scenario Comparison Analysis","text":"Positive vs. negative changes:","code":"# Extract differences diffs <- comparison$summary$differences  # Interpret changes if (diffs$delta_sources > 0) {   cat(\"Adding WWTP increased sources by\", diffs$delta_sources, \"units\\n\") } else if (diffs$delta_sources < 0) {   cat(\"Adding WWTP decreased sources by\", abs(diffs$delta_sources), \"units\\n\") }  # Percent change cat(\"This represents a\", round(diffs$pct_change_sources, 1), \"% change\\n\")"},{"path":"https://exelegch.github.io/manureshed-docs/articles/scenario-comparison.html","id":"key-metrics-to-watch","dir":"Articles","previous_headings":"Interpreting Results","what":"Key Metrics to Watch","title":"Scenario Comparison Analysis","text":"Classification Changes: - delta_sources: Change nutrient source areas - delta_sinks: Change nutrient sink areas Magnitude Changes: - delta_surplus: Change total surplus (kg) - delta_deficit: Change total deficit (kg) Negative values mean second scenario fewer/less base scenario.","code":""},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/scenario-comparison.html","id":"management-analysis","dir":"Articles","previous_headings":"Use Cases","what":"Management Analysis","title":"Scenario Comparison Analysis","text":"Evaluate impact adding WWTP nutrient recovery:","code":"# Current state (no WWTP recovery) current <- run_builtin_analysis(   scale = \"huc8\",   year = 2016,   nutrients = \"nitrogen\",   include_wwtp = FALSE )  # With WWTP recovery management with_policy <- run_builtin_analysis(   scale = \"huc8\",   year = 2016,   nutrients = \"nitrogen\",   include_wwtp = TRUE )  # Compare policy_impact <- compare_scenarios(list(   \"Current (No WWTP)\" = current,   \"With WWTP Recovery\" = with_policy ))  # Key question: How many sink areas could benefit? sinks_helped <- policy_impact$summary$differences$delta_sinks cat(\"WWTP recovery could help\", abs(sinks_helped), \"deficit areas\\n\")"},{"path":"https://exelegch.github.io/manureshed-docs/articles/scenario-comparison.html","id":"sensitivity-analysis","dir":"Articles","previous_headings":"Use Cases","what":"Sensitivity Analysis","title":"Scenario Comparison Analysis","text":"Test sensitivity cropland threshold:","code":"thresholds <- c(500, 1000, 1234, 1500, 2000) results <- list()  for (thresh in thresholds) {   results[[paste0(\"Threshold_\", thresh)]] <- run_builtin_analysis(     scale = \"huc8\",     year = 2016,     nutrients = \"nitrogen\",     include_wwtp = TRUE,     cropland_threshold = thresh   ) }  # Compare all thresholds sensitivity <- compare_scenarios(results)  # See how excluded areas change excluded_counts <- sensitivity$comparison_data$n_excluded names(excluded_counts) <- names(results) print(excluded_counts)"},{"path":"https://exelegch.github.io/manureshed-docs/articles/scenario-comparison.html","id":"regional-comparison","dir":"Articles","previous_headings":"Use Cases","what":"Regional Comparison","title":"Scenario Comparison Analysis","text":"Compare different states regions:","code":"# Iowa iowa <- run_state_analysis(   state = \"IA\",   scale = \"county\",   year = 2016,   nutrients = \"nitrogen\",   include_wwtp = TRUE )  # Nebraska nebraska <- run_state_analysis(   state = \"NE\",   scale = \"county\",   year = 2016,   nutrients = \"nitrogen\",   include_wwtp = TRUE )  # Compare states state_comp <- compare_scenarios(list(   \"Iowa\" = iowa,   \"Nebraska\" = nebraska ))  state_comp$plots$bar_chart"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/scenario-comparison.html","id":"keep-comparisons-meaningful","dir":"Articles","previous_headings":"Tips and Best Practices","what":"1. Keep Comparisons Meaningful","title":"Scenario Comparison Analysis","text":"Compare scenarios differ one key aspect clearest interpretation:","code":"# GOOD: Only WWTP inclusion changes compare_scenarios(list(   \"No WWTP\" = run_builtin_analysis(year=2016, include_wwtp=FALSE),   \"With WWTP\" = run_builtin_analysis(year=2016, include_wwtp=TRUE) ))  # LESS CLEAR: Multiple things change at once compare_scenarios(list(   \"Base\" = run_builtin_analysis(year=2016, scale=\"county\", include_wwtp=FALSE),   \"Alternative\" = run_builtin_analysis(year=2015, scale=\"huc8\", include_wwtp=TRUE) ))"},{"path":"https://exelegch.github.io/manureshed-docs/articles/scenario-comparison.html","id":"name-scenarios-clearly","dir":"Articles","previous_headings":"Tips and Best Practices","what":"2. Name Scenarios Clearly","title":"Scenario Comparison Analysis","text":"Use descriptive names explain differs:","code":"# GOOD names compare_scenarios(list(   \"2016 Agricultural Only\" = scenario1,   \"2016 Agricultural + WWTP\" = scenario2 ))  # Less clear names compare_scenarios(list(   \"Scenario 1\" = scenario1,   \"Scenario 2\" = scenario2 ))"},{"path":"https://exelegch.github.io/manureshed-docs/articles/scenario-comparison.html","id":"document-your-analysis","dir":"Articles","previous_headings":"Tips and Best Practices","what":"3. Document Your Analysis","title":"Scenario Comparison Analysis","text":"Save parameters results:","code":"# Create a metadata file metadata <- data.frame(   scenario = c(\"Base\", \"WWTP\"),   year = c(2016, 2016),   scale = c(\"huc8\", \"huc8\"),   include_wwtp = c(FALSE, TRUE),   cropland_threshold = c(1234, 1234) )  write.csv(metadata, \"scenario_metadata.csv\", row.names = FALSE)"},{"path":"https://exelegch.github.io/manureshed-docs/articles/scenario-comparison.html","id":"consider-statistical-significance","dir":"Articles","previous_headings":"Tips and Best Practices","what":"4. Consider Statistical Significance","title":"Scenario Comparison Analysis","text":"year--year comparisons, consider whether changes meaningful:","code":"# Small changes might not be meaningful diffs <- comparison$summary$differences  if (abs(diffs$pct_change_sources) < 5) {   cat(\"Change is less than 5% - may not be substantial\\n\") }"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/scenario-comparison.html","id":"different-scales","dir":"Articles","previous_headings":"Troubleshooting","what":"Different Scales","title":"Scenario Comparison Analysis","text":"comparing scenarios different scales, metrics won’t directly comparable:","code":"# This comparison has limited value compare_scenarios(list(   \"County\" = county_results,  # ~3000 units   \"HUC2\" = huc2_results       # ~18 units ))  # Better: Compare percentages instead # Use the comparison data to calculate percentages yourself"},{"path":"https://exelegch.github.io/manureshed-docs/articles/scenario-comparison.html","id":"missing-data","dir":"Articles","previous_headings":"Troubleshooting","what":"Missing Data","title":"Scenario Comparison Analysis","text":"scenarios different nutrients:","code":"# One has nitrogen, other has phosphorus - won't compare well # Make sure both scenarios analyze the same nutrient"},{"path":"https://exelegch.github.io/manureshed-docs/articles/scenario-comparison.html","id":"related-functions","dir":"Articles","previous_headings":"","what":"Related Functions","title":"Scenario Comparison Analysis","text":"run_builtin_analysis(): Run individual scenarios batch_analysis_years(): Analyze multiple years run_state_analysis(): State-specific analysis save_plot(): Save comparison plots quick_summary(): Quick validation results","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/scenario-comparison.html","id":"see-also","dir":"Articles","previous_headings":"","what":"See Also","title":"Scenario Comparison Analysis","text":"vignette(\"getting-started\") - Basic package usage vignette(\"dashboard-guide\") - Interactive dashboard vignette(\"advanced-features\") - Advanced analysis techniques","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/visualization-guide.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Creating Maps and Plots","text":"manureshed package creates several types visualizations: Classification maps - Show nutrient balance categories WWTP facility maps - Show treatment plant locations sizes Influence maps - Show much WWTP contributes area Comparison plots - /adding WWTP data Network plots - Show transitions neighboring areas","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/visualization-guide.html","id":"quick-maps-with-quick_analysis","dir":"Articles","previous_headings":"","what":"Quick Maps with quick_analysis()","title":"Creating Maps and Plots","text":"easiest way get maps quick_analysis():","code":"# This creates all maps automatically results <- quick_analysis(   scale = \"huc8\",   year = 2016,   nutrients = \"nitrogen\",   include_wwtp = TRUE,   output_dir = \"my_maps\" )  # Maps are saved in the output directory"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/visualization-guide.html","id":"get-analysis-results-first","dir":"Articles","previous_headings":"Step-by-Step Map Creation","what":"1. Get Analysis Results First","title":"Creating Maps and Plots","text":"","code":"# Run analysis to get data for mapping results <- run_builtin_analysis(   scale = \"county\",   year = 2016,    nutrients = c(\"nitrogen\", \"phosphorus\"),   include_wwtp = TRUE )"},{"path":"https://exelegch.github.io/manureshed-docs/articles/visualization-guide.html","id":"agricultural-classification-maps","dir":"Articles","previous_headings":"Step-by-Step Map Creation","what":"2. Agricultural Classification Maps","title":"Creating Maps and Plots","text":"","code":"# Basic nitrogen map nitrogen_map <- map_agricultural_classification(   data = results$agricultural,   nutrient = \"nitrogen\",   classification_col = \"N_class\",    title = \"Agricultural Nitrogen Classifications\" )  # View the map print(nitrogen_map)  # Save the map save_plot(nitrogen_map, \"nitrogen_classes.png\", width = 10, height = 8)  # Phosphorus map phosphorus_map <- map_agricultural_classification(   data = results$agricultural,   nutrient = \"phosphorus\",   classification_col = \"P_class\",   title = \"Agricultural Phosphorus Classifications\"  )"},{"path":"https://exelegch.github.io/manureshed-docs/articles/visualization-guide.html","id":"combined-maps-agricultural-wwtp","dir":"Articles","previous_headings":"Step-by-Step Map Creation","what":"3. Combined Maps (Agricultural + WWTP)","title":"Creating Maps and Plots","text":"","code":"# Map showing effect of adding WWTP data combined_nitrogen <- map_agricultural_classification(   data = results$integrated$nitrogen,   nutrient = \"nitrogen\",   classification_col = \"combined_N_class\",   title = \"Nitrogen with WWTP Integration\" )  combined_phosphorus <- map_agricultural_classification(   data = results$integrated$phosphorus,    nutrient = \"phosphorus\",   classification_col = \"combined_P_class\",   title = \"Phosphorus with WWTP Integration\" )"},{"path":"https://exelegch.github.io/manureshed-docs/articles/visualization-guide.html","id":"wwtp-facility-maps","dir":"Articles","previous_headings":"Step-by-Step Map Creation","what":"4. WWTP Facility Maps","title":"Creating Maps and Plots","text":"","code":"# Map showing WWTP locations colored by size facility_map <- map_wwtp_points(   wwtp_sf = results$wwtp$nitrogen$spatial_data,   nutrient = \"nitrogen\",   title = \"Nitrogen WWTP Facilities\" )  print(facility_map)"},{"path":"https://exelegch.github.io/manureshed-docs/articles/visualization-guide.html","id":"wwtp-influence-maps","dir":"Articles","previous_headings":"Step-by-Step Map Creation","what":"5. WWTP Influence Maps","title":"Creating Maps and Plots","text":"","code":"# Map showing how much WWTP contributes to each area influence_map <- map_wwtp_influence(   data = results$integrated$nitrogen,   nutrient = \"nitrogen\",   title = \"WWTP Contribution to Total Nitrogen\" )  print(influence_map)"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/visualization-guide.html","id":"beforeafter-wwtp-integration","dir":"Articles","previous_headings":"Comparison Plots","what":"Before/After WWTP Integration","title":"Creating Maps and Plots","text":"","code":"# Create summary data summary_data <- create_classification_summary(   data = results$integrated$nitrogen,   agricultural_col = \"N_class\",   combined_col = \"combined_N_class\" )  # Before/after bar chart comparison_plot <- plot_before_after_comparison(   data = summary_data,   nutrient = \"nitrogen\",   title = \"Effect of Adding WWTP Data\" )  print(comparison_plot)  # Impact ratios impact_plot <- plot_impact_ratios(   data = summary_data,   title = \"WWTP Impact on Classifications\" )  # Absolute changes change_plot <- plot_absolute_changes(   data = summary_data,   title = \"Change in Number of Counties\" )"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/visualization-guide.html","id":"spatial-transition-networks","dir":"Articles","previous_headings":"Network Plots","what":"Spatial Transition Networks","title":"Creating Maps and Plots","text":"","code":"# Add coordinates to the data centroids <- add_centroid_coordinates(results$integrated$nitrogen)  # Calculate how often different classes are next to each other transitions <- calculate_transition_probabilities(   centroids, \"combined_N_class\" )  # Create network plot create_network_plot(   transition_df = transitions,   nutrient = \"nitrogen\",   analysis_type = \"WWTP + Agricultural\",    output_path = \"nitrogen_network.png\" )  # View the transition table print(transitions)"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/visualization-guide.html","id":"save-options","dir":"Articles","previous_headings":"Customizing Maps","what":"Save Options","title":"Creating Maps and Plots","text":"","code":"# Different resolutions and formats save_plot(nitrogen_map, \"map_web.png\", width = 8, height = 6, dpi = 150)      # Web save_plot(nitrogen_map, \"map_print.png\", width = 10, height = 8, dpi = 300)   # Print   save_plot(nitrogen_map, \"map_publication.png\", width = 12, height = 9, dpi = 600) # Publication  # Vector formats save_plot(nitrogen_map, \"map_vector.pdf\", width = 10, height = 8)"},{"path":"https://exelegch.github.io/manureshed-docs/articles/visualization-guide.html","id":"custom-colors","dir":"Articles","previous_headings":"Customizing Maps","what":"Custom Colors","title":"Creating Maps and Plots","text":"","code":"# Use different colors custom_map <- map_agricultural_classification(   data = results$agricultural,   nutrient = \"nitrogen\",   classification_col = \"N_class\",   title = \"Custom Colors\" ) +   ggplot2::scale_fill_manual(     values = c(\"Source\" = \"red\", \"Sink_Deficit\" = \"blue\",                 \"Sink_Fertilizer\" = \"green\", \"Within_County\" = \"yellow\",                \"Excluded\" = \"gray\"),     labels = c(\"Source\", \"Sink Deficit\", \"Sink Fertilizer\",                 \"Within County\", \"Excluded\")   )"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/visualization-guide.html","id":"county-level","dir":"Articles","previous_headings":"Working with Different Scales","what":"County Level","title":"Creating Maps and Plots","text":"","code":"# County analysis county_results <- run_builtin_analysis(scale = \"county\", year = 2016,                                         nutrients = \"nitrogen\", include_wwtp = TRUE)  county_map <- map_agricultural_classification(   county_results$agricultural, \"nitrogen\", \"N_class\",   \"County-Level Nitrogen Classifications\" )"},{"path":"https://exelegch.github.io/manureshed-docs/articles/visualization-guide.html","id":"huc8-watersheds","dir":"Articles","previous_headings":"Working with Different Scales","what":"HUC8 Watersheds","title":"Creating Maps and Plots","text":"","code":"# Watershed analysis   huc8_results <- run_builtin_analysis(scale = \"huc8\", year = 2016,                                      nutrients = \"nitrogen\", include_wwtp = TRUE)  huc8_map <- map_agricultural_classification(   huc8_results$agricultural, \"nitrogen\", \"N_class\",    \"Watershed-Level Nitrogen Classifications\" )"},{"path":"https://exelegch.github.io/manureshed-docs/articles/visualization-guide.html","id":"huc2-regions","dir":"Articles","previous_headings":"Working with Different Scales","what":"HUC2 Regions","title":"Creating Maps and Plots","text":"","code":"# Regional analysis huc2_results <- run_builtin_analysis(scale = \"huc2\", year = 2016,                                      nutrients = \"nitrogen\", include_wwtp = TRUE)  huc2_map <- map_agricultural_classification(   huc2_results$agricultural, \"nitrogen\", \"N_class\",   \"Regional-Level Nitrogen Classifications\" )"},{"path":"https://exelegch.github.io/manureshed-docs/articles/visualization-guide.html","id":"state-specific-maps","dir":"Articles","previous_headings":"","what":"State-Specific Maps","title":"Creating Maps and Plots","text":"","code":"# Create maps for a specific state iowa_results <- run_state_analysis(   state = \"IA\",    scale = \"county\",   year = 2016,   nutrients = \"nitrogen\",   include_wwtp = TRUE )  iowa_map <- map_agricultural_classification(   iowa_results$agricultural, \"nitrogen\", \"N_class\",   \"Iowa Nitrogen Classifications\" )  # Quick state maps texas_maps <- quick_state_analysis(   state = \"TX\",   scale = \"huc8\",    year = 2015,   nutrients = \"phosphorus\",   create_maps = TRUE )"},{"path":"https://exelegch.github.io/manureshed-docs/articles/visualization-guide.html","id":"multi-panel-figures","dir":"Articles","previous_headings":"","what":"Multi-Panel Figures","title":"Creating Maps and Plots","text":"","code":"# Create side-by-side comparison library(ggplot2) library(gridExtra)  # or cowplot  # Create two maps map1 <- map_agricultural_classification(   results$agricultural, \"nitrogen\", \"N_class\", \"Agricultural Only\" )  map2 <- map_agricultural_classification(   results$integrated$nitrogen, \"nitrogen\", \"combined_N_class\", \"With WWTP\" )  # Combine them combined_figure <- grid.arrange(map1, map2, ncol = 2)  # Save combined figure ggsave(\"combined_maps.png\", combined_figure, width = 16, height = 8)"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/visualization-guide.html","id":"map-quality","dir":"Articles","previous_headings":"Tips for Good Maps","what":"Map Quality","title":"Creating Maps and Plots","text":"","code":"# For presentations (screen) save_plot(map, \"presentation.png\", width = 12, height = 8, dpi = 150)  # For reports (print)   save_plot(map, \"report.png\", width = 10, height = 8, dpi = 300)  # For journals (high quality) save_plot(map, \"journal.png\", width = 8, height = 6, dpi = 600)"},{"path":"https://exelegch.github.io/manureshed-docs/articles/visualization-guide.html","id":"color-choices","dir":"Articles","previous_headings":"Tips for Good Maps","what":"Color Choices","title":"Creating Maps and Plots","text":"Use built-colors consistency Consider colorblind-friendly palettes Make sure colors show grayscale Use high contrast important categories","code":""},{"path":"https://exelegch.github.io/manureshed-docs/articles/visualization-guide.html","id":"file-management","dir":"Articles","previous_headings":"Tips for Good Maps","what":"File Management","title":"Creating Maps and Plots","text":"","code":"# Organize your outputs create_maps_folder <- function(analysis_name) {   dir.create(analysis_name, showWarnings = FALSE)   dir.create(file.path(analysis_name, \"maps\"), showWarnings = FALSE)   dir.create(file.path(analysis_name, \"plots\"), showWarnings = FALSE)   dir.create(file.path(analysis_name, \"data\"), showWarnings = FALSE) }  create_maps_folder(\"nitrogen_analysis_2016\")"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/articles/visualization-guide.html","id":"common-issues","dir":"Articles","previous_headings":"Troubleshooting","what":"Common Issues","title":"Creating Maps and Plots","text":"covers essential mapping visualization functions manureshed. package makes easy create publication-quality maps plots nutrient flow analysis.","code":"# If maps are blank, check your data quick_check(results)  # If colors are wrong, check classification column names table(results$agricultural$N_class)  # If coordinates are missing centroids <- add_centroid_coordinates(results$agricultural)  # If maps are too slow, try smaller scale or fewer years"},{"path":"https://exelegch.github.io/manureshed-docs/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Olatunde D. Akanbi. Author, maintainer, copyright holder. Vibha Mandayam. Author. Atharva Gupta. Author. K. Colton Flynn. Author. Jeffrey Yarus. Author. Erika . Barcelos. Author, copyright holder. Roger H. French. Author, copyright holder.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Akanbi O, Mandayam V, Gupta , Flynn K, Yarus J, Barcelos E, French R (2025). manureshed: Open-Source R Package Scalable Temporal Multi-Region Analysis Integrated Agricultural-Municipal Nutrient Flows. R package version 0.1.0, https://osf.io/g39xa/. Akanbi O, Gupta , Mandayam V, Flynn K, Yarus J, Barcelos E, French R (2025). “Towards Circular Nutrient Economies: Integrated Manureshed Framework Agricultural Municipal Resource Management.” Resources, Conservation Recycling.","code":"@Manual{,   title = {manureshed: An Open-Source R Package for Scalable Temporal and Multi-Region Analysis of Integrated Agricultural-Municipal Nutrient Flows},   author = {Olatunde D. Akanbi and Vibha Mandayam and Arthava Gupta and K. C. Flynn and Jeffrey M. Yarus and Erika I. Barcelos and Roger H. French},   year = {2025},   note = {R package version 0.1.0},   url = {https://osf.io/g39xa/}, } @Article{,   title = {Towards Circular Nutrient Economies: An Integrated Manureshed Framework for Agricultural and Municipal Resource Management},   author = {Olatunde D. Akanbi and Arthava Gupta and Vibha Mandayam and K. C. Flynn and Jeffrey M. Yarus and Erika I. Barcelos and Roger H. French},   journal = {Resources, Conservation and Recycling},   year = {2025}, }"},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"manureshed-ear_of_ricedroplet","dir":"","previous_headings":"","what":"manureshed: Spatiotemporal Nutrient Balance Analysis","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"Spatiotemporal Nutrient Balance Analysis Across Agricultural Municipal Systems R package analyzing integrated agricultural-municipal nutrient flows watershed management. manureshed framework enables comprehensive analysis nitrogen phosphorus balances across multiple spatial scales (county, HUC8, HUC2) seamless integration wastewater treatment plant (WWTP) discharge data.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"clipboard-table-of-contents","dir":"","previous_headings":"","what":"📋 Table of Contents","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"Key Features Quick Links Installation Quick Start Documentation Real-World Examples Makes manureshed Special Data Sources System Requirements Citation Contact License Acknowledgments","code":""},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"link-quick-links","dir":"","previous_headings":"","what":"🔗 Quick Links","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"Documentations: https://exelegch.github.io/manureshed-docs/ CRAN: https://cran.r-project.org/package=manureshed OSF Data Repository: https://osf.io/g39xa/ GitHub: https://github.com/cwru-sdle/manureshed Bug Reports: https://github.com/cwru-sdle/manureshed/issues Methodology Paper: https://doi.org/10.1016/j.resconrec.2025.108697","code":""},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"world_map-multi-scale-spatial-analysis","dir":"","previous_headings":"✨ Key Features","what":"🗺️ Multi-Scale Spatial Analysis","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"County-level analysis: 3,000+ US counties HUC8 watersheds: 2,000+ hydrologic units HUC2 regions: 18 major water resource regions Seamless scale switching consistent methodology","code":""},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"ear_of_rice-comprehensive-nutrient-analysis","dir":"","previous_headings":"✨ Key Features","what":"🌾 Comprehensive Nutrient Analysis","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"Nitrogen balance: Agricultural surplus/deficit 0.5 availability factor manure Phosphorus balance: Direct calculation nutrient flows Dual-nutrient analysis: Analyze N P simultaneously Classification system: Source, Sink Deficit, Sink Fertilizer, Within Watershed/County, Excluded","code":""},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"droplet-wwtp-integration","dir":"","previous_headings":"✨ Key Features","what":"💧 WWTP Integration","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"2007-2016 built-data: Pre-processed EPA discharge data N P Flexible data loading: Easy integration custom WWTP data year Unit conversion: Automatic handling kg, lbs, pounds, tons Impact analysis: /comparison WWTP integration Spatial influence mapping: Visualize WWTP contribution nutrient loads","code":""},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"bar_chart-rich-visualizations","dir":"","previous_headings":"✨ Key Features","what":"📊 Rich Visualizations","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"Classification maps: Spatial distribution nutrient sources sinks WWTP facility maps: Point locations load-based sizing Influence maps: Proportion WWTP contribution total loads Transition networks: Spatial probability flows classifications Comparison plots: /WWTP integration analysis","code":""},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"arrows_counterclockwise-end-to-end-workflows","dir":"","previous_headings":"✨ Key Features","what":"🔄 End-to-End Workflows","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"One-function analysis: quick_analysis() complete workflow Batch processing: Multi-year analysis batch_analysis_years() State-specific analysis: Focus individual states regions Custom thresholds: Flexible cropland exclusion criteria Automated outputs: Maps, data files, metadata generation","code":""},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"zap-performance--data-management","dir":"","previous_headings":"✨ Key Features","what":"⚡ Performance & Data Management","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"-demand data loading: Downloads OSF needed Smart caching: Automatic local caching repeated use Memory efficient: Optimized CONUS-scale analysis Package size <1MB: Full datasets (~40MB) downloaded separately Reproducible: Permanent DOI data versioning","code":""},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"from-cran-recommended","dir":"","previous_headings":"📦 Installation","what":"From CRAN (Recommended)","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"","code":"# Install the stable version from CRAN install.packages(\"manureshed\")"},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"development-version-from-github","dir":"","previous_headings":"📦 Installation","what":"Development Version from GitHub","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"","code":"# Install development version with latest features # install.packages(\"devtools\") devtools::install_github(\"cwru-sdle/manureshed\")"},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"install-recommended-packages","dir":"","previous_headings":"📦 Installation","what":"Install Recommended Packages","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"","code":"# Enhanced visualization and spatial analysis install.packages(c(\"ggplot2\", \"sf\", \"dplyr\", \"tidyr\", \"viridis\"))  # Optional packages for advanced features install.packages(c(\"tigris\", \"nhdplusTools\", \"igraph\", \"cowplot\"))"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"load-package-and-check-data","dir":"","previous_headings":"🚀 Quick Start","what":"Load Package and Check Data","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"","code":"library(manureshed)  # Check what data is available check_builtin_data()  # Download all datasets (optional, ~40MB total) download_all_data()  # Test connection to data repository test_osf_connection()  # Check package health health_check()"},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"basic-analysis-examples","dir":"","previous_headings":"🚀 Quick Start","what":"Basic Analysis Examples","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"","code":"# 1. Quick analysis with automatic visualizations results <- quick_analysis(   scale = \"county\",   year = 2016,   nutrients = \"nitrogen\",   include_wwtp = TRUE )  # 2. Comprehensive analysis for both nutrients results_both <- run_builtin_analysis(   scale = \"huc8\",   year = 2016,   nutrients = c(\"nitrogen\", \"phosphorus\"),   include_wwtp = TRUE,   output_dir = \"analysis_results\" )  # 3. Historical analysis (2007-2016 WWTP available!) historical <- run_builtin_analysis(   scale = \"county\",   year = 2010,   nutrients = \"nitrogen\",   include_wwtp = TRUE )  # 4. Multi-year analysis batch_results <- batch_analysis_years(   scale = \"huc8\",   years = c(2010, 2012, 2014, 2016),   nutrients = \"phosphorus\",   include_wwtp = TRUE )  # 5. State-specific analysis ohio <- run_state_analysis(   state = \"OH\",   scale = \"county\",   year = 2016,   nutrients = c(\"nitrogen\", \"phosphorus\"),   include_wwtp = TRUE )"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"vignettes-and-tutorials","dir":"","previous_headings":"📖 Documentation","what":"Vignettes and Tutorials","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"Interactive Dashboard - User-friendly interface non-coders Getting Started - Package overview basic workflows Data Integration - Using custom WWTP data Visualization Guide - Mapping plotting options Advanced Features - State analysis, custom thresholds, parallel processing","code":""},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"function-reference","dir":"","previous_headings":"📖 Documentation","what":"Function Reference","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"","code":"# View all available functions help(package = \"manureshed\")  # Key workflow functions ?run_builtin_analysis ?quick_analysis ?batch_analysis_years ?run_state_analysis  # Data loading functions ?load_builtin_nugis ?load_builtin_wwtp ?load_builtin_boundaries  # Custom data integration ?load_user_wwtp ?wwtp_clean_data  # Visualization functions ?map_agricultural_classification ?map_wwtp_points ?map_wwtp_influence  # Utility functions ?check_builtin_data ?citation_info ?health_check"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"regional-nutrient-analysis","dir":"","previous_headings":"🎯 Real-World Examples","what":"Regional Nutrient Analysis","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"","code":"# Analyze nitrogen flows in the Great Lakes region great_lakes <- run_builtin_analysis(   scale = \"huc8\",   year = 2016,   nutrients = \"nitrogen\",   include_wwtp = TRUE,   output_dir = \"great_lakes_analysis\" )  # Extract key statistics summary_stats <- create_classification_summary(   great_lakes$nitrogen$agri_classified,   great_lakes$nitrogen$integrated_result )  # Visualize impact plot_before_after_comparison(summary_stats)"},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"watershed-management-planning","dir":"","previous_headings":"🎯 Real-World Examples","what":"Watershed Management Planning","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"","code":"# Load watershed boundaries huc8_boundaries <- load_builtin_boundaries(\"huc8\")  # Analyze nutrient balance watershed_balance <- run_builtin_analysis(   scale = \"huc8\",   year = 2016,   nutrients = c(\"nitrogen\", \"phosphorus\"),   include_wwtp = TRUE )  # Calculate transition probabilities transitions_n <- calculate_transition_probabilities(   watershed_balance$nitrogen$agri_classified,   watershed_balance$nitrogen$integrated_result )  # Visualize network flows create_network_plot(   transitions_n,   nutrient = \"nitrogen\",   title = \"HUC8 Nitrogen Classification Transitions\" )"},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"custom-wwtp-data-integration","dir":"","previous_headings":"🎯 Real-World Examples","what":"Custom WWTP Data Integration","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"","code":"# Load your own WWTP data for any year custom_wwtp <- load_user_wwtp(   file_path = \"my_wwtp_2018.csv\",   nutrient = \"nitrogen\",   column_mapping = list(     facility = \"Facility_Name\",     latitude = \"Lat\",     longitude = \"Long\",     load = \"Total_N_kg\"   ),   load_units = \"kg\" )  # Integrate with agricultural data custom_results <- run_builtin_analysis(   scale = \"county\",   year = 2016,  # Use 2016 agricultural data   nutrients = \"nitrogen\",   include_wwtp = TRUE,   custom_wwtp_nitrogen = custom_wwtp )"},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"multi-year-trend-analysis","dir":"","previous_headings":"🎯 Real-World Examples","what":"Multi-Year Trend Analysis","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"","code":"# Analyze trends across multiple years trend_results <- batch_analysis_years(   scale = \"county\",   years = seq(2010, 2016, by = 2),   nutrients = c(\"nitrogen\", \"phosphorus\"),   include_wwtp = TRUE,   output_dir = \"trend_analysis\" )  # Available years for WWTP: 2007-2016 list_available_years()"},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"state-level-analysis","dir":"","previous_headings":"🎯 Real-World Examples","what":"State-Level Analysis","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"","code":"# Quick state analysis with maps iowa_results <- quick_state_analysis(   state = \"IA\",   scale = \"county\",   year = 2016,   nutrients = \"nitrogen\" )  # Multiple states midwest_states <- c(\"IA\", \"IL\", \"IN\", \"OH\", \"MI\") midwest_results <- lapply(midwest_states, function(state) {   run_state_analysis(     state = state,     scale = \"county\",     year = 2016,     nutrients = \"nitrogen\",     include_wwtp = TRUE   ) }) names(midwest_results) <- midwest_states"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"id_1-integrated-framework","dir":"","previous_headings":"🌟 What Makes manureshed Special","what":"1. Integrated Framework","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"manureshed concept represents paradigm shift treating agricultural municipal nutrient systems separately analyzing integrated socio-environmental systems. enables: - Circular economy insights: Identify opportunities nutrient recycling - Regional planning: Optimize nutrient flows watershed scales - Policy analysis: Evaluate impact nutrient management strategies","code":""},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"id_2-comprehensive-spatial-coverage","dir":"","previous_headings":"🌟 What Makes manureshed Special","what":"2. Comprehensive Spatial Coverage","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"CONUS-scale: Analyze entire continental United States Multi-resolution: Compare patterns across county, watershed, regional scales Consistent methodology: classification approach across scales","code":""},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"id_3-temporal-depth","dir":"","previous_headings":"🌟 What Makes manureshed Special","what":"3. Temporal Depth","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"30-year agricultural data: NuGIS 1987-2016 10-year WWTP data: EPA discharge data 2007-2016 Trend analysis: Track changes nutrient management time","code":""},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"id_4-research-ready","dir":"","previous_headings":"🌟 What Makes manureshed Special","what":"4. Research-Ready","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"Designed specifically reproducible research: - Permanent data archive: DOI-based OSF repository - Version control: Fixed data versions reproducibility - Complete workflow: raw data publication figures - Metadata tracking: Analysis parameters saved automatically","code":""},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"id_5-flexible-data-integration","dir":"","previous_headings":"🌟 What Makes manureshed Special","what":"5. Flexible Data Integration","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"Built-datasets: Ready use immediately Custom data support: Easy integration user data Format flexibility: Handles varying EPA data formats Unit conversion: Automatic standardization","code":""},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"id_6-rich-analytical-tools","dir":"","previous_headings":"🌟 What Makes manureshed Special","what":"6. Rich Analytical Tools","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"Classification system: Five-category nutrient balance framework Spatial analysis: Transition probabilities network flows Impact assessment: Quantify WWTP influence nutrient balance Comparison tools: /integration analysis","code":""},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"nugis-agricultural-data-1987-2016","dir":"","previous_headings":"📊 Data Sources","what":"NuGIS Agricultural Data (1987-2016)","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"Source: Fertilizer Institute (TFI) Plant Nutrition Canada (PNC) Website: https://nugis.tfi.org/tabular_data Components: - County-level crop livestock data (USDA Census Agriculture) - Fertilizer use data (AAPFCO) - Manure production estimates - Nutrient removal crops - Biological nitrogen fixation Spatial Scales: County, HUC8, HUC2 Citation: Use citation_info() complete attribution","code":""},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"epa-wwtp-discharge-data-2007-2016","dir":"","previous_headings":"📊 Data Sources","what":"EPA WWTP Discharge Data (2007-2016)","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"Source: U.S. Environmental Protection Agency System: Discharge Monitoring Report (DMR) Loading Tool via ECHO Website: https://echo.epa.gov/trends/loading-tool/water-pollution-search Parameters: - Total nitrogen loads - Total phosphorus loads - Facility locations identifiers - Permit information Pre-processing: Cleaned quality-controlled manureshed package License: Public domain (U.S. Government work)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"spatial-boundaries","dir":"","previous_headings":"📊 Data Sources","what":"Spatial Boundaries","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"Sources: - US Census TIGER (counties) - USGS Watershed Boundary Dataset (HUC8, HUC2) Projection: Albers Equal Area Conic (EPSG:5070) Coverage: Continental United States (CONUS)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"zap-performance","dir":"","previous_headings":"","what":"⚡ Performance","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"package optimized : Large-scale analysis: Handle 3,000+ spatial units efficiently Memory efficiency: -demand loading smart caching Cross-platform: Tested Windows, macOS, Linux Batch processing: Multi-year analysis workflows Quick iterations: Cached data enables rapid re-analysis","code":""},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"performance-tips","dir":"","previous_headings":"⚡ Performance","what":"Performance Tips","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"","code":"# Check package health health_check()  # Pre-download all data for offline work download_all_data()  # Clear cache if needed clear_data_cache()  # Use quick_check to validate results quick_check(results)  # For large batch analyses, process in chunks years_chunk1 <- seq(2007, 2011) years_chunk2 <- seq(2012, 2016)"},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"required-dependencies","dir":"","previous_headings":"🛠 System Requirements","what":"Required Dependencies","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"","code":"# Core dependencies (automatically installed) sf (>= 1.0-0) dplyr (>= 1.0.0) ggplot2 (>= 3.3.0) tidyr (>= 1.0.0) jsonlite rlang"},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"recommended-packages","dir":"","previous_headings":"🛠 System Requirements","what":"Recommended Packages","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"","code":"# Install these for full functionality install.packages(c(   \"viridis\",      # Color schemes   \"tigris\",       # US boundaries   \"nhdplusTools\", # Watershed tools   \"igraph\",       # Network analysis   \"cowplot\"       # Multi-panel plots ))"},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"minimum-r-version","dir":"","previous_headings":"🛠 System Requirements","what":"Minimum R Version","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"R >= 4.0.0 recommended R >= 3.5.0 minimum","code":""},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"page_facing_up-citation","dir":"","previous_headings":"","what":"📄 Citation","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"use manureshed research, please cite:","code":""},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"package-citation","dir":"","previous_headings":"📄 Citation","what":"Package Citation","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"Akanbi, O. D.; Mandayam, V.; Gupta, .; Flynn, K. C.; Yarus, J. M.; Barcelos, E. .; & French, R. H. (2025). manureshed: Open-Source R Package Scalable Temporal Multi-Regional Analysis Integrated Agricultural-Municipal Nutrient Flows. R package version 0.1.0. OSF Repository: https://osf.io/g39xa/","code":"citation(\"manureshed\")"},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"methodology-paper","dir":"","previous_headings":"📄 Citation","what":"Methodology Paper","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"Akanbi, O. D.; Gupta, .; Mandayam, V.; Flynn, K. C.; Yarus, J. M.; Barcelos, E. .; French, R. H. Towards Circular Nutrient Economies: Integrated Manureshed Framework Agricultural Municipal Resource Management. Resources, Conservation Recycling, 2025. https://doi.org/10.1016/j.resconrec.2025.108697","code":""},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"data-sources","dir":"","previous_headings":"📄 Citation","what":"Data Sources","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"Use citation_info() display complete citations : - NuGIS agricultural data - EPA WWTP discharge data - Spatial boundary datasets","code":""},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"e-mail-contact","dir":"","previous_headings":"","what":"📧 Contact","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"Maintainer: Olatunde D. Akanbi (olatunde.akanbi@case.edu) Senior Maintainer: Roger H. French (roger.french@case.edu) Lead Developer: Olatunde D. Akanbi Issues & Bug Reports: https://github.com/cwru-sdle/manureshed/issues","code":""},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"handshake-contributing","dir":"","previous_headings":"","what":"🤝 Contributing","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"welcome contributions! contribute: Report bugs: Use GitHub Issues reproducible examples Suggest features: Open discussion issue Submit pull requests: Follow coding standards Improve documentation: Help make package accessible","code":""},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"getting-help","dir":"","previous_headings":"🤝 Contributing","what":"Getting Help","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"📖 Documentation: Check Documentation 🐛 Bug Reports: GitHub Issues 💬 Questions: Contact maintainers open discussion 📧 Email: olatunde.akanbi@case.edu","code":""},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"pencil-license","dir":"","previous_headings":"","what":"📝 License","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"MIT License - see LICENSE file details.","code":""},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"funding","dir":"","previous_headings":"🙏 Acknowledgments","what":"Funding","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"material based upon financial support National Science Foundation, EEC Division Engineering Education Centers, NSF Engineering Research Center Advancing Sustainable Distributed Fertilizer Production (CASFER), NSF 20-553 Gen-4 Engineering Research Centers award 2133576.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"contributing-institutions","dir":"","previous_headings":"🙏 Acknowledgments","what":"Contributing Institutions","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"Solar Durability Lifetime Extension (SDLE) Center, Case Western Reserve University, Cleveland, Ohio, U.S.. NSF Engineering Research Center Advancing Sustainable Distributed Fertilizer Production (CASFER)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"special-thanks","dir":"","previous_headings":"🙏 Acknowledgments","what":"Special Thanks","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"Dr. Robert D. Sabo (U.S. Environmental Protection Agency) valuable contributions conceptual development review Fertilizer Institute (TFI) Plant Nutrition Canada (PNC) NuGIS data U.S. Environmental Protection Agency WWTP discharge data R Core Team CRAN maintainers Spatial R community (sf, terra, ggplot2 developers)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/index.html","id":"development-team","dir":"","previous_headings":"🙏 Acknowledgments","what":"Development Team","title":"manureshed: Spatiotemporal Nutrient Balance Analysis","text":"Olatunde D. Akanbi (Lead Developer, ORCID: 0000-0001-7719-2619) Vibha Mandayam (ORCID: 0009-0008-8628-9904) Atharva Gupta (ORCID: 0009-0004-5372-0260) K. Colton Flynn (ORCID: 0000-0002-5718-1071) Jeffrey Yarus (ORCID: 0000-0002-9331-9568) Erika . Barcelos (ORCID: 0000-0002-9273-8488) Roger H. French (ORCID: 0000-0002-6162-0532) Ready get started? Install CRAN install.packages(\"manureshed\") check Getting Started vignette! Questions? Run health_check() verify installation, use citation_info() publication citations.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/CONUS_STATES.html","id":null,"dir":"Reference","previous_headings":"","what":"CONUS States — CONUS_STATES","title":"CONUS States — CONUS_STATES","text":"Vector Continental United States state abbreviations","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/CONUS_STATES.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"CONUS States — CONUS_STATES","text":"","code":"CONUS_STATES"},{"path":"https://exelegch.github.io/manureshed-docs/reference/CONUS_STATES.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"CONUS States — CONUS_STATES","text":"object class character length 49.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/KG_TO_TONS.html","id":null,"dir":"Reference","previous_headings":"","what":"Conversion Factor: Kilograms to US Tons — KG_TO_TONS","title":"Conversion Factor: Kilograms to US Tons — KG_TO_TONS","text":"Conversion Factor: Kilograms US Tons","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/KG_TO_TONS.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Conversion Factor: Kilograms to US Tons — KG_TO_TONS","text":"","code":"KG_TO_TONS"},{"path":"https://exelegch.github.io/manureshed-docs/reference/KG_TO_TONS.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Conversion Factor: Kilograms to US Tons — KG_TO_TONS","text":"object class numeric length 1.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/LBS_TO_KG.html","id":null,"dir":"Reference","previous_headings":"","what":"Conversion Factor: Pounds to Kilograms — LBS_TO_KG","title":"Conversion Factor: Pounds to Kilograms — LBS_TO_KG","text":"Conversion Factor: Pounds Kilograms","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/LBS_TO_KG.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Conversion Factor: Pounds to Kilograms — LBS_TO_KG","text":"","code":"LBS_TO_KG"},{"path":"https://exelegch.github.io/manureshed-docs/reference/LBS_TO_KG.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Conversion Factor: Pounds to Kilograms — LBS_TO_KG","text":"object class numeric length 1.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/LBS_TO_TONS.html","id":null,"dir":"Reference","previous_headings":"","what":"Conversion Factor: Pounds to US Tons — LBS_TO_TONS","title":"Conversion Factor: Pounds to US Tons — LBS_TO_TONS","text":"Conversion Factor: Pounds US Tons","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/LBS_TO_TONS.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Conversion Factor: Pounds to US Tons — LBS_TO_TONS","text":"","code":"LBS_TO_TONS"},{"path":"https://exelegch.github.io/manureshed-docs/reference/LBS_TO_TONS.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Conversion Factor: Pounds to US Tons — LBS_TO_TONS","text":"object class numeric length 1.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/MANURESHED_CRS.html","id":null,"dir":"Reference","previous_headings":"","what":"Standard CRS for Manureshed Analysis — MANURESHED_CRS","title":"Standard CRS for Manureshed Analysis — MANURESHED_CRS","text":"Albers Equal Area Conic projection (EPSG:5070)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/MANURESHED_CRS.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Standard CRS for Manureshed Analysis — MANURESHED_CRS","text":"","code":"MANURESHED_CRS"},{"path":"https://exelegch.github.io/manureshed-docs/reference/MANURESHED_CRS.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Standard CRS for Manureshed Analysis — MANURESHED_CRS","text":"object class numeric length 1.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/P2O5_TO_P.html","id":null,"dir":"Reference","previous_headings":"","what":"Conversion Factor: P2O5 to P — P2O5_TO_P","title":"Conversion Factor: P2O5 to P — P2O5_TO_P","text":"Conversion Factor: P2O5 P","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/P2O5_TO_P.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Conversion Factor: P2O5 to P — P2O5_TO_P","text":"","code":"P2O5_TO_P"},{"path":"https://exelegch.github.io/manureshed-docs/reference/P2O5_TO_P.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Conversion Factor: P2O5 to P — P2O5_TO_P","text":"object class numeric length 1.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/add_centroid_coordinates.html","id":null,"dir":"Reference","previous_headings":"","what":"Add Centroid Coordinates to Spatial Data — add_centroid_coordinates","title":"Add Centroid Coordinates to Spatial Data — add_centroid_coordinates","text":"Calculate centroid coordinates spatial units","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/add_centroid_coordinates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add Centroid Coordinates to Spatial Data — add_centroid_coordinates","text":"","code":"add_centroid_coordinates(spatial_data)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/add_centroid_coordinates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add Centroid Coordinates to Spatial Data — add_centroid_coordinates","text":"spatial_data sf object. Spatial data","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/add_centroid_coordinates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add Centroid Coordinates to Spatial Data — add_centroid_coordinates","text":"Data frame centroid coordinates added","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/add_texas_huc8.html","id":null,"dir":"Reference","previous_headings":"","what":"Add Texas HUC8 Data (Updated for OSF) — add_texas_huc8","title":"Add Texas HUC8 Data (Updated for OSF) — add_texas_huc8","text":"Add manually supplied Texas HUC8 data missing watersheds Uses OSF data loading instead built-data","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/add_texas_huc8.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add Texas HUC8 Data (Updated for OSF) — add_texas_huc8","text":"","code":"add_texas_huc8(huc8_data, year = 2016, cropland_threshold, verbose = TRUE)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/add_texas_huc8.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add Texas HUC8 Data (Updated for OSF) — add_texas_huc8","text":"huc8_data sf object. Existing HUC8 agricultural data year Numeric. Year extract Texas data cropland_threshold Numeric. Threshold classification verbose Logical. Show progress messages","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/add_texas_huc8.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add Texas HUC8 Data (Updated for OSF) — add_texas_huc8","text":"sf object Texas data added","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_classify_complete.html","id":null,"dir":"Reference","previous_headings":"","what":"Complete Agricultural Classification Pipeline — agri_classify_complete","title":"Complete Agricultural Classification Pipeline — agri_classify_complete","text":"Run complete agricultural nutrient classification analysis N P","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_classify_complete.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Complete Agricultural Classification Pipeline — agri_classify_complete","text":"","code":"agri_classify_complete(   nugis_data,   scale,   cropland_threshold = NULL,   county_data = NULL )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_classify_complete.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Complete Agricultural Classification Pipeline — agri_classify_complete","text":"nugis_data Data frame. Raw NuGIS data scale Character. Spatial scale: \"county\", \"huc8\", \"huc2\" cropland_threshold Numeric. Optional custom threshold county_data Data frame. County data threshold calculation (needed)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_classify_complete.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Complete Agricultural Classification Pipeline — agri_classify_complete","text":"Data frame complete agricultural classifications nutrients","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_classify_complete_custom.html","id":null,"dir":"Reference","previous_headings":"","what":"Complete Agricultural Classification Pipeline with Custom Efficiency Factors — agri_classify_complete_custom","title":"Complete Agricultural Classification Pipeline with Custom Efficiency Factors — agri_classify_complete_custom","text":"Run complete agricultural nutrient classification analysis N P user-specified efficiency factors sensitivity analysis.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_classify_complete_custom.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Complete Agricultural Classification Pipeline with Custom Efficiency Factors — agri_classify_complete_custom","text":"","code":"agri_classify_complete_custom(   nugis_data,   scale,   cropland_threshold = NULL,   county_data = NULL,   n_efficiency = 0.5,   p_efficiency = 1 )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_classify_complete_custom.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Complete Agricultural Classification Pipeline with Custom Efficiency Factors — agri_classify_complete_custom","text":"nugis_data Data frame. Raw NuGIS data scale Character. Spatial scale: \"county\", \"huc8\", \"huc2\" cropland_threshold Numeric. Optional custom threshold county_data Data frame. County data threshold calculation (needed) n_efficiency Numeric. Nitrogen efficiency factor (default: 0.5) p_efficiency Numeric. Phosphorus efficiency factor (default: 1.0)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_classify_complete_custom.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Complete Agricultural Classification Pipeline with Custom Efficiency Factors — agri_classify_complete_custom","text":"Data frame complete agricultural classifications nutrients","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_classify_complete_custom.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Complete Agricultural Classification Pipeline with Custom Efficiency Factors — agri_classify_complete_custom","text":"","code":"# \\donttest{ # Load county data nugis_data <- load_builtin_nugis(\"county\", 2016) #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2016 #> Number of spatial units: 3058  # Standard analysis results_standard <- agri_classify_complete_custom(   nugis_data, \"county\" ) #> Starting complete agricultural classification with custom efficiency factors... #>   Nitrogen efficiency: 0.5 #>   Phosphorus efficiency: 1 #> Processed NuGIS data for county scale: #>   Spatial units: 3058 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary (efficiency = 0.5): #>   Excluded: 158 units #>   Sink_Deficit: 2450 units #>   Sink_Fertilizer: 214 units #>   Source: 83 units #>   Within_County: 153 units #> Phosphorus classification summary (efficiency = 1): #>   Excluded: 158 units #>   Sink_Deficit: 1891 units #>   Sink_Fertilizer: 372 units #>   Source: 317 units #>   Within_County: 320 units #> Agricultural classification complete! #> Applied threshold: 1235.53 acres  # Sensitivity analysis with varied nitrogen efficiency results_high_n <- agri_classify_complete_custom(   nugis_data, \"county\",   n_efficiency = 0.7 ) #> Starting complete agricultural classification with custom efficiency factors... #>   Nitrogen efficiency: 0.7 #>   Phosphorus efficiency: 1 #> Processed NuGIS data for county scale: #>   Spatial units: 3058 #>   Converted P2O5 to P using factor: 0.436 #> Using custom nitrogen efficiency factor: 0.7 #>   Standard factor is 0.5 representing typical losses #>   Your factor represents 70% efficiency #> Nitrogen classification summary (efficiency = 0.7): #>   Excluded: 158 units #>   Sink_Deficit: 1922 units #>   Sink_Fertilizer: 570 units #>   Source: 137 units #>   Within_County: 271 units #> Phosphorus classification summary (efficiency = 1): #>   Excluded: 158 units #>   Sink_Deficit: 1891 units #>   Sink_Fertilizer: 372 units #>   Source: 317 units #>   Within_County: 320 units #> Agricultural classification complete! #> Applied threshold: 1235.53 acres  # Analysis with both custom efficiencies results_custom <- agri_classify_complete_custom(   nugis_data, \"county\",   n_efficiency = 0.6,   p_efficiency = 0.9 ) #> Starting complete agricultural classification with custom efficiency factors... #>   Nitrogen efficiency: 0.6 #>   Phosphorus efficiency: 0.9 #> Processed NuGIS data for county scale: #>   Spatial units: 3058 #>   Converted P2O5 to P using factor: 0.436 #> Using custom phosphorus efficiency factor: 0.9 #>   Standard factor is 1.0 (100% efficiency) #>   Your factor represents 90% efficiency #> Using custom nitrogen efficiency factor: 0.6 #>   Standard factor is 0.5 representing typical losses #>   Your factor represents 60% efficiency #> Nitrogen classification summary (efficiency = 0.6): #>   Excluded: 158 units #>   Sink_Deficit: 2209 units #>   Sink_Fertilizer: 361 units #>   Source: 109 units #>   Within_County: 221 units #> Phosphorus classification summary (efficiency = 0.9): #>   Excluded: 158 units #>   Sink_Deficit: 2032 units #>   Sink_Fertilizer: 295 units #>   Source: 294 units #>   Within_County: 279 units #> Agricultural classification complete! #> Applied threshold: 1235.53 acres # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_classify_nitrogen.html","id":null,"dir":"Reference","previous_headings":"","what":"Classify Agricultural Nitrogen Status — agri_classify_nitrogen","title":"Classify Agricultural Nitrogen Status — agri_classify_nitrogen","text":"Classify spatial units based nitrogen balance using standard 0.5 efficiency factor","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_classify_nitrogen.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Classify Agricultural Nitrogen Status — agri_classify_nitrogen","text":"","code":"agri_classify_nitrogen(data, cropland_threshold, scale = \"huc8\")"},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_classify_nitrogen.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Classify Agricultural Nitrogen Status — agri_classify_nitrogen","text":"data Data frame processed agricultural data cropland_threshold Numeric. Threshold excluding small cropland areas scale Character. Spatial scale within-unit classification","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_classify_nitrogen.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Classify Agricultural Nitrogen Status — agri_classify_nitrogen","text":"Data frame nitrogen classification added","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_classify_nitrogen_custom.html","id":null,"dir":"Reference","previous_headings":"","what":"Classify Agricultural Nitrogen Status with Custom Efficiency Factor — agri_classify_nitrogen_custom","title":"Classify Agricultural Nitrogen Status with Custom Efficiency Factor — agri_classify_nitrogen_custom","text":"Classify spatial units based nitrogen balance user-specified efficiency factor. function allows sensitivity analysis varying nitrogen efficiency assumption. default value 0.5 represents typical losses nutrient cycling, uptake, application, regional conditions may warrant different values.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_classify_nitrogen_custom.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Classify Agricultural Nitrogen Status with Custom Efficiency Factor — agri_classify_nitrogen_custom","text":"","code":"agri_classify_nitrogen_custom(   data,   cropland_threshold,   scale = \"huc8\",   n_efficiency = 0.5 )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_classify_nitrogen_custom.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Classify Agricultural Nitrogen Status with Custom Efficiency Factor — agri_classify_nitrogen_custom","text":"data Data frame processed agricultural data cropland_threshold Numeric. Threshold excluding small cropland areas scale Character. Spatial scale within-unit classification n_efficiency Numeric. Nitrogen efficiency factor (default: 0.5, range: 0-1)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_classify_nitrogen_custom.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Classify Agricultural Nitrogen Status with Custom Efficiency Factor — agri_classify_nitrogen_custom","text":"Data frame nitrogen classification added","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_classify_nitrogen_custom.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Classify Agricultural Nitrogen Status with Custom Efficiency Factor — agri_classify_nitrogen_custom","text":"","code":"# \\donttest{ # Load and process data first nugis_data <- load_builtin_nugis(\"county\", 2016) #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2016 #> Number of spatial units: 3058 processed_data <- agri_process_nugis(nugis_data, \"county\") #> Processed NuGIS data for county scale: #>   Spatial units: 3058 #>   Converted P2O5 to P using factor: 0.436 cropland_threshold <- 500 * 2.47105  # 500 ha in acres  # Standard analysis with default 0.5 efficiency results_default <- agri_classify_nitrogen_custom(   processed_data, cropland_threshold = cropland_threshold, n_efficiency = 0.5 ) #> Nitrogen classification summary (efficiency = 0.5): #>   Excluded: 158 units #>   Sink_Deficit: 2450 units #>   Sink_Fertilizer: 214 units #>   Source: 83 units #>   Within_Watershed: 153 units  # Sensitivity analysis with higher efficiency (e.g., improved management) results_high <- agri_classify_nitrogen_custom(   processed_data, cropland_threshold = cropland_threshold, n_efficiency = 0.7 ) #> Using custom nitrogen efficiency factor: 0.7 #>   Standard factor is 0.5 representing typical losses #>   Your factor represents 70% efficiency #> Nitrogen classification summary (efficiency = 0.7): #>   Excluded: 158 units #>   Sink_Deficit: 1922 units #>   Sink_Fertilizer: 570 units #>   Source: 137 units #>   Within_Watershed: 271 units  # Conservative analysis with lower efficiency results_low <- agri_classify_nitrogen_custom(   processed_data, cropland_threshold = cropland_threshold, n_efficiency = 0.3 ) #> Using custom nitrogen efficiency factor: 0.3 #>   Standard factor is 0.5 representing typical losses #>   Your factor represents 30% efficiency #> Nitrogen classification summary (efficiency = 0.3): #>   Excluded: 158 units #>   Sink_Deficit: 2753 units #>   Sink_Fertilizer: 71 units #>   Source: 39 units #>   Within_Watershed: 37 units  # Compare classification changes across efficiency scenarios table(results_default$N_class) #>  #>         Excluded     Sink_Deficit  Sink_Fertilizer           Source  #>              158             2450              214               83  #> Within_Watershed  #>              153  table(results_high$N_class) #>  #>         Excluded     Sink_Deficit  Sink_Fertilizer           Source  #>              158             1922              570              137  #> Within_Watershed  #>              271  table(results_low$N_class) #>  #>         Excluded     Sink_Deficit  Sink_Fertilizer           Source  #>              158             2753               71               39  #> Within_Watershed  #>               37  # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_classify_phosphorus.html","id":null,"dir":"Reference","previous_headings":"","what":"Classify Agricultural Phosphorus Status — agri_classify_phosphorus","title":"Classify Agricultural Phosphorus Status — agri_classify_phosphorus","text":"Classify spatial units based phosphorus balance (efficiency factor P)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_classify_phosphorus.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Classify Agricultural Phosphorus Status — agri_classify_phosphorus","text":"","code":"agri_classify_phosphorus(data, cropland_threshold, scale = \"huc8\")"},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_classify_phosphorus.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Classify Agricultural Phosphorus Status — agri_classify_phosphorus","text":"data Data frame processed agricultural data cropland_threshold Numeric. Threshold excluding small cropland areas scale Character. Spatial scale within-unit classification","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_classify_phosphorus.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Classify Agricultural Phosphorus Status — agri_classify_phosphorus","text":"Data frame phosphorus classification added","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_classify_phosphorus_custom.html","id":null,"dir":"Reference","previous_headings":"","what":"Classify Agricultural Phosphorus Status with Custom Efficiency Factor — agri_classify_phosphorus_custom","title":"Classify Agricultural Phosphorus Status with Custom Efficiency Factor — agri_classify_phosphorus_custom","text":"Classify spatial units based phosphorus balance user-specified efficiency factor. standard phosphorus classification uses 100\\ allows sensitivity analysis varying phosphorus efficiency assumption different management scenarios application methods.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_classify_phosphorus_custom.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Classify Agricultural Phosphorus Status with Custom Efficiency Factor — agri_classify_phosphorus_custom","text":"","code":"agri_classify_phosphorus_custom(   data,   cropland_threshold,   scale = \"huc8\",   p_efficiency = 1 )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_classify_phosphorus_custom.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Classify Agricultural Phosphorus Status with Custom Efficiency Factor — agri_classify_phosphorus_custom","text":"data Data frame processed agricultural data cropland_threshold Numeric. Threshold excluding small cropland areas scale Character. Spatial scale within-unit classification p_efficiency Numeric. Phosphorus efficiency factor (default: 1.0, range: 0-1)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_classify_phosphorus_custom.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Classify Agricultural Phosphorus Status with Custom Efficiency Factor — agri_classify_phosphorus_custom","text":"Data frame phosphorus classification added","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_classify_phosphorus_custom.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Classify Agricultural Phosphorus Status with Custom Efficiency Factor — agri_classify_phosphorus_custom","text":"","code":"# \\donttest{ # Load and process data first nugis_data <- load_builtin_nugis(\"county\", 2016) #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2016 #> Number of spatial units: 3058 processed_data <- agri_process_nugis(nugis_data, \"county\") #> Processed NuGIS data for county scale: #>   Spatial units: 3058 #>   Converted P2O5 to P using factor: 0.436 cropland_threshold <- 500 * 2.47105  # 500 ha in acres  # Standard analysis with default 1.0 efficiency (100%) results_default <- agri_classify_phosphorus_custom(   processed_data, cropland_threshold = cropland_threshold, p_efficiency = 1.0 ) #> Phosphorus classification summary (efficiency = 1): #>   Excluded: 158 units #>   Sink_Deficit: 1891 units #>   Sink_Fertilizer: 372 units #>   Source: 317 units #>   Within_Watershed: 320 units  # Analysis with reduced efficiency (e.g., accounting for losses) results_reduced <- agri_classify_phosphorus_custom(   processed_data, cropland_threshold = cropland_threshold, p_efficiency = 0.8 ) #> Using custom phosphorus efficiency factor: 0.8 #>   Standard factor is 1.0 (100% efficiency) #>   Your factor represents 80% efficiency #> Phosphorus classification summary (efficiency = 0.8): #>   Excluded: 158 units #>   Sink_Deficit: 2187 units #>   Sink_Fertilizer: 232 units #>   Source: 255 units #>   Within_Watershed: 226 units  # Conservative analysis with lower efficiency results_conservative <- agri_classify_phosphorus_custom(   processed_data, cropland_threshold = cropland_threshold, p_efficiency = 0.6 ) #> Using custom phosphorus efficiency factor: 0.6 #>   Standard factor is 1.0 (100% efficiency) #>   Your factor represents 60% efficiency #> Phosphorus classification summary (efficiency = 0.6): #>   Excluded: 158 units #>   Sink_Deficit: 2444 units #>   Sink_Fertilizer: 119 units #>   Source: 198 units #>   Within_Watershed: 139 units  # Compare classification changes across efficiency scenarios table(results_default$P_class) #>  #>         Excluded     Sink_Deficit  Sink_Fertilizer           Source  #>              158             1891              372              317  #> Within_Watershed  #>              320  table(results_reduced$P_class) #>  #>         Excluded     Sink_Deficit  Sink_Fertilizer           Source  #>              158             2187              232              255  #> Within_Watershed  #>              226  table(results_conservative$P_class) #>  #>         Excluded     Sink_Deficit  Sink_Fertilizer           Source  #>              158             2444              119              198  #> Within_Watershed  #>              139  # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_process_nugis.html","id":null,"dir":"Reference","previous_headings":"","what":"Process NuGIS Data for Manureshed Analysis — agri_process_nugis","title":"Process NuGIS Data for Manureshed Analysis — agri_process_nugis","text":"Clean standardize NuGIS data agricultural nutrient analysis","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_process_nugis.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Process NuGIS Data for Manureshed Analysis — agri_process_nugis","text":"","code":"agri_process_nugis(nugis_data, scale)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_process_nugis.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Process NuGIS Data for Manureshed Analysis — agri_process_nugis","text":"nugis_data Data frame. Raw NuGIS data specified year scale Character. Spatial scale: \"county\", \"huc8\", \"huc2\"","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/agri_process_nugis.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Process NuGIS Data for Manureshed Analysis — agri_process_nugis","text":"Data frame standardized columns analysis","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/batch_analysis_enhanced.html","id":null,"dir":"Reference","previous_headings":"","what":"Enhanced Batch Analysis with Full Visualizations — batch_analysis_enhanced","title":"Enhanced Batch Analysis with Full Visualizations — batch_analysis_enhanced","text":"Run batch analysis comprehensive visualization output year","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/batch_analysis_enhanced.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Enhanced Batch Analysis with Full Visualizations — batch_analysis_enhanced","text":"","code":"batch_analysis_enhanced(   years,   scale = \"huc8\",   nutrients = c(\"nitrogen\", \"phosphorus\"),   include_wwtp = TRUE,   output_base_dir = tempdir(),   create_all_visualizations = TRUE,   create_comparative_plots = TRUE,   show_progress = TRUE,   verbose = TRUE,   ... )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/batch_analysis_enhanced.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Enhanced Batch Analysis with Full Visualizations — batch_analysis_enhanced","text":"years Numeric vector. Years analyze scale Character. Spatial scale nutrients Character vector. Nutrients analyze include_wwtp Logical. Include WWTP analysis output_base_dir Character. Base output directory create_all_visualizations Logical. Create maps, networks, comparisons create_comparative_plots Logical. Create year--year comparisons show_progress Logical. Display progress bar (requires 'progress' package) verbose Logical. Show progress ... Additional arguments","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/batch_analysis_enhanced.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Enhanced Batch Analysis with Full Visualizations — batch_analysis_enhanced","text":"List results comprehensive outputs","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/batch_analysis_enhanced.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Enhanced Batch Analysis with Full Visualizations — batch_analysis_enhanced","text":"","code":"if (FALSE) { # \\dontrun{ # This function is computationally intensive # See vignette(\"advanced-features\") for examples results <- batch_analysis_enhanced(years = 2015:2016) } # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/batch_analysis_parallel.html","id":null,"dir":"Reference","previous_headings":"","what":"Batch Analysis with Parallel Processing — batch_analysis_parallel","title":"Batch Analysis with Parallel Processing — batch_analysis_parallel","text":"Run batch analysis using multiple cores faster processing","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/batch_analysis_parallel.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Batch Analysis with Parallel Processing — batch_analysis_parallel","text":"","code":"batch_analysis_parallel(years, n_cores = NULL, ...)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/batch_analysis_parallel.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Batch Analysis with Parallel Processing — batch_analysis_parallel","text":"years Numeric vector. Years analyze n_cores Integer. Number cores (default: detectCores() - 1) ... Arguments passed run_builtin_analysis","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/batch_analysis_parallel.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Batch Analysis with Parallel Processing — batch_analysis_parallel","text":"List results","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/batch_analysis_parallel.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Batch Analysis with Parallel Processing — batch_analysis_parallel","text":"","code":"# \\donttest{ results <- batch_analysis_parallel(   years = 2015:2016,  # Use valid years only   n_cores = 2,        # Max 2 cores for CRAN   scale = \"county\",   # Use county for faster processing   nutrients = \"nitrogen\" ) #> Starting parallel batch analysis with 2 cores #> Processing 2 years #>  #> Parallel processing complete: #>   Successful: 2/2 # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/batch_analysis_years.html","id":null,"dir":"Reference","previous_headings":"","what":"Batch Analysis Across Multiple Years — batch_analysis_years","title":"Batch Analysis Across Multiple Years — batch_analysis_years","text":"Run manureshed analysis across multiple years consistent parameters","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/batch_analysis_years.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Batch Analysis Across Multiple Years — batch_analysis_years","text":"","code":"batch_analysis_years(   years,   scale = \"huc8\",   nutrients = c(\"nitrogen\", \"phosphorus\"),   include_wwtp = TRUE,   output_base_dir = tempdir(),   create_comparative_plots = TRUE,   verbose = TRUE,   ... )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/batch_analysis_years.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Batch Analysis Across Multiple Years — batch_analysis_years","text":"years Numeric vector. Years analyze scale Character. Spatial scale: \"county\", \"huc8\", \"huc2\" nutrients Character vector. Nutrients analyze include_wwtp Logical. Whether include WWTP (available 2007-2016 built-) output_base_dir Character. Base output directory create_comparative_plots Logical. Whether create year--year comparisons verbose Logical. Whether print progress ... Additional arguments passed run_builtin_analysis","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/batch_analysis_years.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Batch Analysis Across Multiple Years — batch_analysis_years","text":"List results year","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/batch_analysis_years.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Batch Analysis Across Multiple Years — batch_analysis_years","text":"","code":"# \\donttest{ # Analyze trends with WWTP for subset of supported range batch_results <- batch_analysis_years(   years = 2010:2012,  # Use smaller range for examples   scale = \"huc8\",   nutrients = \"nitrogen\",   include_wwtp = TRUE ) #>  #> ====================================================================== #> BATCH MANURESHED ANALYSIS #> ====================================================================== #> Years:2010-2012(3years) #> Scale:huc8 #> Nutrients:nitrogen #> ---------------------------------------------------------------------- #>  #> Processing year2010... #> Using cached version of nugis_huc8_data #> Loaded NuGIS huc8 data for year 2010 #> Number of spatial units: 2111 #> Using cached version of huc8_boundaries #> Loaded huc8 boundaries #> Number of spatial units: 2132 #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2010 #> Number of spatial units: 3064 #> Calculated cropland threshold: #>   County baseline: 500 ha (1235.53 acres) #>   Percentile in county data: 4.73% #>   Threshold for target scale: 1506.14 acres #> Starting complete agricultural classification for huc8 scale... #> Processed NuGIS data for huc8 scale: #>   Spatial units: 2111 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 100 units #>   Sink_Deficit: 1631 units #>   Sink_Fertilizer: 215 units #>   Source: 30 units #>   Within_Watershed: 135 units #> Phosphorus classification summary: #>   Excluded: 100 units #>   Sink_Deficit: 1191 units #>   Sink_Fertilizer: 309 units #>   Source: 206 units #>   Within_Watershed: 305 units #> Agricultural classification complete! #> Applied threshold: 1506.14 acres #> Using cached version of wwtp_nitrogen_combined #> Loaded WWTP nitrogen data for year 2010 #> Number of facilities: 24727 #> Filtered for positive nitrogen loads: #>   Original: 24727 facilities #>   With positive loads: 24727 facilities #> WWTP nitrogen source classification: #>   Minor Source: 20327 facilities #>   Small Source: 2445 facilities #>   Medium Source: 987 facilities #>   Large Source: 745 facilities #>   Very Large Source: 223 facilities #> Created spatial WWTP data with 24727 facilities #> Looking for boundary ID column: 'huc8' #> Available columns in boundaries: huc8, name, geometry, areasqkm #> Aggregating WWTP nitrogen loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 24727 #>   Spatial units with facilities: 1368 #>   Total nitrogen load: 2009131.37 tons/year #> Integrating WWTP nitrogen data with agricultural classifications... #> Using agricultural ID column: huc8 #> Combined nitrogen classification summary: #>   Excluded: 102 units #>   Sink_Deficit: 1570 units #>   Sink_Fertilizer: 198 units #>   Source: 93 units #>   Within_Watershed: 169 units #> Saved spatial data to: /tmp/Rtmp0dSqZ3/year_2010/huc8_agricultural_2010.rds #> File size: 7.11 MB #> Rows: 2132, Columns: 17 #> Geometry type: MULTIPOLYGON #> CRS: EPSG:5070 #> Saved spatial data to: /tmp/Rtmp0dSqZ3/year_2010/huc8_nitrogen_integrated_2010.rds #> File size: 7.15 MB #> Rows: 2132, Columns: 23 #> Geometry type: MULTIPOLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/year_2010/huc8_nitrogen_centroids_2010.csv #> File size: 562.84 KB #> Rows: 2132, Columns: 24 #> Longitude range: [-124.345, -67.71] #> Latitude range: [25.201, 48.988] #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/year_2010/analysis_summary_2010.rds #> Format: RDS #> File size: 0.71 KB #>   Year2010complete (2132 units) #> Processing year2011... #> Using cached version of nugis_huc8_data #> Loaded NuGIS huc8 data for year 2011 #> Number of spatial units: 2111 #> Using cached version of huc8_boundaries #> Loaded huc8 boundaries #> Number of spatial units: 2132 #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2011 #> Number of spatial units: 3064 #> Calculated cropland threshold: #>   County baseline: 500 ha (1235.53 acres) #>   Percentile in county data: 5.22% #>   Threshold for target scale: 1547.43 acres #> Starting complete agricultural classification for huc8 scale... #> Processed NuGIS data for huc8 scale: #>   Spatial units: 2111 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 111 units #>   Sink_Deficit: 1572 units #>   Sink_Fertilizer: 264 units #>   Source: 31 units #>   Within_Watershed: 133 units #> Phosphorus classification summary: #>   Excluded: 111 units #>   Sink_Deficit: 1037 units #>   Sink_Fertilizer: 375 units #>   Source: 213 units #>   Within_Watershed: 375 units #> Agricultural classification complete! #> Applied threshold: 1547.43 acres #> Using cached version of wwtp_nitrogen_combined #> Loaded WWTP nitrogen data for year 2011 #> Number of facilities: 25745 #> Filtered for positive nitrogen loads: #>   Original: 25745 facilities #>   With positive loads: 25745 facilities #> WWTP nitrogen source classification: #>   Minor Source: 20989 facilities #>   Small Source: 2604 facilities #>   Medium Source: 1114 facilities #>   Large Source: 808 facilities #>   Very Large Source: 230 facilities #> Created spatial WWTP data with 25745 facilities #> Looking for boundary ID column: 'huc8' #> Available columns in boundaries: huc8, name, geometry, areasqkm #> Aggregating WWTP nitrogen loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 25745 #>   Spatial units with facilities: 1397 #>   Total nitrogen load: 1163190.5 tons/year #> Integrating WWTP nitrogen data with agricultural classifications... #> Using agricultural ID column: huc8 #> Combined nitrogen classification summary: #>   Excluded: 113 units #>   Sink_Deficit: 1501 units #>   Sink_Fertilizer: 248 units #>   Source: 95 units #>   Within_Watershed: 175 units #> Saved spatial data to: /tmp/Rtmp0dSqZ3/year_2011/huc8_agricultural_2011.rds #> File size: 7.11 MB #> Rows: 2132, Columns: 17 #> Geometry type: MULTIPOLYGON #> CRS: EPSG:5070 #> Saved spatial data to: /tmp/Rtmp0dSqZ3/year_2011/huc8_nitrogen_integrated_2011.rds #> File size: 7.15 MB #> Rows: 2132, Columns: 23 #> Geometry type: MULTIPOLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/year_2011/huc8_nitrogen_centroids_2011.csv #> File size: 564.36 KB #> Rows: 2132, Columns: 24 #> Longitude range: [-124.345, -67.71] #> Latitude range: [25.201, 48.988] #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/year_2011/analysis_summary_2011.rds #> Format: RDS #> File size: 0.72 KB #>   Year2011complete (2132 units) #> Processing year2012... #> Using cached version of nugis_huc8_data #> Loaded NuGIS huc8 data for year 2012 #> Number of spatial units: 2111 #> Using cached version of huc8_boundaries #> Loaded huc8 boundaries #> Number of spatial units: 2132 #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2012 #> Number of spatial units: 3064 #> Calculated cropland threshold: #>   County baseline: 500 ha (1235.53 acres) #>   Percentile in county data: 5.32% #>   Threshold for target scale: 1731.65 acres #> Starting complete agricultural classification for huc8 scale... #> Processed NuGIS data for huc8 scale: #>   Spatial units: 2111 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 113 units #>   Sink_Deficit: 1494 units #>   Sink_Fertilizer: 340 units #>   Source: 26 units #>   Within_Watershed: 138 units #> Phosphorus classification summary: #>   Excluded: 113 units #>   Sink_Deficit: 1073 units #>   Sink_Fertilizer: 402 units #>   Source: 197 units #>   Within_Watershed: 326 units #> Agricultural classification complete! #> Applied threshold: 1731.65 acres #> Using cached version of wwtp_nitrogen_combined #> Loaded WWTP nitrogen data for year 2012 #> Number of facilities: 26971 #> Filtered for positive nitrogen loads: #>   Original: 26971 facilities #>   With positive loads: 26971 facilities #> WWTP nitrogen source classification: #>   Minor Source: 22348 facilities #>   Small Source: 2555 facilities #>   Medium Source: 1052 facilities #>   Large Source: 803 facilities #>   Very Large Source: 213 facilities #> Created spatial WWTP data with 26971 facilities #> Looking for boundary ID column: 'huc8' #> Available columns in boundaries: huc8, name, geometry, areasqkm #> Aggregating WWTP nitrogen loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 26971 #>   Spatial units with facilities: 1403 #>   Total nitrogen load: 1069082.41 tons/year #> Integrating WWTP nitrogen data with agricultural classifications... #> Using agricultural ID column: huc8 #> Combined nitrogen classification summary: #>   Excluded: 115 units #>   Sink_Deficit: 1436 units #>   Sink_Fertilizer: 323 units #>   Source: 91 units #>   Within_Watershed: 167 units #> Saved spatial data to: /tmp/Rtmp0dSqZ3/year_2012/huc8_agricultural_2012.rds #> File size: 7.11 MB #> Rows: 2132, Columns: 17 #> Geometry type: MULTIPOLYGON #> CRS: EPSG:5070 #> Saved spatial data to: /tmp/Rtmp0dSqZ3/year_2012/huc8_nitrogen_integrated_2012.rds #> File size: 7.15 MB #> Rows: 2132, Columns: 23 #> Geometry type: MULTIPOLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/year_2012/huc8_nitrogen_centroids_2012.csv #> File size: 565.05 KB #> Rows: 2132, Columns: 24 #> Longitude range: [-124.345, -67.71] #> Latitude range: [25.201, 48.988] #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/year_2012/analysis_summary_2012.rds #> Format: RDS #> File size: 0.72 KB #>   Year2012complete (2132 units) #>  #> Creating comparative visualizations... #> Saved plot to: /tmp/Rtmp0dSqZ3/trend_nitrogen_2010_2012.png #> Dimensions: 12 x 8 in at 300 DPI #> File size: 117.38 KB #> Device: png #>   Creatednitrogentrend plot #>  #> ====================================================================== #> BATCH ANALYSIS COMPLETE #> ====================================================================== #> Years processed:3/3 #> Scale:huc8 #> Output directory:/tmp/Rtmp0dSqZ3 #> Comparative plots: Created #> Batch summary:batch_summary.rds #> ======================================================================  # Historical analysis without WWTP historical_results <- batch_analysis_years(   years = 1990:1992,  # Use smaller range   scale = \"county\",   nutrients = c(\"nitrogen\", \"phosphorus\"),   include_wwtp = FALSE ) #>  #> ====================================================================== #> BATCH MANURESHED ANALYSIS #> ====================================================================== #> Years:1990-1992(3years) #> Scale:county #> Nutrients:nitrogen, phosphorus #> ---------------------------------------------------------------------- #>  #> Processing year1990... #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 1990 #> Number of spatial units: 3064 #> Using cached version of county_boundaries #> Loaded county boundaries #> Number of spatial units: 3112 #> Starting complete agricultural classification for county scale... #> Processed NuGIS data for county scale: #>   Spatial units: 3064 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 119 units #>   Sink_Deficit: 1984 units #>   Sink_Fertilizer: 674 units #>   Source: 115 units #>   Within_County: 172 units #> Phosphorus classification summary: #>   Excluded: 119 units #>   Sink_Deficit: 1060 units #>   Sink_Fertilizer: 1125 units #>   Source: 417 units #>   Within_County: 343 units #> Agricultural classification complete! #> Applied threshold: 1235.53 acres #> Saved spatial data to: /tmp/Rtmp0dSqZ3/year_1990/county_agricultural_1990.rds #> File size: 1.03 MB #> Rows: 3112, Columns: 17 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/year_1990/analysis_summary_1990.rds #> Format: RDS #> File size: 0.5 KB #>   Year1990complete (3112 units) #> Processing year1991... #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 1991 #> Number of spatial units: 3064 #> Using cached version of county_boundaries #> Loaded county boundaries #> Number of spatial units: 3112 #> Starting complete agricultural classification for county scale... #> Processed NuGIS data for county scale: #>   Spatial units: 3064 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 119 units #>   Sink_Deficit: 1966 units #>   Sink_Fertilizer: 649 units #>   Source: 107 units #>   Within_County: 223 units #> Phosphorus classification summary: #>   Excluded: 119 units #>   Sink_Deficit: 1041 units #>   Sink_Fertilizer: 1105 units #>   Source: 401 units #>   Within_County: 398 units #> Agricultural classification complete! #> Applied threshold: 1235.53 acres #> Saved spatial data to: /tmp/Rtmp0dSqZ3/year_1991/county_agricultural_1991.rds #> File size: 1.04 MB #> Rows: 3112, Columns: 17 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/year_1991/analysis_summary_1991.rds #> Format: RDS #> File size: 0.5 KB #>   Year1991complete (3112 units) #> Processing year1992... #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 1992 #> Number of spatial units: 3064 #> Using cached version of county_boundaries #> Loaded county boundaries #> Number of spatial units: 3112 #> Starting complete agricultural classification for county scale... #> Processed NuGIS data for county scale: #>   Spatial units: 3064 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 126 units #>   Sink_Deficit: 2196 units #>   Sink_Fertilizer: 445 units #>   Source: 99 units #>   Within_County: 198 units #> Phosphorus classification summary: #>   Excluded: 126 units #>   Sink_Deficit: 1221 units #>   Sink_Fertilizer: 963 units #>   Source: 380 units #>   Within_County: 374 units #> Agricultural classification complete! #> Applied threshold: 1235.53 acres #> Saved spatial data to: /tmp/Rtmp0dSqZ3/year_1992/county_agricultural_1992.rds #> File size: 1.03 MB #> Rows: 3112, Columns: 17 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/year_1992/analysis_summary_1992.rds #> Format: RDS #> File size: 0.5 KB #>   Year1992complete (3112 units) #>  #> Creating comparative visualizations... #> Saved plot to: /tmp/Rtmp0dSqZ3/trend_nitrogen_1990_1992.png #> Dimensions: 12 x 8 in at 300 DPI #> File size: 126.69 KB #> Device: png #>   Creatednitrogentrend plot #> Saved plot to: /tmp/Rtmp0dSqZ3/trend_phosphorus_1990_1992.png #> Dimensions: 12 x 8 in at 300 DPI #> File size: 142.99 KB #> Device: png #>   Createdphosphorustrend plot #>  #> ====================================================================== #> BATCH ANALYSIS COMPLETE #> ====================================================================== #> Years processed:3/3 #> Scale:county #> Output directory:/tmp/Rtmp0dSqZ3 #> Comparative plots: Created #> Batch summary:batch_summary.rds #> ======================================================================  # Mixed analysis: some years with WWTP, some without mixed_results <- batch_analysis_years(   years = c(2005, 2010, 2015),  # 2010,2015 will have WWTP   scale = \"huc8\",   nutrients = \"nitrogen\",   include_wwtp = TRUE  # Will only apply to 2010,2015 ) #>  #> ====================================================================== #> BATCH MANURESHED ANALYSIS #> ====================================================================== #> Years:2005-2015(3years) #> Scale:huc8 #> Nutrients:nitrogen #> ---------------------------------------------------------------------- #>  #> Processing year2005... #>   Note: WWTP analysis skipped for2005(built-in data only available for 2007-2016) #> Using cached version of nugis_huc8_data #> Loaded NuGIS huc8 data for year 2005 #> Number of spatial units: 2111 #> Using cached version of huc8_boundaries #> Loaded huc8 boundaries #> Number of spatial units: 2132 #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2005 #> Number of spatial units: 3064 #> Calculated cropland threshold: #>   County baseline: 500 ha (1235.53 acres) #>   Percentile in county data: 4.5% #>   Threshold for target scale: 1214.18 acres #> Starting complete agricultural classification for huc8 scale... #> Processed NuGIS data for huc8 scale: #>   Spatial units: 2111 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 96 units #>   Sink_Deficit: 1572 units #>   Sink_Fertilizer: 273 units #>   Source: 32 units #>   Within_Watershed: 138 units #> Phosphorus classification summary: #>   Excluded: 96 units #>   Sink_Deficit: 952 units #>   Sink_Fertilizer: 549 units #>   Source: 219 units #>   Within_Watershed: 295 units #> Agricultural classification complete! #> Applied threshold: 1214.18 acres #> Saved spatial data to: /tmp/Rtmp0dSqZ3/year_2005/huc8_agricultural_2005.rds #> File size: 7.11 MB #> Rows: 2132, Columns: 17 #> Geometry type: MULTIPOLYGON #> CRS: EPSG:5070 #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/year_2005/analysis_summary_2005.rds #> Format: RDS #> File size: 0.52 KB #>   Year2005complete (2132 units) #> Processing year2010... #> Using cached version of nugis_huc8_data #> Loaded NuGIS huc8 data for year 2010 #> Number of spatial units: 2111 #> Using cached version of huc8_boundaries #> Loaded huc8 boundaries #> Number of spatial units: 2132 #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2010 #> Number of spatial units: 3064 #> Calculated cropland threshold: #>   County baseline: 500 ha (1235.53 acres) #>   Percentile in county data: 4.73% #>   Threshold for target scale: 1506.14 acres #> Starting complete agricultural classification for huc8 scale... #> Processed NuGIS data for huc8 scale: #>   Spatial units: 2111 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 100 units #>   Sink_Deficit: 1631 units #>   Sink_Fertilizer: 215 units #>   Source: 30 units #>   Within_Watershed: 135 units #> Phosphorus classification summary: #>   Excluded: 100 units #>   Sink_Deficit: 1191 units #>   Sink_Fertilizer: 309 units #>   Source: 206 units #>   Within_Watershed: 305 units #> Agricultural classification complete! #> Applied threshold: 1506.14 acres #> Using cached version of wwtp_nitrogen_combined #> Loaded WWTP nitrogen data for year 2010 #> Number of facilities: 24727 #> Filtered for positive nitrogen loads: #>   Original: 24727 facilities #>   With positive loads: 24727 facilities #> WWTP nitrogen source classification: #>   Minor Source: 20327 facilities #>   Small Source: 2445 facilities #>   Medium Source: 987 facilities #>   Large Source: 745 facilities #>   Very Large Source: 223 facilities #> Created spatial WWTP data with 24727 facilities #> Looking for boundary ID column: 'huc8' #> Available columns in boundaries: huc8, name, geometry, areasqkm #> Aggregating WWTP nitrogen loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 24727 #>   Spatial units with facilities: 1368 #>   Total nitrogen load: 2009131.37 tons/year #> Integrating WWTP nitrogen data with agricultural classifications... #> Using agricultural ID column: huc8 #> Combined nitrogen classification summary: #>   Excluded: 102 units #>   Sink_Deficit: 1570 units #>   Sink_Fertilizer: 198 units #>   Source: 93 units #>   Within_Watershed: 169 units #> Saved spatial data to: /tmp/Rtmp0dSqZ3/year_2010/huc8_agricultural_2010.rds #> File size: 7.11 MB #> Rows: 2132, Columns: 17 #> Geometry type: MULTIPOLYGON #> CRS: EPSG:5070 #> Saved spatial data to: /tmp/Rtmp0dSqZ3/year_2010/huc8_nitrogen_integrated_2010.rds #> File size: 7.15 MB #> Rows: 2132, Columns: 23 #> Geometry type: MULTIPOLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/year_2010/huc8_nitrogen_centroids_2010.csv #> File size: 562.84 KB #> Rows: 2132, Columns: 24 #> Longitude range: [-124.345, -67.71] #> Latitude range: [25.201, 48.988] #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/year_2010/analysis_summary_2010.rds #> Format: RDS #> File size: 0.72 KB #>   Year2010complete (2132 units) #> Processing year2015... #> Using cached version of nugis_huc8_data #> Loaded NuGIS huc8 data for year 2015 #> Number of spatial units: 2111 #> Using cached version of huc8_boundaries #> Loaded huc8 boundaries #> Number of spatial units: 2132 #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2015 #> Number of spatial units: 3064 #> Calculated cropland threshold: #>   County baseline: 500 ha (1235.53 acres) #>   Percentile in county data: 5.32% #>   Threshold for target scale: 1584.43 acres #> Starting complete agricultural classification for huc8 scale... #> Processed NuGIS data for huc8 scale: #>   Spatial units: 2111 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 113 units #>   Sink_Deficit: 1665 units #>   Sink_Fertilizer: 189 units #>   Source: 27 units #>   Within_Watershed: 117 units #> Phosphorus classification summary: #>   Excluded: 113 units #>   Sink_Deficit: 1228 units #>   Sink_Fertilizer: 271 units #>   Source: 205 units #>   Within_Watershed: 294 units #> Agricultural classification complete! #> Applied threshold: 1584.43 acres #> Using cached version of wwtp_nitrogen_combined #> Loaded WWTP nitrogen data for year 2015 #> Number of facilities: 30394 #> Filtered for positive nitrogen loads: #>   Original: 30394 facilities #>   With positive loads: 30394 facilities #> WWTP nitrogen source classification: #>   Minor Source: 25261 facilities #>   Small Source: 2989 facilities #>   Medium Source: 1154 facilities #>   Large Source: 812 facilities #>   Very Large Source: 178 facilities #> Created spatial WWTP data with 30394 facilities #> Looking for boundary ID column: 'huc8' #> Available columns in boundaries: huc8, name, geometry, areasqkm #> Aggregating WWTP nitrogen loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 30394 #>   Spatial units with facilities: 1441 #>   Total nitrogen load: 1141908.76 tons/year #> Integrating WWTP nitrogen data with agricultural classifications... #> Using agricultural ID column: huc8 #> Combined nitrogen classification summary: #>   Excluded: 115 units #>   Sink_Deficit: 1595 units #>   Sink_Fertilizer: 170 units #>   Source: 97 units #>   Within_Watershed: 155 units #> Saved spatial data to: /tmp/Rtmp0dSqZ3/year_2015/huc8_agricultural_2015.rds #> File size: 7.11 MB #> Rows: 2132, Columns: 17 #> Geometry type: MULTIPOLYGON #> CRS: EPSG:5070 #> Saved spatial data to: /tmp/Rtmp0dSqZ3/year_2015/huc8_nitrogen_integrated_2015.rds #> File size: 7.15 MB #> Rows: 2132, Columns: 23 #> Geometry type: MULTIPOLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/year_2015/huc8_nitrogen_centroids_2015.csv #> File size: 564.87 KB #> Rows: 2132, Columns: 24 #> Longitude range: [-124.345, -67.71] #> Latitude range: [25.201, 48.988] #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/year_2015/analysis_summary_2015.rds #> Format: RDS #> File size: 0.72 KB #>   Year2015complete (2132 units) #>  #> Creating comparative visualizations... #> Saved plot to: /tmp/Rtmp0dSqZ3/trend_nitrogen_2005_2015.png #> Dimensions: 12 x 8 in at 300 DPI #> File size: 115.12 KB #> Device: png #>   Creatednitrogentrend plot #>  #> ====================================================================== #> BATCH ANALYSIS COMPLETE #> ====================================================================== #> Years processed:3/3 #> Scale:huc8 #> Output directory:/tmp/Rtmp0dSqZ3 #> Comparative plots: Created #> Batch summary:batch_summary.rds #> ====================================================================== # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/benchmark_analysis.html","id":null,"dir":"Reference","previous_headings":"","what":"Benchmark Analysis Performance — benchmark_analysis","title":"Benchmark Analysis Performance — benchmark_analysis","text":"Test analysis speed memory usage","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/benchmark_analysis.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Benchmark Analysis Performance — benchmark_analysis","text":"","code":"benchmark_analysis(   scale = \"huc8\",   year = 2016,   nutrients = \"nitrogen\",   n_runs = 3,   include_wwtp = TRUE )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/benchmark_analysis.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Benchmark Analysis Performance — benchmark_analysis","text":"scale Character. Spatial scale year Numeric. Year test nutrients Character vector. Nutrients analyze n_runs Integer. Number benchmark runs (default: 3) include_wwtp Logical. Include WWTP processing","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/benchmark_analysis.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Benchmark Analysis Performance — benchmark_analysis","text":"List timing statistics memory usage","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/benchmark_analysis.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Benchmark Analysis Performance — benchmark_analysis","text":"","code":"# \\donttest{ # Benchmark HUC8 analysis - use smaller scale for faster testing benchmark <- benchmark_analysis(   scale = \"county\",  # Use county for faster testing   year = 2016,   nutrients = \"nitrogen\",   n_runs = 2  # Reduce runs for faster testing ) #> Benchmarking analysis performance... #>   Scale: county #>   Year: 2016 #>   Runs: 2 #>  #> Run 1/2 #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2016 #> Number of spatial units: 3058 #> Using cached version of county_boundaries #> Loaded county boundaries #> Number of spatial units: 3112 #> Starting complete agricultural classification for county scale... #> Processed NuGIS data for county scale: #>   Spatial units: 3058 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 158 units #>   Sink_Deficit: 2450 units #>   Sink_Fertilizer: 214 units #>   Source: 83 units #>   Within_County: 153 units #> Phosphorus classification summary: #>   Excluded: 158 units #>   Sink_Deficit: 1891 units #>   Sink_Fertilizer: 372 units #>   Source: 317 units #>   Within_County: 320 units #> Agricultural classification complete! #> Applied threshold: 1235.53 acres #> Using cached version of wwtp_nitrogen_combined #> Loaded WWTP nitrogen data for year 2016 #> Number of facilities: 20846 #> Filtered for positive nitrogen loads: #>   Original: 20846 facilities #>   With positive loads: 20846 facilities #> WWTP nitrogen source classification: #>   Minor Source: 17801 facilities #>   Small Source: 1799 facilities #>   Medium Source: 729 facilities #>   Large Source: 417 facilities #>   Very Large Source: 100 facilities #> Created spatial WWTP data with 20846 facilities #> Looking for boundary ID column: 'FIPS' #> Available columns in boundaries: FIPS, County, State_Name, geometry #> Aggregating WWTP nitrogen loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 20846 #>   Spatial units with facilities: 2581 #>   Total nitrogen load: 582738.6 tons/year #> Integrating WWTP nitrogen data with agricultural classifications... #> Using agricultural ID column: FIPS #> Combined nitrogen classification summary: #>   Excluded: 212 units #>   Sink_Deficit: 2358 units #>   Sink_Fertilizer: 185 units #>   Source: 157 units #>   Within_County: 200 units #>  #> Run 2/2 #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2016 #> Number of spatial units: 3058 #> Using cached version of county_boundaries #> Loaded county boundaries #> Number of spatial units: 3112 #> Starting complete agricultural classification for county scale... #> Processed NuGIS data for county scale: #>   Spatial units: 3058 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 158 units #>   Sink_Deficit: 2450 units #>   Sink_Fertilizer: 214 units #>   Source: 83 units #>   Within_County: 153 units #> Phosphorus classification summary: #>   Excluded: 158 units #>   Sink_Deficit: 1891 units #>   Sink_Fertilizer: 372 units #>   Source: 317 units #>   Within_County: 320 units #> Agricultural classification complete! #> Applied threshold: 1235.53 acres #> Using cached version of wwtp_nitrogen_combined #> Loaded WWTP nitrogen data for year 2016 #> Number of facilities: 20846 #> Filtered for positive nitrogen loads: #>   Original: 20846 facilities #>   With positive loads: 20846 facilities #> WWTP nitrogen source classification: #>   Minor Source: 17801 facilities #>   Small Source: 1799 facilities #>   Medium Source: 729 facilities #>   Large Source: 417 facilities #>   Very Large Source: 100 facilities #> Created spatial WWTP data with 20846 facilities #> Looking for boundary ID column: 'FIPS' #> Available columns in boundaries: FIPS, County, State_Name, geometry #> Aggregating WWTP nitrogen loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 20846 #>   Spatial units with facilities: 2581 #>   Total nitrogen load: 582738.6 tons/year #> Integrating WWTP nitrogen data with agricultural classifications... #> Using agricultural ID column: FIPS #> Combined nitrogen classification summary: #>   Excluded: 212 units #>   Sink_Deficit: 2358 units #>   Sink_Fertilizer: 185 units #>   Source: 157 units #>   Within_County: 200 units print(benchmark) #> $scale #> [1] \"county\" #>  #> $year #> [1] 2016 #>  #> $nutrients #> [1] \"nitrogen\" #>  #> $include_wwtp #> [1] TRUE #>  #> $n_runs #> [1] 2 #>  #> $timing #> $timing$mean #> [1] 2.327268 #>  #> $timing$sd #> [1] 0.0480206 #>  #> $timing$min #> [1] 2.293313 #>  #> $timing$max #> [1] 2.361224 #>  #> $timing$median #> [1] 2.327268 #>  #> $timing$all_runs #> [1] 2.361224 2.293313 #>  #>  #> $memory_mb #> $memory_mb$mean #> [1] 11.8 #>  #> $memory_mb$max #> [1] 11.8 #>  #> $memory_mb$all_runs #> [1] 11.8 11.8 #>  #>  #> $timestamp #> [1] \"2026-01-27 20:14:51 EST\" #>  #> attr(,\"class\") #> [1] \"manureshed_benchmark\" \"list\"                 # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/calculate_cropland_threshold.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Cropland Threshold for Exclusion — calculate_cropland_threshold","title":"Calculate Cropland Threshold for Exclusion — calculate_cropland_threshold","text":"Calculate cropland threshold excluding small agricultural areas Uses county 500ha baseline determine percentile scales","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/calculate_cropland_threshold.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Cropland Threshold for Exclusion — calculate_cropland_threshold","text":"","code":"calculate_cropland_threshold(   county_data,   target_data,   county_cropland_col,   target_cropland_col,   baseline_ha = 500 )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/calculate_cropland_threshold.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Cropland Threshold for Exclusion — calculate_cropland_threshold","text":"county_data Data frame. County-level NuGIS data cropland column target_data Data frame. Target scale data (HUC8, HUC2) cropland column county_cropland_col Character. Name cropland column county data target_cropland_col Character. Name cropland column target data baseline_ha Numeric. Baseline cropland hectares exclusion (default: 500)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/calculate_cropland_threshold.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Cropland Threshold for Exclusion — calculate_cropland_threshold","text":"Numeric. Threshold value target scale","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/calculate_transition_probabilities.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Spatial Transition Probabilities — calculate_transition_probabilities","title":"Calculate Spatial Transition Probabilities — calculate_transition_probabilities","text":"Calculate transition probabilities adjacent spatial units","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/calculate_transition_probabilities.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Spatial Transition Probabilities — calculate_transition_probabilities","text":"","code":"calculate_transition_probabilities(   data,   class_column,   longitude_col = \"longitude\",   latitude_col = \"latitude\" )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/calculate_transition_probabilities.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Spatial Transition Probabilities — calculate_transition_probabilities","text":"data Data frame. Data classification coordinate columns class_column Character. Name classification column longitude_col Character. Name longitude column (default: \"longitude\") latitude_col Character. Name latitude column (default: \"latitude\")","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/calculate_transition_probabilities.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Spatial Transition Probabilities — calculate_transition_probabilities","text":"Data frame transition probabilities percentages","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/check_builtin_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Check Data Availability from OSF — check_builtin_data","title":"Check Data Availability from OSF — check_builtin_data","text":"Check Data Availability OSF","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/check_builtin_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check Data Availability from OSF — check_builtin_data","text":"","code":"check_builtin_data(verbose = FALSE)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/check_builtin_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check Data Availability from OSF — check_builtin_data","text":"verbose Logical. Show detailed information cache status","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/check_builtin_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check Data Availability from OSF — check_builtin_data","text":"List showing available datasets cache status","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/citation_info.html","id":null,"dir":"Reference","previous_headings":"","what":"Display Package Citation Information — citation_info","title":"Display Package Citation Information — citation_info","text":"Provides citation information package data sources. Prints formatted citation text console manureshed package, underlying research methodology paper (Akanbi et al., 2026), primary data sources (NuGIS agricultural data EPA WWTP discharge data). function designed users easily obtain proper citations publications reports.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/citation_info.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Display Package Citation Information — citation_info","text":"","code":"citation_info()"},{"path":"https://exelegch.github.io/manureshed-docs/reference/citation_info.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Display Package Citation Information — citation_info","text":"return value, called side effects. function prints citation information console including: Package citation version OSF repository Research methodology paper citation NuGIS data source attribution EPA WWTP data source attribution Contact information data sources","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/citation_info.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Display Package Citation Information — citation_info","text":"function takes arguments. prints citation information directly console using message() functions, can suppressed suppressMessages() needed.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/citation_info.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Display Package Citation Information — citation_info","text":"function requires arguments can called simply citation_info().","code":""},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/reference/citation_info.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Display Package Citation Information — citation_info","text":"","code":"# \\donttest{ # Display citation information citation_info() #> To cite the manureshed package in publications, use: #> Akanbi, O. D.; Mandayam, V.; Gupta, A.; Flynn, K. C.; Yarus, J. M.; #> Barcelos, E. I.; & French, R. H. (2025). #> manureshed: An Open-Source R Package for Scalable Temporal and Multi-Regional #> Analysis of Integrated Agricultural-Municipal Nutrient Flows. #> R package version 0.1.2. #> OSF Repository: https://osf.io/g39xa/ #> For the underlying research methodology, cite: #> Akanbi, O. D.; Gupta, A.; Mandayam, V.; Flynn, K. C.; Yarus, J. M.; #> Barcelos, E. I.; French, R. H. Towards Circular Nutrient Economies: An Integrated #> Manureshed Framework for Agricultural and Municipal Resource Management. #> Resources, Conservation and Recycling, 2025. https://doi.org/10.1016/j.resconrec.2025.108697 #> ====================================================================== #> DATA SOURCES #> ====================================================================== #> NuGIS Agricultural Data (1987-2016): #>   NuGIS (Nutrient Use Geographic Information System). #>   The Fertilizer Institute (TFI) and Plant Nutrition Canada (PNC). #>   Available at: https://nugis.tfi.org/tabular_data #>    #>   Note: The manureshed package uses cleaned and quality-controlled #>   versions of NuGIS data, with resolved metadata issues and enhanced #>   spatial integration, as described in Akanbi et al. (2025). #> EPA WWTP Discharge Data (2007-2016): #>   U.S. Environmental Protection Agency (EPA). #>   Discharge Monitoring Report (DMR) Loading Tool. #>   Enforcement and Compliance History Online (ECHO). #>   Available at: https://echo.epa.gov/trends/loading-tool/water-pollution-search #> For questions about data usage and attribution, contact: #>   NuGIS: nugis@tfi.org #>   Package: olatunde.akanbi@case.edu # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/clean_category_names.html","id":null,"dir":"Reference","previous_headings":"","what":"Clean Category Names for Display — clean_category_names","title":"Clean Category Names for Display — clean_category_names","text":"Clean Category Names Display","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/clean_category_names.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clean Category Names for Display — clean_category_names","text":"","code":"clean_category_names(names)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/clean_category_names.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Clean Category Names for Display — clean_category_names","text":"names Character vector category names clean","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/clean_category_names.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Clean Category Names for Display — clean_category_names","text":"Character vector cleaned names","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/clean_text.html","id":null,"dir":"Reference","previous_headings":"","what":"Clean Text Data — clean_text","title":"Clean Text Data — clean_text","text":"Remove extra quotes whitespace text fields","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/clean_text.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clean Text Data — clean_text","text":"","code":"clean_text(text)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/clean_text.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Clean Text Data — clean_text","text":"text Character vector clean","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/clean_text.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Clean Text Data — clean_text","text":"Character vector cleaned text","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/clear_data_cache.html","id":null,"dir":"Reference","previous_headings":"","what":"Clear Data Cache — clear_data_cache","title":"Clear Data Cache — clear_data_cache","text":"Remove cached datasets free disk space","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/clear_data_cache.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clear Data Cache — clear_data_cache","text":"","code":"clear_data_cache(confirm = TRUE, verbose = TRUE)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/clear_data_cache.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Clear Data Cache — clear_data_cache","text":"confirm Logical. Require confirmation deleting verbose Logical. Show deleted","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/clear_data_cache.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Clear Data Cache — clear_data_cache","text":"Logical. TRUE successful","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/compare_analyses.html","id":null,"dir":"Reference","previous_headings":"","what":"Compare Two Analysis Results — compare_analyses","title":"Compare Two Analysis Results — compare_analyses","text":"Compare classifications two analysis results","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/compare_analyses.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compare Two Analysis Results — compare_analyses","text":"","code":"compare_analyses(results1, results2, nutrient = \"nitrogen\")"},{"path":"https://exelegch.github.io/manureshed-docs/reference/compare_analyses.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compare Two Analysis Results — compare_analyses","text":"results1 First analysis results results2 Second analysis results nutrient Character. Nutrient compare (\"nitrogen\" \"phosphorus\")","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/compare_analyses.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compare Two Analysis Results — compare_analyses","text":"Data frame comparison","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/compare_analyses.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compare Two Analysis Results — compare_analyses","text":"","code":"# \\donttest{ results_2010 <- run_builtin_analysis(scale = \"county\", year = 2010) #>  #> ====================================================================== #> BATCH MANURESHED ANALYSIS #> ====================================================================== #> Year: 2010 #> Scale: county #> Nutrients: nitrogen, phosphorus #> ---------------------------------------------------------------------- #> Checking data availability... #> Data availability confirmed #>   Available scales:county, huc8, huc2 #>   Available years forcounty:1987-2016 #>   Built-in WWTP data:Available (2007-2016) #>  #> Loading built-in NuGIS data... #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2010 #> Number of spatial units: 3064 #> Loading built-in spatial boundaries... #> Using cached version of county_boundaries #> Loaded county boundaries #> Number of spatial units: 3112 #> Calculating cropland threshold... #> Cropland threshold:1235.53acres #>  #> Processing agricultural classifications... #> Starting complete agricultural classification for county scale... #> Processed NuGIS data for county scale: #>   Spatial units: 3064 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 145 units #>   Sink_Deficit: 2362 units #>   Sink_Fertilizer: 287 units #>   Source: 83 units #>   Within_County: 187 units #> Phosphorus classification summary: #>   Excluded: 145 units #>   Sink_Deficit: 1760 units #>   Sink_Fertilizer: 469 units #>   Source: 343 units #>   Within_County: 347 units #> Agricultural classification complete! #> Applied threshold: 1235.53 acres #> Agricultural classification complete #>   Spatial units processed:3112 #>   Nitrogen classes:Excluded ( 193 ), Sink_Deficit ( 2362 ), Sink_Fertilizer ( 287 ), Source ( 83 ), Within_County ( 187 ) #>   Phosphorus classes:Excluded ( 193 ), Sink_Deficit ( 1760 ), Sink_Fertilizer ( 469 ), Source ( 343 ), Within_County ( 347 ) #>  #> Processing WWTP data... #>   Nutrients:nitrogen, phosphorus #>   WWTP year:2010 #>   Load units:kg #>   Data source:Built-in (2010) #>   Loading built-in nitrogen WWTP data for2010... #> Using cached version of wwtp_nitrogen_combined #> Loaded WWTP nitrogen data for year 2010 #> Number of facilities: 24727 #>   Loading built-in phosphorus WWTP data for2010... #> Using cached version of wwtp_phosphorus_combined #> Loaded WWTP phosphorus data for year 2010 #> Number of facilities: 7548 #>   Processing nitrogen WWTP facilities... #> Filtered for positive nitrogen loads: #>   Original: 24727 facilities #>   With positive loads: 24727 facilities #> WWTP nitrogen source classification: #>   Minor Source: 20327 facilities #>   Small Source: 2445 facilities #>   Medium Source: 987 facilities #>   Large Source: 745 facilities #>   Very Large Source: 223 facilities #> Created spatial WWTP data with 24727 facilities #> Looking for boundary ID column: 'FIPS' #> Available columns in boundaries: FIPS, County, State_Name, geometry #> Aggregating WWTP nitrogen loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 24727 #>   Spatial units with facilities: 2370 #>   Total nitrogen load: 2010631.56 tons/year #>   Processing phosphorus WWTP facilities... #> Filtered for positive phosphorus loads: #>   Original: 7548 facilities #>   With positive loads: 7548 facilities #> WWTP phosphorus source classification: #>   Minor Source: 4626 facilities #>   Small Source: 1572 facilities #>   Medium Source: 669 facilities #>   Large Source: 553 facilities #>   Very Large Source: 128 facilities #> Created spatial WWTP data with 7548 facilities #> Looking for boundary ID column: 'FIPS' #> Available columns in boundaries: FIPS, County, State_Name, geometry #> Aggregating WWTP phosphorus loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 7548 #>   Spatial units with facilities: 1539 #>   Total phosphorus load: 99331.55 tons/year #> WWTP data processing complete #>   nitrogen:24727facilities in2370spatial units #>   phosphorus:7548facilities in1539spatial units #>  #> Integrating WWTP and agricultural data... #> Integrating WWTP nitrogen data with agricultural classifications... #> Using agricultural ID column: FIPS #> Combined nitrogen classification summary: #>   Excluded: 193 units #>   Sink_Deficit: 2243 units #>   Sink_Fertilizer: 266 units #>   Source: 180 units #>   Within_County: 230 units #> Integrating WWTP phosphorus data with agricultural classifications... #> Using agricultural ID column: FIPS #> Combined phosphorus classification summary: #>   Excluded: 193 units #>   Sink_Deficit: 1685 units #>   Sink_Fertilizer: 435 units #>   Source: 442 units #>   Within_County: 357 units #>  Integration complete #>  #> Saving results... #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_agricultural_2010.rds #> File size: 1.04 MB #> Rows: 3112, Columns: 17 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_nitrogen_integrated_2010.rds #> File size: 1.1 MB #> Rows: 3112, Columns: 23 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/county_nitrogen_centroids_2010.csv #> File size: 752.63 KB #> Rows: 3112, Columns: 24 #> Longitude range: [-124.158, -67.637] #> Latitude range: [25.49, 48.826] #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_phosphorus_integrated_2010.rds #> File size: 1.09 MB #> Rows: 3112, Columns: 23 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/county_phosphorus_centroids_2010.csv #> File size: 720.61 KB #> Rows: 3112, Columns: 24 #> Longitude range: [-124.158, -67.637] #> Latitude range: [25.49, 48.826] #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/analysis_summary_2010.rds #> Format: RDS #> File size: 0.77 KB #>  Results saved to:/tmp/Rtmp0dSqZ3 #>   Files created:6 #>  #> ====================================================================== #> ANALYSIS COMPLETE #> ====================================================================== #> Processing time:0.07minutes #> Scale:county #> Year:2010 #> Nutrients analyzed:nitrogen, phosphorus #> Spatial units:3112 #> WWTP facilities:32275 #> Output directory:/tmp/Rtmp0dSqZ3 #> ====================================================================== results_2016 <- run_builtin_analysis(scale = \"county\", year = 2016) #>  #> ====================================================================== #> BATCH MANURESHED ANALYSIS #> ====================================================================== #> Year: 2016 #> Scale: county #> Nutrients: nitrogen, phosphorus #> ---------------------------------------------------------------------- #> Checking data availability... #> Data availability confirmed #>   Available scales:county, huc8, huc2 #>   Available years forcounty:1987-2016 #>   Built-in WWTP data:Available (2007-2016) #>  #> Loading built-in NuGIS data... #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2016 #> Number of spatial units: 3058 #> Loading built-in spatial boundaries... #> Using cached version of county_boundaries #> Loaded county boundaries #> Number of spatial units: 3112 #> Calculating cropland threshold... #> Cropland threshold:1235.53acres #>  #> Processing agricultural classifications... #> Starting complete agricultural classification for county scale... #> Processed NuGIS data for county scale: #>   Spatial units: 3058 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 158 units #>   Sink_Deficit: 2450 units #>   Sink_Fertilizer: 214 units #>   Source: 83 units #>   Within_County: 153 units #> Phosphorus classification summary: #>   Excluded: 158 units #>   Sink_Deficit: 1891 units #>   Sink_Fertilizer: 372 units #>   Source: 317 units #>   Within_County: 320 units #> Agricultural classification complete! #> Applied threshold: 1235.53 acres #> Agricultural classification complete #>   Spatial units processed:3112 #>   Nitrogen classes:Excluded ( 212 ), Sink_Deficit ( 2450 ), Sink_Fertilizer ( 214 ), Source ( 83 ), Within_County ( 153 ) #>   Phosphorus classes:Excluded ( 212 ), Sink_Deficit ( 1891 ), Sink_Fertilizer ( 372 ), Source ( 317 ), Within_County ( 320 ) #>  #> Processing WWTP data... #>   Nutrients:nitrogen, phosphorus #>   WWTP year:2016 #>   Load units:kg #>   Data source:Built-in (2016) #>   Loading built-in nitrogen WWTP data for2016... #> Using cached version of wwtp_nitrogen_combined #> Loaded WWTP nitrogen data for year 2016 #> Number of facilities: 20846 #>   Loading built-in phosphorus WWTP data for2016... #> Using cached version of wwtp_phosphorus_combined #> Loaded WWTP phosphorus data for year 2016 #> Number of facilities: 10148 #>   Processing nitrogen WWTP facilities... #> Filtered for positive nitrogen loads: #>   Original: 20846 facilities #>   With positive loads: 20846 facilities #> WWTP nitrogen source classification: #>   Minor Source: 17801 facilities #>   Small Source: 1799 facilities #>   Medium Source: 729 facilities #>   Large Source: 417 facilities #>   Very Large Source: 100 facilities #> Created spatial WWTP data with 20846 facilities #> Looking for boundary ID column: 'FIPS' #> Available columns in boundaries: FIPS, County, State_Name, geometry #> Aggregating WWTP nitrogen loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 20846 #>   Spatial units with facilities: 2581 #>   Total nitrogen load: 582738.6 tons/year #>   Processing phosphorus WWTP facilities... #> Filtered for positive phosphorus loads: #>   Original: 10148 facilities #>   With positive loads: 10148 facilities #> WWTP phosphorus source classification: #>   Minor Source: 6846 facilities #>   Small Source: 1839 facilities #>   Medium Source: 795 facilities #>   Large Source: 561 facilities #>   Very Large Source: 107 facilities #> Created spatial WWTP data with 10148 facilities #> Looking for boundary ID column: 'FIPS' #> Available columns in boundaries: FIPS, County, State_Name, geometry #> Aggregating WWTP phosphorus loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 10148 #>   Spatial units with facilities: 1966 #>   Total phosphorus load: 177064.66 tons/year #> WWTP data processing complete #>   nitrogen:20846facilities in2581spatial units #>   phosphorus:10148facilities in1966spatial units #>  #> Integrating WWTP and agricultural data... #> Integrating WWTP nitrogen data with agricultural classifications... #> Using agricultural ID column: FIPS #> Combined nitrogen classification summary: #>   Excluded: 212 units #>   Sink_Deficit: 2358 units #>   Sink_Fertilizer: 185 units #>   Source: 157 units #>   Within_County: 200 units #> Integrating WWTP phosphorus data with agricultural classifications... #> Using agricultural ID column: FIPS #> Combined phosphorus classification summary: #>   Excluded: 212 units #>   Sink_Deficit: 1819 units #>   Sink_Fertilizer: 344 units #>   Source: 389 units #>   Within_County: 348 units #>  Integration complete #>  #> Saving results... #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_agricultural_2016.rds #> File size: 1.04 MB #> Rows: 3112, Columns: 17 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_nitrogen_integrated_2016.rds #> File size: 1.1 MB #> Rows: 3112, Columns: 23 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/county_nitrogen_centroids_2016.csv #> File size: 760.52 KB #> Rows: 3112, Columns: 24 #> Longitude range: [-124.158, -67.637] #> Latitude range: [25.49, 48.826] #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_phosphorus_integrated_2016.rds #> File size: 1.09 MB #> Rows: 3112, Columns: 23 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/county_phosphorus_centroids_2016.csv #> File size: 736.85 KB #> Rows: 3112, Columns: 24 #> Longitude range: [-124.158, -67.637] #> Latitude range: [25.49, 48.826] #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/analysis_summary_2016.rds #> Format: RDS #> File size: 0.77 KB #>  Results saved to:/tmp/Rtmp0dSqZ3 #>   Files created:6 #>  #> ====================================================================== #> ANALYSIS COMPLETE #> ====================================================================== #> Processing time:0.06minutes #> Scale:county #> Year:2016 #> Nutrients analyzed:nitrogen, phosphorus #> Spatial units:3112 #> WWTP facilities:30994 #> Output directory:/tmp/Rtmp0dSqZ3 #> ====================================================================== comparison <- compare_analyses(results_2010, results_2016, \"nitrogen\") #>  #> Comparison ofNitrogenClassifications #> ================================================== #> Year 1:2010 #> Year 2:2016 #>  #>                  Classification 2010_Count 2016_Count Absolute_Change #> Excluded               Excluded        193        212              19 #> Sink_Deficit       Sink_Deficit       2362       2450              88 #> Sink_Fertilizer Sink_Fertilizer        287        214             -73 #> Source                   Source         83         83               0 #> Within_County     Within_County        187        153             -34 #>                 Percent_Change #> Excluded                   9.8 #> Sink_Deficit               3.7 #> Sink_Fertilizer          -25.4 #> Source                     0.0 #> Within_County            -18.2 # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/compare_scenarios.html","id":null,"dir":"Reference","previous_headings":"","what":"Compare Multiple Analysis Scenarios — compare_scenarios","title":"Compare Multiple Analysis Scenarios — compare_scenarios","text":"Compare results multiple analysis runs side--side visualizations summary statistics.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/compare_scenarios.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compare Multiple Analysis Scenarios — compare_scenarios","text":"","code":"compare_scenarios(   scenario_list,   metrics = c(\"sources\", \"sinks\", \"balanced\", \"excluded\"),   create_plots = TRUE,   output_dir = NULL )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/compare_scenarios.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compare Multiple Analysis Scenarios — compare_scenarios","text":"scenario_list Named list analysis results run_builtin_analysis() metrics Character vector metrics compare. Options: \"sources\", \"sinks\", \"balanced\", \"excluded\", \"total_surplus\", \"total_deficit\" create_plots Logical. Create comparison plots? (default: TRUE) output_dir Character. Directory saving plots (default: NULL, save)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/compare_scenarios.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compare Multiple Analysis Scenarios — compare_scenarios","text":"List containing: comparison_data Data frame metrics scenario plots List ggplot objects (create_plots = TRUE) summary Summary statistics","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/compare_scenarios.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compare Multiple Analysis Scenarios — compare_scenarios","text":"","code":"# \\donttest{ # Create multiple scenarios base <- run_builtin_analysis(year = 2016, include_wwtp = FALSE,                               scale = \"county\", nutrients = \"nitrogen\") #>  #> ====================================================================== #> BATCH MANURESHED ANALYSIS #> ====================================================================== #> Year: 2016 #> Scale: county #> Nutrients: nitrogen #> ---------------------------------------------------------------------- #> Checking data availability... #> Data availability confirmed #>   Available scales:county, huc8, huc2 #>   Available years forcounty:1987-2016 #>   Built-in WWTP data:Available (2007-2016) #>  #> Loading built-in NuGIS data... #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2016 #> Number of spatial units: 3058 #> Loading built-in spatial boundaries... #> Using cached version of county_boundaries #> Loaded county boundaries #> Number of spatial units: 3112 #> Calculating cropland threshold... #> Cropland threshold:1235.53acres #>  #> Processing agricultural classifications... #> Starting complete agricultural classification for county scale... #> Processed NuGIS data for county scale: #>   Spatial units: 3058 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 158 units #>   Sink_Deficit: 2450 units #>   Sink_Fertilizer: 214 units #>   Source: 83 units #>   Within_County: 153 units #> Phosphorus classification summary: #>   Excluded: 158 units #>   Sink_Deficit: 1891 units #>   Sink_Fertilizer: 372 units #>   Source: 317 units #>   Within_County: 320 units #> Agricultural classification complete! #> Applied threshold: 1235.53 acres #> Agricultural classification complete #>   Spatial units processed:3112 #>   Nitrogen classes:Excluded ( 212 ), Sink_Deficit ( 2450 ), Sink_Fertilizer ( 214 ), Source ( 83 ), Within_County ( 153 ) #>   Phosphorus classes:Excluded ( 212 ), Sink_Deficit ( 1891 ), Sink_Fertilizer ( 372 ), Source ( 317 ), Within_County ( 320 ) #>  #> WWTP analysis skipped #>  #> Saving results... #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_agricultural_2016.rds #> File size: 1.04 MB #> Rows: 3112, Columns: 17 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/analysis_summary_2016.rds #> Format: RDS #> File size: 0.49 KB #>  Results saved to:/tmp/Rtmp0dSqZ3 #>   Files created:2 #>  #> ====================================================================== #> ANALYSIS COMPLETE #> ====================================================================== #> Processing time:0.01minutes #> Scale:county #> Year:2016 #> Nutrients analyzed:nitrogen #> Spatial units:3112 #> Output directory:/tmp/Rtmp0dSqZ3 #> ====================================================================== wwtp <- run_builtin_analysis(year = 2016, include_wwtp = TRUE,                               scale = \"county\", nutrients = \"nitrogen\") #>  #> ====================================================================== #> BATCH MANURESHED ANALYSIS #> ====================================================================== #> Year: 2016 #> Scale: county #> Nutrients: nitrogen #> ---------------------------------------------------------------------- #> Checking data availability... #> Data availability confirmed #>   Available scales:county, huc8, huc2 #>   Available years forcounty:1987-2016 #>   Built-in WWTP data:Available (2007-2016) #>  #> Loading built-in NuGIS data... #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2016 #> Number of spatial units: 3058 #> Loading built-in spatial boundaries... #> Using cached version of county_boundaries #> Loaded county boundaries #> Number of spatial units: 3112 #> Calculating cropland threshold... #> Cropland threshold:1235.53acres #>  #> Processing agricultural classifications... #> Starting complete agricultural classification for county scale... #> Processed NuGIS data for county scale: #>   Spatial units: 3058 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 158 units #>   Sink_Deficit: 2450 units #>   Sink_Fertilizer: 214 units #>   Source: 83 units #>   Within_County: 153 units #> Phosphorus classification summary: #>   Excluded: 158 units #>   Sink_Deficit: 1891 units #>   Sink_Fertilizer: 372 units #>   Source: 317 units #>   Within_County: 320 units #> Agricultural classification complete! #> Applied threshold: 1235.53 acres #> Agricultural classification complete #>   Spatial units processed:3112 #>   Nitrogen classes:Excluded ( 212 ), Sink_Deficit ( 2450 ), Sink_Fertilizer ( 214 ), Source ( 83 ), Within_County ( 153 ) #>   Phosphorus classes:Excluded ( 212 ), Sink_Deficit ( 1891 ), Sink_Fertilizer ( 372 ), Source ( 317 ), Within_County ( 320 ) #>  #> Processing WWTP data... #>   Nutrients:nitrogen #>   WWTP year:2016 #>   Load units:kg #>   Data source:Built-in (2016) #>   Loading built-in nitrogen WWTP data for2016... #> Using cached version of wwtp_nitrogen_combined #> Loaded WWTP nitrogen data for year 2016 #> Number of facilities: 20846 #>   Processing nitrogen WWTP facilities... #> Filtered for positive nitrogen loads: #>   Original: 20846 facilities #>   With positive loads: 20846 facilities #> WWTP nitrogen source classification: #>   Minor Source: 17801 facilities #>   Small Source: 1799 facilities #>   Medium Source: 729 facilities #>   Large Source: 417 facilities #>   Very Large Source: 100 facilities #> Created spatial WWTP data with 20846 facilities #> Looking for boundary ID column: 'FIPS' #> Available columns in boundaries: FIPS, County, State_Name, geometry #> Aggregating WWTP nitrogen loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 20846 #>   Spatial units with facilities: 2581 #>   Total nitrogen load: 582738.6 tons/year #> WWTP data processing complete #>   nitrogen:20846facilities in2581spatial units #>  #> Integrating WWTP and agricultural data... #> Integrating WWTP nitrogen data with agricultural classifications... #> Using agricultural ID column: FIPS #> Combined nitrogen classification summary: #>   Excluded: 212 units #>   Sink_Deficit: 2358 units #>   Sink_Fertilizer: 185 units #>   Source: 157 units #>   Within_County: 200 units #>  Integration complete #>  #> Saving results... #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_agricultural_2016.rds #> File size: 1.04 MB #> Rows: 3112, Columns: 17 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_nitrogen_integrated_2016.rds #> File size: 1.1 MB #> Rows: 3112, Columns: 23 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/county_nitrogen_centroids_2016.csv #> File size: 760.52 KB #> Rows: 3112, Columns: 24 #> Longitude range: [-124.158, -67.637] #> Latitude range: [25.49, 48.826] #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/analysis_summary_2016.rds #> Format: RDS #> File size: 0.7 KB #>  Results saved to:/tmp/Rtmp0dSqZ3 #>   Files created:4 #>  #> ====================================================================== #> ANALYSIS COMPLETE #> ====================================================================== #> Processing time:0.04minutes #> Scale:county #> Year:2016 #> Nutrients analyzed:nitrogen #> Spatial units:3112 #> WWTP facilities:20846 #> Output directory:/tmp/Rtmp0dSqZ3 #> ======================================================================  # Compare scenarios comparison <- compare_scenarios(list(   \"Base (Agricultural Only)\" = base,   \"With WWTP\" = wwtp )) #> Number of scenarios:2 #>   -Base (Agricultural Only) #>   -With WWTP #>  #> Key differences: #>    scenario delta_sources delta_sinks delta_surplus delta_deficit #> 1 With WWTP            74        -121      100385.9       -192330 #>   pct_change_sources #> 1           89.15663  # View comparison data print(comparison$comparison_data) #>   n_sources n_sinks n_balanced n_excluded total_surplus_kg total_deficit_kg #> 1        83    2664          0        212         34200.92          9990394 #> 2       157    2543          0        212        134586.84          9798064 #>   n_sources_ag n_sinks_ag total_surplus_ag_kg total_deficit_ag_kg has_wwtp #> 1           83       2664            34200.92             9990394    FALSE #> 2           83       2664            34200.92             9990394     TRUE #>   total_units  scale year                 scenario #> 1        3112 county 2016 Base (Agricultural Only) #> 2        3112 county 2016                With WWTP  # View plots print(comparison$plots$bar_chart)  # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/convert_load_units.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert Load Units to Tons — convert_load_units","title":"Convert Load Units to Tons — convert_load_units","text":"Convert loads various units US tons","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/convert_load_units.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert Load Units to Tons — convert_load_units","text":"","code":"convert_load_units(load_values, from_unit)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/convert_load_units.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert Load Units to Tons — convert_load_units","text":"load_values Numeric vector load values from_unit Character. Input unit: \"kg\", \"lbs\", \"pounds\", \"tons\"","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/convert_load_units.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert Load Units to Tons — convert_load_units","text":"Numeric vector loads US tons","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/convert_load_units.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert Load Units to Tons — convert_load_units","text":"","code":"# Convert from kilograms to tons kg_loads <- c(1000, 2000, 3000) tons_loads <- convert_load_units(kg_loads, \"kg\")  # Convert from pounds to tons lbs_loads <- c(5000, 10000, 15000) tons_loads <- convert_load_units(lbs_loads, \"lbs\")"},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_analysis_report.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Analysis Report — create_analysis_report","title":"Create Analysis Report — create_analysis_report","text":"Generate comprehensive HTML PDF report analysis results","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_analysis_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Analysis Report — create_analysis_report","text":"","code":"create_analysis_report(   results,   output_path,   format = \"html\",   title = \"Manureshed Analysis Report\",   include_maps = TRUE )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_analysis_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Analysis Report — create_analysis_report","text":"results List. Complete analysis results output_path Character. Path output report format Character. Report format: \"html\" \"pdf\" title Character. Report title include_maps Logical. Whether include maps report","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_analysis_report.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Analysis Report — create_analysis_report","text":"Character. Path generated report","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_analysis_report.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create Analysis Report — create_analysis_report","text":"","code":"# \\donttest{ # Generate HTML report - use tempdir to avoid check directory pollution results <- run_builtin_analysis(scale = \"county\", year = 2016) #>  #> ====================================================================== #> BATCH MANURESHED ANALYSIS #> ====================================================================== #> Year: 2016 #> Scale: county #> Nutrients: nitrogen, phosphorus #> ---------------------------------------------------------------------- #> Checking data availability... #> Data availability confirmed #>   Available scales:county, huc8, huc2 #>   Available years forcounty:1987-2016 #>   Built-in WWTP data:Available (2007-2016) #>  #> Loading built-in NuGIS data... #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2016 #> Number of spatial units: 3058 #> Loading built-in spatial boundaries... #> Using cached version of county_boundaries #> Loaded county boundaries #> Number of spatial units: 3112 #> Calculating cropland threshold... #> Cropland threshold:1235.53acres #>  #> Processing agricultural classifications... #> Starting complete agricultural classification for county scale... #> Processed NuGIS data for county scale: #>   Spatial units: 3058 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 158 units #>   Sink_Deficit: 2450 units #>   Sink_Fertilizer: 214 units #>   Source: 83 units #>   Within_County: 153 units #> Phosphorus classification summary: #>   Excluded: 158 units #>   Sink_Deficit: 1891 units #>   Sink_Fertilizer: 372 units #>   Source: 317 units #>   Within_County: 320 units #> Agricultural classification complete! #> Applied threshold: 1235.53 acres #> Agricultural classification complete #>   Spatial units processed:3112 #>   Nitrogen classes:Excluded ( 212 ), Sink_Deficit ( 2450 ), Sink_Fertilizer ( 214 ), Source ( 83 ), Within_County ( 153 ) #>   Phosphorus classes:Excluded ( 212 ), Sink_Deficit ( 1891 ), Sink_Fertilizer ( 372 ), Source ( 317 ), Within_County ( 320 ) #>  #> Processing WWTP data... #>   Nutrients:nitrogen, phosphorus #>   WWTP year:2016 #>   Load units:kg #>   Data source:Built-in (2016) #>   Loading built-in nitrogen WWTP data for2016... #> Using cached version of wwtp_nitrogen_combined #> Loaded WWTP nitrogen data for year 2016 #> Number of facilities: 20846 #>   Loading built-in phosphorus WWTP data for2016... #> Using cached version of wwtp_phosphorus_combined #> Loaded WWTP phosphorus data for year 2016 #> Number of facilities: 10148 #>   Processing nitrogen WWTP facilities... #> Filtered for positive nitrogen loads: #>   Original: 20846 facilities #>   With positive loads: 20846 facilities #> WWTP nitrogen source classification: #>   Minor Source: 17801 facilities #>   Small Source: 1799 facilities #>   Medium Source: 729 facilities #>   Large Source: 417 facilities #>   Very Large Source: 100 facilities #> Created spatial WWTP data with 20846 facilities #> Looking for boundary ID column: 'FIPS' #> Available columns in boundaries: FIPS, County, State_Name, geometry #> Aggregating WWTP nitrogen loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 20846 #>   Spatial units with facilities: 2581 #>   Total nitrogen load: 582738.6 tons/year #>   Processing phosphorus WWTP facilities... #> Filtered for positive phosphorus loads: #>   Original: 10148 facilities #>   With positive loads: 10148 facilities #> WWTP phosphorus source classification: #>   Minor Source: 6846 facilities #>   Small Source: 1839 facilities #>   Medium Source: 795 facilities #>   Large Source: 561 facilities #>   Very Large Source: 107 facilities #> Created spatial WWTP data with 10148 facilities #> Looking for boundary ID column: 'FIPS' #> Available columns in boundaries: FIPS, County, State_Name, geometry #> Aggregating WWTP phosphorus loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 10148 #>   Spatial units with facilities: 1966 #>   Total phosphorus load: 177064.66 tons/year #> WWTP data processing complete #>   nitrogen:20846facilities in2581spatial units #>   phosphorus:10148facilities in1966spatial units #>  #> Integrating WWTP and agricultural data... #> Integrating WWTP nitrogen data with agricultural classifications... #> Using agricultural ID column: FIPS #> Combined nitrogen classification summary: #>   Excluded: 212 units #>   Sink_Deficit: 2358 units #>   Sink_Fertilizer: 185 units #>   Source: 157 units #>   Within_County: 200 units #> Integrating WWTP phosphorus data with agricultural classifications... #> Using agricultural ID column: FIPS #> Combined phosphorus classification summary: #>   Excluded: 212 units #>   Sink_Deficit: 1819 units #>   Sink_Fertilizer: 344 units #>   Source: 389 units #>   Within_County: 348 units #>  Integration complete #>  #> Saving results... #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_agricultural_2016.rds #> File size: 1.04 MB #> Rows: 3112, Columns: 17 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_nitrogen_integrated_2016.rds #> File size: 1.1 MB #> Rows: 3112, Columns: 23 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/county_nitrogen_centroids_2016.csv #> File size: 760.52 KB #> Rows: 3112, Columns: 24 #> Longitude range: [-124.158, -67.637] #> Latitude range: [25.49, 48.826] #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_phosphorus_integrated_2016.rds #> File size: 1.09 MB #> Rows: 3112, Columns: 23 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/county_phosphorus_centroids_2016.csv #> File size: 736.85 KB #> Rows: 3112, Columns: 24 #> Longitude range: [-124.158, -67.637] #> Latitude range: [25.49, 48.826] #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/analysis_summary_2016.rds #> Format: RDS #> File size: 0.77 KB #>  Results saved to:/tmp/Rtmp0dSqZ3 #>   Files created:6 #>  #> ====================================================================== #> ANALYSIS COMPLETE #> ====================================================================== #> Processing time:0.06minutes #> Scale:county #> Year:2016 #> Nutrients analyzed:nitrogen, phosphorus #> Spatial units:3112 #> WWTP facilities:30994 #> Output directory:/tmp/Rtmp0dSqZ3 #> ====================================================================== report_path <- file.path(tempdir(), \"analysis_report.html\") create_analysis_report(results, report_path) #> Generated analysis report: /tmp/Rtmp0dSqZ3/analysis_report.html #> Format: HTML #> [1] \"/tmp/Rtmp0dSqZ3/analysis_report.html\" # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_batch_summary_report.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Batch Summary Report — create_batch_summary_report","title":"Create Batch Summary Report — create_batch_summary_report","text":"Generate comprehensive summary report batch analysis","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_batch_summary_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Batch Summary Report — create_batch_summary_report","text":"","code":"create_batch_summary_report(   batch_results,   years,   nutrients,   output_dir,   verbose )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_batch_summary_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Batch Summary Report — create_batch_summary_report","text":"batch_results List results years Vector years nutrients Vector nutrients output_dir Output directory verbose Show progress","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_batch_summary_report.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Batch Summary Report — create_batch_summary_report","text":"Summary data frame","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_classification_summary.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Classification Summary Table — create_classification_summary","title":"Create Classification Summary Table — create_classification_summary","text":"Create summary table classification counts nutrients","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_classification_summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Classification Summary Table — create_classification_summary","text":"","code":"create_classification_summary(data, agricultural_col, combined_col)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_classification_summary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Classification Summary Table — create_classification_summary","text":"data Data frame. Data classification columns agricultural_col Character. Name agricultural classification column combined_col Character. Name combined (WWTP) classification column","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_classification_summary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Classification Summary Table — create_classification_summary","text":"Data frame classification counts changes","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_classification_trend_plot.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Classification Trend Plot — create_classification_trend_plot","title":"Create Classification Trend Plot — create_classification_trend_plot","text":"Create Classification Trend Plot","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_classification_trend_plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Classification Trend Plot — create_classification_trend_plot","text":"","code":"create_classification_trend_plot(trend_data, nutrient)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_classification_trend_plot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Classification Trend Plot — create_classification_trend_plot","text":"trend_data Data frame trend data nutrient Character nutrient type","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_classification_trend_plot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Classification Trend Plot — create_classification_trend_plot","text":"ggplot object","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_comparison_plots.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Comparison Plots — create_comparison_plots","title":"Create Comparison Plots — create_comparison_plots","text":"Create Comparison Plots","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_comparison_plots.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Comparison Plots — create_comparison_plots","text":"","code":"create_comparison_plots(comparison_data, metrics)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_comparison_plots.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Comparison Plots — create_comparison_plots","text":"comparison_data Data frame scenario metrics metrics Character vector metrics plot","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_comparison_plots.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Comparison Plots — create_comparison_plots","text":"List ggplot objects","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_comparison_summary.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Comparison Summary Statistics — create_comparison_summary","title":"Create Comparison Summary Statistics — create_comparison_summary","text":"Create Comparison Summary Statistics","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_comparison_summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Comparison Summary Statistics — create_comparison_summary","text":"","code":"create_comparison_summary(comparison_data, metrics)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_comparison_summary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Comparison Summary Statistics — create_comparison_summary","text":"comparison_data Data frame scenario metrics metrics Character vector metrics summarize","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_comparison_summary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Comparison Summary Statistics — create_comparison_summary","text":"List summary statistics","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_comprehensive_comparisons.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Comprehensive Batch Comparisons — create_comprehensive_comparisons","title":"Create Comprehensive Batch Comparisons — create_comprehensive_comparisons","text":"Generate detailed comparative visualizations across years","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_comprehensive_comparisons.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Comprehensive Batch Comparisons — create_comprehensive_comparisons","text":"","code":"create_comprehensive_comparisons(batch_results, nutrients, output_dir, verbose)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_comprehensive_comparisons.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Comprehensive Batch Comparisons — create_comprehensive_comparisons","text":"batch_results List analysis results year nutrients Character vector nutrients output_dir Character output directory verbose Logical show progress","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_comprehensive_comparisons.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Comprehensive Batch Comparisons — create_comprehensive_comparisons","text":"List created comparison files","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_network_plot.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Network Plot from Transition Probabilities — create_network_plot","title":"Create Network Plot from Transition Probabilities — create_network_plot","text":"Create network visualization spatial transition probabilities","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_network_plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Network Plot from Transition Probabilities — create_network_plot","text":"","code":"create_network_plot(   transition_df,   nutrient,   analysis_type,   output_path,   highlight_transitions = TRUE )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_network_plot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Network Plot from Transition Probabilities — create_network_plot","text":"transition_df Data frame. Transition probability matrix nutrient Character. \"nitrogen\" \"phosphorus\" coloring analysis_type Character. Description analysis type output_path Character. Path save PNG file highlight_transitions Logical. Whether highlight specific transitions","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_network_plot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Network Plot from Transition Probabilities — create_network_plot","text":"NULL (saves plot file)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_stacked_area_plot.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Stacked Area Plot — create_stacked_area_plot","title":"Create Stacked Area Plot — create_stacked_area_plot","text":"Create Stacked Area Plot","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_stacked_area_plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Stacked Area Plot — create_stacked_area_plot","text":"","code":"create_stacked_area_plot(trend_data, nutrient)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_stacked_area_plot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Stacked Area Plot — create_stacked_area_plot","text":"trend_data Data frame trend data nutrient Character nutrient type","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_stacked_area_plot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Stacked Area Plot — create_stacked_area_plot","text":"ggplot object","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_year_comparison_plots.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Year-over-Year Comparison Plots — create_year_comparison_plots","title":"Create Year-over-Year Comparison Plots — create_year_comparison_plots","text":"Internal function create comparative visualizations across years","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_year_comparison_plots.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Year-over-Year Comparison Plots — create_year_comparison_plots","text":"","code":"create_year_comparison_plots(year_summaries, nutrients, output_dir, verbose)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_year_comparison_plots.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Year-over-Year Comparison Plots — create_year_comparison_plots","text":"year_summaries List. Summary data year nutrients Character vector. Nutrients analyze output_dir Character. Output directory verbose Logical. Progress messages","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_year_comparison_plots.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Year-over-Year Comparison Plots — create_year_comparison_plots","text":"List created plot files","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_yoy_change_plot.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Year-over-Year Change Plot — create_yoy_change_plot","title":"Create Year-over-Year Change Plot — create_yoy_change_plot","text":"Create Year--Year Change Plot","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_yoy_change_plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Year-over-Year Change Plot — create_yoy_change_plot","text":"","code":"create_yoy_change_plot(trend_data, nutrient)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_yoy_change_plot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Year-over-Year Change Plot — create_yoy_change_plot","text":"trend_data Data frame trend data nutrient Character nutrient type","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/create_yoy_change_plot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Year-over-Year Change Plot — create_yoy_change_plot","text":"ggplot object","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/data_sources.html","id":null,"dir":"Reference","previous_headings":"","what":"NuGIS and EPA WWTP Data Sources — data_sources","title":"NuGIS and EPA WWTP Data Sources — data_sources","text":"package uses two primary data sources:","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/data_sources.html","id":"nugis-agricultural-data","dir":"Reference","previous_headings":"","what":"NuGIS Agricultural Data","title":"NuGIS and EPA WWTP Data Sources — data_sources","text":"Nutrient Use Geographic Information System (NuGIS) presents cropland nutrient balances conterminous United States 1987-2016. Source: Fertilizer Institute (TFI) Plant Nutrition Canada (PNC) Website: https://nugis.tfi.org/tabular_data Contact: nugis@tfi.org Components: County-level crop livestock data USDA Census Agriculture Fertilizer use data AAPFCO Geospatial nutrient balance estimates Available counties, HUC8, HUC2 watersheds Data Processing: manureshed package uses cleaned versions NuGIS data resolved metadata issues enhanced spatial integration, detailed manureshed methodology paper (Akanbi et al., 2026).","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/data_sources.html","id":"epa-wwtp-data","dir":"Reference","previous_headings":"","what":"EPA WWTP Data","title":"NuGIS and EPA WWTP Data Sources — data_sources","text":"Source: U.S. Environmental Protection Agency System: Discharge Monitoring Report (DMR) Loading Tool via ECHO Website: https://echo.epa.gov/trends/loading-tool/water-pollution-search Data Years: 2007-2016 (nitrogen phosphorus loads) License: Public domain (U.S. Government work)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/data_sources.html","id":"data-attribution","dir":"Reference","previous_headings":"","what":"Data Attribution","title":"NuGIS and EPA WWTP Data Sources — data_sources","text":"using package, please cite package, methodology paper, underlying data sources. Use citation_info() display full citation information.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/dot-onAttach.html","id":null,"dir":"Reference","previous_headings":"","what":"Package Startup Message for OSF Data Approach — .onAttach","title":"Package Startup Message for OSF Data Approach — .onAttach","text":"Displays informative startup message package loaded","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/dot-onAttach.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Package Startup Message for OSF Data Approach — .onAttach","text":"","code":".onAttach(libname, pkgname)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/dot-onAttach.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Package Startup Message for OSF Data Approach — .onAttach","text":"libname Character. Library name (passed R) pkgname Character. Package name (passed R)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/dot-package_info.html","id":null,"dir":"Reference","previous_headings":"","what":"Package Version and Build Information — .package_info","title":"Package Version and Build Information — .package_info","text":"Internal function provide package build information","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/dot-package_info.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Package Version and Build Information — .package_info","text":"","code":".package_info()"},{"path":"https://exelegch.github.io/manureshed-docs/reference/dot-package_info.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Package Version and Build Information — .package_info","text":"List package metadata","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/download_all_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Download All Datasets from OSF — download_all_data","title":"Download All Datasets from OSF — download_all_data","text":"Convenience function download available datasets OSF","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/download_all_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download All Datasets from OSF — download_all_data","text":"","code":"download_all_data(force_download = FALSE, verbose = TRUE)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/download_all_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download All Datasets from OSF — download_all_data","text":"force_download Logical. Re-download even files exist cache verbose Logical. Show progress download","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/download_all_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download All Datasets from OSF — download_all_data","text":"Logical. TRUE downloads successful","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/download_osf_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Download and Cache Data from OSF — download_osf_data","title":"Download and Cache Data from OSF — download_osf_data","text":"Download built-datasets OSF repository using Files API","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/download_osf_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download and Cache Data from OSF — download_osf_data","text":"","code":"download_osf_data(   dataset_name,   force_download = FALSE,   cache_dir = NULL,   verbose = TRUE )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/download_osf_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download and Cache Data from OSF — download_osf_data","text":"dataset_name Character. Name dataset download force_download Logical. Force re-download even cached version exists cache_dir Character. Directory cache downloaded data (default: user data dir) verbose Logical. Show download progress","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/download_osf_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download and Cache Data from OSF — download_osf_data","text":"Path cached data file","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/export_for_gis.html","id":null,"dir":"Reference","previous_headings":"","what":"Export Results for GIS Applications — export_for_gis","title":"Export Results for GIS Applications — export_for_gis","text":"Export spatial results GIS-ready formats","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/export_for_gis.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Export Results for GIS Applications — export_for_gis","text":"","code":"export_for_gis(   results,   output_dir = file.path(tempdir(), \"gis_export\"),   formats = c(\"shapefile\", \"geojson\") )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/export_for_gis.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Export Results for GIS Applications — export_for_gis","text":"results Analysis results object output_dir Output directory formats Character vector formats: \"shapefile\", \"geojson\", \"kml\", \"gpkg\"","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/export_for_gis.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Export Results for GIS Applications — export_for_gis","text":"List created files","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/export_for_gis.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Export Results for GIS Applications — export_for_gis","text":"","code":"# \\donttest{ # Use tempdir to avoid polluting check directory results <- run_builtin_analysis(scale = \"county\", year = 2016) #>  #> ====================================================================== #> BATCH MANURESHED ANALYSIS #> ====================================================================== #> Year: 2016 #> Scale: county #> Nutrients: nitrogen, phosphorus #> ---------------------------------------------------------------------- #> Checking data availability... #> Data availability confirmed #>   Available scales:county, huc8, huc2 #>   Available years forcounty:1987-2016 #>   Built-in WWTP data:Available (2007-2016) #>  #> Loading built-in NuGIS data... #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2016 #> Number of spatial units: 3058 #> Loading built-in spatial boundaries... #> Using cached version of county_boundaries #> Loaded county boundaries #> Number of spatial units: 3112 #> Calculating cropland threshold... #> Cropland threshold:1235.53acres #>  #> Processing agricultural classifications... #> Starting complete agricultural classification for county scale... #> Processed NuGIS data for county scale: #>   Spatial units: 3058 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 158 units #>   Sink_Deficit: 2450 units #>   Sink_Fertilizer: 214 units #>   Source: 83 units #>   Within_County: 153 units #> Phosphorus classification summary: #>   Excluded: 158 units #>   Sink_Deficit: 1891 units #>   Sink_Fertilizer: 372 units #>   Source: 317 units #>   Within_County: 320 units #> Agricultural classification complete! #> Applied threshold: 1235.53 acres #> Agricultural classification complete #>   Spatial units processed:3112 #>   Nitrogen classes:Excluded ( 212 ), Sink_Deficit ( 2450 ), Sink_Fertilizer ( 214 ), Source ( 83 ), Within_County ( 153 ) #>   Phosphorus classes:Excluded ( 212 ), Sink_Deficit ( 1891 ), Sink_Fertilizer ( 372 ), Source ( 317 ), Within_County ( 320 ) #>  #> Processing WWTP data... #>   Nutrients:nitrogen, phosphorus #>   WWTP year:2016 #>   Load units:kg #>   Data source:Built-in (2016) #>   Loading built-in nitrogen WWTP data for2016... #> Using cached version of wwtp_nitrogen_combined #> Loaded WWTP nitrogen data for year 2016 #> Number of facilities: 20846 #>   Loading built-in phosphorus WWTP data for2016... #> Using cached version of wwtp_phosphorus_combined #> Loaded WWTP phosphorus data for year 2016 #> Number of facilities: 10148 #>   Processing nitrogen WWTP facilities... #> Filtered for positive nitrogen loads: #>   Original: 20846 facilities #>   With positive loads: 20846 facilities #> WWTP nitrogen source classification: #>   Minor Source: 17801 facilities #>   Small Source: 1799 facilities #>   Medium Source: 729 facilities #>   Large Source: 417 facilities #>   Very Large Source: 100 facilities #> Created spatial WWTP data with 20846 facilities #> Looking for boundary ID column: 'FIPS' #> Available columns in boundaries: FIPS, County, State_Name, geometry #> Aggregating WWTP nitrogen loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 20846 #>   Spatial units with facilities: 2581 #>   Total nitrogen load: 582738.6 tons/year #>   Processing phosphorus WWTP facilities... #> Filtered for positive phosphorus loads: #>   Original: 10148 facilities #>   With positive loads: 10148 facilities #> WWTP phosphorus source classification: #>   Minor Source: 6846 facilities #>   Small Source: 1839 facilities #>   Medium Source: 795 facilities #>   Large Source: 561 facilities #>   Very Large Source: 107 facilities #> Created spatial WWTP data with 10148 facilities #> Looking for boundary ID column: 'FIPS' #> Available columns in boundaries: FIPS, County, State_Name, geometry #> Aggregating WWTP phosphorus loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 10148 #>   Spatial units with facilities: 1966 #>   Total phosphorus load: 177064.66 tons/year #> WWTP data processing complete #>   nitrogen:20846facilities in2581spatial units #>   phosphorus:10148facilities in1966spatial units #>  #> Integrating WWTP and agricultural data... #> Integrating WWTP nitrogen data with agricultural classifications... #> Using agricultural ID column: FIPS #> Combined nitrogen classification summary: #>   Excluded: 212 units #>   Sink_Deficit: 2358 units #>   Sink_Fertilizer: 185 units #>   Source: 157 units #>   Within_County: 200 units #> Integrating WWTP phosphorus data with agricultural classifications... #> Using agricultural ID column: FIPS #> Combined phosphorus classification summary: #>   Excluded: 212 units #>   Sink_Deficit: 1819 units #>   Sink_Fertilizer: 344 units #>   Source: 389 units #>   Within_County: 348 units #>  Integration complete #>  #> Saving results... #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_agricultural_2016.rds #> File size: 1.04 MB #> Rows: 3112, Columns: 17 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_nitrogen_integrated_2016.rds #> File size: 1.1 MB #> Rows: 3112, Columns: 23 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/county_nitrogen_centroids_2016.csv #> File size: 760.52 KB #> Rows: 3112, Columns: 24 #> Longitude range: [-124.158, -67.637] #> Latitude range: [25.49, 48.826] #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_phosphorus_integrated_2016.rds #> File size: 1.09 MB #> Rows: 3112, Columns: 23 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/county_phosphorus_centroids_2016.csv #> File size: 736.85 KB #> Rows: 3112, Columns: 24 #> Longitude range: [-124.158, -67.637] #> Latitude range: [25.49, 48.826] #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/analysis_summary_2016.rds #> Format: RDS #> File size: 0.76 KB #>  Results saved to:/tmp/Rtmp0dSqZ3 #>   Files created:6 #>  #> ====================================================================== #> ANALYSIS COMPLETE #> ====================================================================== #> Processing time:0.09minutes #> Scale:county #> Year:2016 #> Nutrients analyzed:nitrogen, phosphorus #> Spatial units:3112 #> WWTP facilities:30994 #> Output directory:/tmp/Rtmp0dSqZ3 #> ====================================================================== output_dir <- file.path(tempdir(), \"gis_outputs\") gis_files <- export_for_gis(results, output_dir) #> Warning: Field names abbreviated for ESRI Shapefile driver #> Warning: GDAL Error 1: /tmp/Rtmp0dSqZ3/gis_outputs/agricultural_results.shp does not appear to be a file or directory. #> Created shapefile: /tmp/Rtmp0dSqZ3/gis_outputs/agricultural_results.shp #> Created GeoJSON: /tmp/Rtmp0dSqZ3/gis_outputs/agricultural_results.geojson #> Warning: Field names abbreviated for ESRI Shapefile driver #> Warning: GDAL Error 1: /tmp/Rtmp0dSqZ3/gis_outputs/nitrogen_integrated.shp does not appear to be a file or directory. #> Warning: Field names abbreviated for ESRI Shapefile driver #> Warning: GDAL Error 1: /tmp/Rtmp0dSqZ3/gis_outputs/phosphorus_integrated.shp does not appear to be a file or directory. # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/export_for_policy.html","id":null,"dir":"Reference","previous_headings":"","what":"Export for Policy Briefs — export_for_policy","title":"Export for Policy Briefs — export_for_policy","text":"Create simplified outputs policy makers","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/export_for_policy.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Export for Policy Briefs — export_for_policy","text":"","code":"export_for_policy(results, output_dir = file.path(tempdir(), \"policy_export\"))"},{"path":"https://exelegch.github.io/manureshed-docs/reference/export_for_policy.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Export for Policy Briefs — export_for_policy","text":"results Analysis results output_dir Output directory","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/export_for_policy.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Export for Policy Briefs — export_for_policy","text":"List created files","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/export_for_publication.html","id":null,"dir":"Reference","previous_headings":"","what":"Export for Publication — export_for_publication","title":"Export for Publication — export_for_publication","text":"Create high-resolution outputs suitable publication","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/export_for_publication.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Export for Publication — export_for_publication","text":"","code":"export_for_publication(   results,   output_dir = file.path(tempdir(), \"publication_export\"),   dpi = 600 )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/export_for_publication.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Export for Publication — export_for_publication","text":"results Analysis results output_dir Output directory dpi Resolution (default: 600 publication quality)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/export_for_publication.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Export for Publication — export_for_publication","text":"List created files","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/extract_scenario_metrics.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract Metrics from Analysis Results — extract_scenario_metrics","title":"Extract Metrics from Analysis Results — extract_scenario_metrics","text":"Internal function extract comparison metrics single analysis result","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/extract_scenario_metrics.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract Metrics from Analysis Results — extract_scenario_metrics","text":"","code":"extract_scenario_metrics(result)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/extract_scenario_metrics.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract Metrics from Analysis Results — extract_scenario_metrics","text":"result Analysis result run_builtin_analysis()","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/extract_scenario_metrics.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract Metrics from Analysis Results — extract_scenario_metrics","text":"Data frame metrics","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/extract_trend_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract Trend Data from Batch Results — extract_trend_data","title":"Extract Trend Data from Batch Results — extract_trend_data","text":"Extract Trend Data Batch Results","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/extract_trend_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract Trend Data from Batch Results — extract_trend_data","text":"","code":"extract_trend_data(batch_results, nutrient)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/extract_trend_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract Trend Data from Batch Results — extract_trend_data","text":"batch_results List results nutrient Character nutrient type","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/extract_trend_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract Trend Data from Batch Results — extract_trend_data","text":"Data frame trend data","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/filter_by_state.html","id":null,"dir":"Reference","previous_headings":"","what":"Filter Data by State — filter_by_state","title":"Filter Data by State — filter_by_state","text":"Filter spatial data specific state","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/filter_by_state.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Filter Data by State — filter_by_state","text":"","code":"filter_by_state(data, state, scale, boundaries = NULL)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/filter_by_state.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Filter Data by State — filter_by_state","text":"data Data frame sf object. Spatial data FIPS HUC codes state Character. Two-letter state abbreviation scale Character. Spatial scale: \"county\", \"huc8\", \"huc2\" boundaries sf object. Spatial boundaries (optional, HUC scales)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/filter_by_state.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Filter Data by State — filter_by_state","text":"Filtered data specified state","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/format_huc8.html","id":null,"dir":"Reference","previous_headings":"","what":"Format HUC8 Codes — format_huc8","title":"Format HUC8 Codes — format_huc8","text":"Add leading zeros 7-digit HUC8 codes make 8-digit","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/format_huc8.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format HUC8 Codes — format_huc8","text":"","code":"format_huc8(huc_codes)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/format_huc8.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format HUC8 Codes — format_huc8","text":"huc_codes Character numeric vector HUC codes","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/format_huc8.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format HUC8 Codes — format_huc8","text":"Character vector properly formatted 8-digit HUC codes","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/generate_report_content.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate Report Content — generate_report_content","title":"Generate Report Content — generate_report_content","text":"Internal function generate R Markdown content analysis report","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/generate_report_content.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate Report Content — generate_report_content","text":"","code":"generate_report_content(results, title, include_maps)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/generate_report_content.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate Report Content — generate_report_content","text":"results List. Analysis results title Character. Report title include_maps Logical. Whether include maps","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/generate_report_content.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate Report Content — generate_report_content","text":"Character vector. R Markdown content","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/get_cropland_threshold.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Cropland Threshold by Scale — get_cropland_threshold","title":"Get Cropland Threshold by Scale — get_cropland_threshold","text":"Get appropriate cropland threshold based spatial scale","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/get_cropland_threshold.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Cropland Threshold by Scale — get_cropland_threshold","text":"","code":"get_cropland_threshold(   scale,   county_data = NULL,   target_data = NULL,   baseline_ha = 500 )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/get_cropland_threshold.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Cropland Threshold by Scale — get_cropland_threshold","text":"scale Character. Spatial scale: \"county\", \"huc8\", \"huc2\" county_data Data frame. County-level data (required huc8/huc2) target_data Data frame. Target scale data (required huc8/huc2) baseline_ha Numeric. Baseline county exclusion (default: 500)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/get_cropland_threshold.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Cropland Threshold by Scale — get_cropland_threshold","text":"Numeric. Threshold value","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/get_nutrient_colors.html","id":null,"dir":"Reference","previous_headings":"","what":"Default Color Schemes for Nutrient Classifications — get_nutrient_colors","title":"Default Color Schemes for Nutrient Classifications — get_nutrient_colors","text":"Default Color Schemes Nutrient Classifications","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/get_nutrient_colors.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Default Color Schemes for Nutrient Classifications — get_nutrient_colors","text":"","code":"get_nutrient_colors(nutrient = \"nitrogen\")"},{"path":"https://exelegch.github.io/manureshed-docs/reference/get_nutrient_colors.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Default Color Schemes for Nutrient Classifications — get_nutrient_colors","text":"nutrient Character. Either \"nitrogen\" \"phosphorus\"","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/get_nutrient_colors.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Default Color Schemes for Nutrient Classifications — get_nutrient_colors","text":"Named vector colors classification categories","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/get_state_boundaries.html","id":null,"dir":"Reference","previous_headings":"","what":"Get State Boundaries for Mapping — get_state_boundaries","title":"Get State Boundaries for Mapping — get_state_boundaries","text":"Get US state boundaries excluding non-CONUS states","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/get_state_boundaries.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get State Boundaries for Mapping — get_state_boundaries","text":"","code":"get_state_boundaries()"},{"path":"https://exelegch.github.io/manureshed-docs/reference/get_state_boundaries.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get State Boundaries for Mapping — get_state_boundaries","text":"sf object state boundaries","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/get_state_fips.html","id":null,"dir":"Reference","previous_headings":"","what":"Get State FIPS Code — get_state_fips","title":"Get State FIPS Code — get_state_fips","text":"Convert state abbreviation FIPS code","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/get_state_fips.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get State FIPS Code — get_state_fips","text":"","code":"get_state_fips(state_abbr)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/get_state_fips.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get State FIPS Code — get_state_fips","text":"state_abbr Character. Two-letter state abbreviation (e.g., \"OH\", \"TX\")","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/get_state_fips.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get State FIPS Code — get_state_fips","text":"Character. Two-digit state FIPS code","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/health_check.html","id":null,"dir":"Reference","previous_headings":"","what":"Check Package Health and Dependencies — health_check","title":"Check Package Health and Dependencies — health_check","text":"Diagnostic function check package installation dependencies","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/health_check.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check Package Health and Dependencies — health_check","text":"","code":"health_check(verbose = FALSE)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/health_check.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check Package Health and Dependencies — health_check","text":"verbose Logical. Whether display detailed information","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/health_check.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check Package Health and Dependencies — health_check","text":"Logical. TRUE checks pass","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/health_check.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check Package Health and Dependencies — health_check","text":"","code":"# \\donttest{ # Quick health check health_check() #> manureshed Package Health Check #> =================================== #> ✓ Core dependencies: OK #> ✓ OSF data access: OK (repository accessible) #> ✓ Spatial libraries: OK #> ✓ Mapping capabilities: OK #> ✓ Network analysis: OK #> ✓ Cache directory: OK #> ----------------------------------- #> Health Score:6/6 #>  #> ✓ All systems ready! Package is fully functional.  # Detailed diagnostic information health_check(verbose = TRUE) #> manureshed Package Health Check #> =================================== #> ✓ Core dependencies: OK #> ✓ OSF data access: OK (repository accessible) #> ✓ Spatial libraries: OK #> ✓ Mapping capabilities: OK #> ✓ Network analysis: OK #> ✓ Cache directory: OK #> ----------------------------------- #> Health Score:6/6 #>  #> Detailed Information: #> R version:R version 4.5.2 (2025-10-31) #> Package version:0.1.2 #> Install path:/tmp/RtmpO43uiz/temp_libpath3805c6692bd950/manureshed #> OSF repository:https://osf.io/g39xa/ #> Cache location:/home/oda10/.cache/R/manureshed/data #> Spatial versions: #>   GEOS:3.10.2 #>   GDAL:3.4.1 #>   proj.4:8.2.1 #>   GDAL_with_GEOS:true #>   USE_PROJ_H:true #>   PROJ:8.2.1 #>  #> ✓ All systems ready! Package is fully functional. # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/integrate_complete.html","id":null,"dir":"Reference","previous_headings":"","what":"Complete Integration Pipeline (Updated) — integrate_complete","title":"Complete Integration Pipeline (Updated) — integrate_complete","text":"Run complete integration WWTP agricultural data nutrients","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/integrate_complete.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Complete Integration Pipeline (Updated) — integrate_complete","text":"","code":"integrate_complete(   agri_data,   wwtp_nitrogen_aggregated,   wwtp_phosphorus_aggregated,   cropland_threshold,   scale = \"huc8\",   add_texas = FALSE,   year = 2016 )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/integrate_complete.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Complete Integration Pipeline (Updated) — integrate_complete","text":"agri_data Data frame sf object. Agricultural classification data wwtp_nitrogen_aggregated Data frame. Aggregated nitrogen WWTP data wwtp_phosphorus_aggregated Data frame. Aggregated phosphorus WWTP data cropland_threshold Numeric. Threshold exclusion scale Character. Spatial scale add_texas Logical. Whether add Texas HUC8 data (HUC8 scale) year Numeric. Year Texas data","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/integrate_complete.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Complete Integration Pipeline (Updated) — integrate_complete","text":"List integrated nitrogen phosphorus data","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/integrate_wwtp_agricultural.html","id":null,"dir":"Reference","previous_headings":"","what":"Integrate WWTP Data with Agricultural Classifications (Updated) — integrate_wwtp_agricultural","title":"Integrate WWTP Data with Agricultural Classifications (Updated) — integrate_wwtp_agricultural","text":"Combine WWTP loads agricultural nutrient balance classifications","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/integrate_wwtp_agricultural.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Integrate WWTP Data with Agricultural Classifications (Updated) — integrate_wwtp_agricultural","text":"","code":"integrate_wwtp_agricultural(   agri_data,   wwtp_aggregated,   nutrient,   cropland_threshold,   scale = \"huc8\" )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/integrate_wwtp_agricultural.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Integrate WWTP Data with Agricultural Classifications (Updated) — integrate_wwtp_agricultural","text":"agri_data Data frame. Agricultural classification data wwtp_aggregated Data frame. Aggregated WWTP loads spatial unit nutrient Character. \"nitrogen\" \"phosphorus\" cropland_threshold Numeric. Threshold exclusion classification scale Character. Spatial scale within-unit classification","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/integrate_wwtp_agricultural.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Integrate WWTP Data with Agricultural Classifications (Updated) — integrate_wwtp_agricultural","text":"Data frame combined WWTP + agricultural classifications","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/launch_dashboard.html","id":null,"dir":"Reference","previous_headings":"","what":"Launch Interactive Manureshed Dashboard — launch_dashboard","title":"Launch Interactive Manureshed Dashboard — launch_dashboard","text":"Opens interactive Shiny dashboard exploring nutrient balance data without writing R code. Users can select analysis parameters, view interactive maps, explore statistics, download results.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/launch_dashboard.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Launch Interactive Manureshed Dashboard — launch_dashboard","text":"","code":"launch_dashboard(port = NULL, launch.browser = TRUE)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/launch_dashboard.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Launch Interactive Manureshed Dashboard — launch_dashboard","text":"port Integer. Port number Shiny server (default: random available port) launch.browser Logical. Open browser automatically? (default: TRUE)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/launch_dashboard.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Launch Interactive Manureshed Dashboard — launch_dashboard","text":"NULL (invisibly). Launches Shiny application.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/launch_dashboard.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Launch Interactive Manureshed Dashboard — launch_dashboard","text":"function launches interactive dashboard following features: Select analysis parameters (year, scale, nutrients, WWTP inclusion) View interactive maps nutrient classifications Explore summary statistics distributions Browse results interactive data tables Download results CSV files Generate download PDF reports dashboard requires several suggested packages. installed, run: install.packages(c(\"shiny\", \"shinydashboard\", \"leaflet\", \"plotly\", \"DT\"))","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/launch_dashboard.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Launch Interactive Manureshed Dashboard — launch_dashboard","text":"","code":"if (FALSE) { # \\dontrun{ # Launch the dashboard (requires suggested packages) launch_dashboard()  # Launch on specific port launch_dashboard(port = 3838) } # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/list_available_years.html","id":null,"dir":"Reference","previous_headings":"","what":"List Available Built-in Years — list_available_years","title":"List Available Built-in Years — list_available_years","text":"Show available years data type","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/list_available_years.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List Available Built-in Years — list_available_years","text":"","code":"list_available_years(scale = NULL)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/list_available_years.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"List Available Built-in Years — list_available_years","text":"scale Character. Spatial scale (optional)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/list_available_years.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"List Available Built-in Years — list_available_years","text":"Data frame available years data type","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/load_builtin_boundaries.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Built-in Spatial Boundaries from OSF — load_builtin_boundaries","title":"Load Built-in Spatial Boundaries from OSF — load_builtin_boundaries","text":"Load built-spatial boundary data specified scale OSF repository","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/load_builtin_boundaries.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Built-in Spatial Boundaries from OSF — load_builtin_boundaries","text":"","code":"load_builtin_boundaries(scale, force_download = FALSE, verbose = TRUE)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/load_builtin_boundaries.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Built-in Spatial Boundaries from OSF — load_builtin_boundaries","text":"scale Character. Spatial scale: \"county\", \"huc8\", \"huc2\" force_download Logical. Force re-download even cached verbose Logical. Show download progress","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/load_builtin_boundaries.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Built-in Spatial Boundaries from OSF — load_builtin_boundaries","text":"sf object spatial boundaries","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/load_builtin_nugis.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Built-in NuGIS Data from OSF — load_builtin_nugis","title":"Load Built-in NuGIS Data from OSF — load_builtin_nugis","text":"Load built-NuGIS data OSF repository specified year spatial scale. Data includes years 1987 2016.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/load_builtin_nugis.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Built-in NuGIS Data from OSF — load_builtin_nugis","text":"","code":"load_builtin_nugis(scale, year = 2016, force_download = FALSE, verbose = TRUE)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/load_builtin_nugis.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Built-in NuGIS Data from OSF — load_builtin_nugis","text":"scale Character. Spatial scale: \"county\", \"huc8\", \"huc2\" year Numeric. Year filter data (available: 1987-2016) force_download Logical. Force re-download even cached verbose Logical. Show download progress","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/load_builtin_nugis.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Built-in NuGIS Data from OSF — load_builtin_nugis","text":"Data frame NuGIS data specified scale year","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/load_builtin_nugis.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load Built-in NuGIS Data from OSF — load_builtin_nugis","text":"","code":"# \\donttest{ # Load county data for 2016 county_2016 <- load_builtin_nugis(\"county\", 2016) #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2016 #> Number of spatial units: 3058  # Load HUC8 data for 2010 huc8_2010 <- load_builtin_nugis(\"huc8\", 2010) #> Using cached version of nugis_huc8_data #> Loaded NuGIS huc8 data for year 2010 #> Number of spatial units: 2111  # Load county data for 2010, force fresh download county_2010 <- load_builtin_nugis(\"county\", 2010, force_download = TRUE) #> Downloading nugis_county_data from OSF... #>   File ID: 689a80e81a020593fca5e8b4 #>   Downloaded successfully (1.89 MB) #> Loaded NuGIS county data for year 2010 #> Number of spatial units: 3064 # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/load_builtin_wwtp.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Built-in WWTP Data from OSF — load_builtin_wwtp","title":"Load Built-in WWTP Data from OSF — load_builtin_wwtp","text":"Load built-WWTP data specified year OSF repository (2007-2016 available) Load built-WWTP data specified year OSF repository (2007-2016 available)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/load_builtin_wwtp.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Built-in WWTP Data from OSF — load_builtin_wwtp","text":"","code":"load_builtin_wwtp(   nutrient,   year = 2016,   force_download = FALSE,   verbose = TRUE )  load_builtin_wwtp(   nutrient,   year = 2016,   force_download = FALSE,   verbose = TRUE )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/load_builtin_wwtp.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Built-in WWTP Data from OSF — load_builtin_wwtp","text":"nutrient Character. \"nitrogen\" \"phosphorus\" year Numeric. Year filter data (available: 2007-2016) force_download Logical. Force re-download even cached verbose Logical. Show download progress","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/load_builtin_wwtp.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Built-in WWTP Data from OSF — load_builtin_wwtp","text":"Data frame cleaned WWTP data specified year Data frame cleaned WWTP data specified year","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/load_builtin_wwtp.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load Built-in WWTP Data from OSF — load_builtin_wwtp","text":"","code":"# \\donttest{ # Load WWTP data for different years (2007-2016 available) wwtp_n_2016 <- load_builtin_wwtp(\"nitrogen\", 2016) #> Using cached version of wwtp_nitrogen_combined #> Loaded WWTP nitrogen data for year 2016 #> Number of facilities: 20846 wwtp_n_2012 <- load_builtin_wwtp(\"nitrogen\", 2012) #> Using cached version of wwtp_nitrogen_combined #> Loaded WWTP nitrogen data for year 2012 #> Number of facilities: 26971 wwtp_n_2007 <- load_builtin_wwtp(\"nitrogen\", 2007) #> Using cached version of wwtp_nitrogen_combined #> Loaded WWTP nitrogen data for year 2007 #> Number of facilities: 19738  # Load phosphorus data wwtp_p_2015 <- load_builtin_wwtp(\"phosphorus\", 2015) #> Using cached version of wwtp_phosphorus_combined #> Loaded WWTP phosphorus data for year 2015 #> Number of facilities: 9999 wwtp_p_2010 <- load_builtin_wwtp(\"phosphorus\", 2010) #> Using cached version of wwtp_phosphorus_combined #> Loaded WWTP phosphorus data for year 2010 #> Number of facilities: 7548  # Force re-download wwtp_fresh <- load_builtin_wwtp(\"nitrogen\", 2014, force_download = TRUE) #> Downloading wwtp_nitrogen_combined from OSF... #>   File ID: 689c97483efa05a3a93ccdd2 #>   Downloaded successfully (11.71 MB) #> Loaded WWTP nitrogen data for year 2014 #> Number of facilities: 29089 # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/load_texas_huc8_boundaries.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Texas HUC8 Boundaries from OSF — load_texas_huc8_boundaries","title":"Load Texas HUC8 Boundaries from OSF — load_texas_huc8_boundaries","text":"Load Texas HUC8 spatial boundaries OSF repository","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/load_texas_huc8_boundaries.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Texas HUC8 Boundaries from OSF — load_texas_huc8_boundaries","text":"","code":"load_texas_huc8_boundaries(verbose = FALSE)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/load_texas_huc8_boundaries.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Texas HUC8 Boundaries from OSF — load_texas_huc8_boundaries","text":"verbose Logical. Show loading progress","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/load_texas_huc8_boundaries.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Texas HUC8 Boundaries from OSF — load_texas_huc8_boundaries","text":"sf object Texas HUC8 boundaries","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/load_texas_huc8_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Texas HUC8 Data from OSF — load_texas_huc8_data","title":"Load Texas HUC8 Data from OSF — load_texas_huc8_data","text":"Load Texas HUC8 supplemental data OSF repository","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/load_texas_huc8_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Texas HUC8 Data from OSF — load_texas_huc8_data","text":"","code":"load_texas_huc8_data(year = 2016, verbose = FALSE)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/load_texas_huc8_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Texas HUC8 Data from OSF — load_texas_huc8_data","text":"year Numeric. Year extract Texas data verbose Logical. Show loading progress","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/load_texas_huc8_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Texas HUC8 Data from OSF — load_texas_huc8_data","text":"Data frame Texas HUC8 data specified year","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/load_user_wwtp.html","id":null,"dir":"Reference","previous_headings":"","what":"Load User WWTP Data — load_user_wwtp","title":"Load User WWTP Data — load_user_wwtp","text":"Load standardize user-provided WWTP data flexible formatting Load standardize user-provided WWTP data flexible formatting","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/load_user_wwtp.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load User WWTP Data — load_user_wwtp","text":"","code":"load_user_wwtp(   file_path,   nutrient,   column_mapping = NULL,   skip_rows = 0,   header_row = 1,   load_units = \"kg\" )  load_user_wwtp(   file_path,   nutrient,   column_mapping = NULL,   skip_rows = 0,   header_row = 1,   load_units = \"kg\" )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/load_user_wwtp.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load User WWTP Data — load_user_wwtp","text":"file_path Character. Path WWTP data file nutrient Character. \"nitrogen\" \"phosphorus\" column_mapping Named list. Custom column mapping (optional) skip_rows Numeric. Number rows skip (default: 0) header_row Numeric. Row containing headers (default: 1) load_units Character. Units pollutant loads: \"kg\", \"lbs\", \"pounds\", \"tons\"","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/load_user_wwtp.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load User WWTP Data — load_user_wwtp","text":"Data frame standardized WWTP data Data frame standardized WWTP data","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/load_user_wwtp.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load User WWTP Data — load_user_wwtp","text":"","code":"if (FALSE) { # \\dontrun{ # Standard EPA format but will not run because data needs to be supplied as custom # Load custom WWTP data (for years outside 2007-2016) wwtp_data <- load_user_wwtp(\"nitrogen_2020.csv\", \"nitrogen\")  # For years 2007-2016, consider using built-in data: # wwtp_builtin <- load_builtin_wwtp(\"nitrogen\", 2015)  # Custom format with different units wwtp_data <- load_user_wwtp(\"custom_wwtp.csv\", \"phosphorus\",                           load_units = \"lbs\", skip_rows = 3)   # Custom column mapping custom_map <- list(facility_name = \"Plant_Name\",                   pollutant_load = \"Load_lbs_per_year\") wwtp_data <- load_user_wwtp(\"custom.csv\", \"nitrogen\", custom_map) } # } if (FALSE) { # \\dontrun{  # Standard EPA format wwtp_data <- load_user_wwtp(\"nitrogen_2020.csv\", \"nitrogen\")  # Custom format with different units wwtp_data <- load_user_wwtp(\"custom_wwtp.csv\", \"phosphorus\",                           load_units = \"lbs\", skip_rows = 3)  # Custom column mapping custom_map <- list(facility_name = \"Plant_Name\",                   pollutant_load = \"Load_lbs_per_year\") wwtp_data <- load_user_wwtp(\"custom.csv\", \"nitrogen\", custom_map) } # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/manureshed.html","id":null,"dir":"Reference","previous_headings":"","what":"manureshed: Manureshed Analysis with WWTP Integration — manureshed","title":"manureshed: Manureshed Analysis with WWTP Integration — manureshed","text":"package provides comprehensive tools analyzing agricultural nutrient balances multiple spatial scales optional integration wastewater treatment plant (WWTP) nutrient loads nitrogen phosphorus.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/manureshed.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"manureshed: Manureshed Analysis with WWTP Integration — manureshed","text":"datasets downloaded -demand OSF repository minimize package size maintaining full functionality.","code":""},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/reference/manureshed.html","id":"data-loading-and-management-","dir":"Reference","previous_headings":"","what":"Data Loading and Management:","title":"manureshed: Manureshed Analysis with WWTP Integration — manureshed","text":"load_builtin_nugis: Load NuGIS data OSF load_builtin_boundaries: Load spatial boundaries OSF load_builtin_wwtp: Load WWTP data OSF (2016) check_builtin_data: Check available datasets cache status download_all_data: Download datasets download_osf_data: Download specific dataset clear_data_cache: Clear cached datasets","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/manureshed.html","id":"high-level-workflows-","dir":"Reference","previous_headings":"","what":"High-Level Workflows:","title":"manureshed: Manureshed Analysis with WWTP Integration — manureshed","text":"run_builtin_analysis: Complete end--end analysis workflow quick_analysis: Analysis automatic visualizations batch_analysis_years: Multi-year analysis workflow","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/manureshed.html","id":"agricultural-classification-","dir":"Reference","previous_headings":"","what":"Agricultural Classification:","title":"manureshed: Manureshed Analysis with WWTP Integration — manureshed","text":"agri_process_nugis: Process standardize NuGIS data agri_classify_nitrogen: Classify nitrogen balance agri_classify_phosphorus: Classify phosphorus balance agri_classify_complete: Complete agricultural pipeline","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/manureshed.html","id":"wwtp-processing-","dir":"Reference","previous_headings":"","what":"WWTP Processing:","title":"manureshed: Manureshed Analysis with WWTP Integration — manureshed","text":"load_user_wwtp: Load custom WWTP data flexible formatting wwtp_clean_data: Clean filter WWTP data wwtp_classify_sources: Classify WWTP facilities load size convert_load_units: Handle different load units (kg, lbs, tons)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/manureshed.html","id":"data-integration-","dir":"Reference","previous_headings":"","what":"Data Integration:","title":"manureshed: Manureshed Analysis with WWTP Integration — manureshed","text":"integrate_wwtp_agricultural: Combine WWTP agricultural data integrate_complete: Complete integration pipeline add_texas_huc8: Add Texas HUC8 supplemental data","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/manureshed.html","id":"visualization-and-mapping-","dir":"Reference","previous_headings":"","what":"Visualization and Mapping:","title":"manureshed: Manureshed Analysis with WWTP Integration — manureshed","text":"map_agricultural_classification: Map nutrient classifications map_wwtp_points: Map WWTP facility locations map_wwtp_influence: Map WWTP influence/proportion get_state_boundaries: Get US state boundaries mapping","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/manureshed.html","id":"spatial-analysis-","dir":"Reference","previous_headings":"","what":"Spatial Analysis:","title":"manureshed: Manureshed Analysis with WWTP Integration — manureshed","text":"calculate_transition_probabilities: Spatial transition analysis create_network_plot: Network visualization transitions add_centroid_coordinates: Calculate spatial centroids","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/manureshed.html","id":"comparison-analysis-","dir":"Reference","previous_headings":"","what":"Comparison Analysis:","title":"manureshed: Manureshed Analysis with WWTP Integration — manureshed","text":"create_classification_summary: /comparison summaries plot_before_after_comparison: Comparison bar plots plot_impact_ratios: Impact ratio visualizations plot_absolute_changes: Absolute change plots","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/manureshed.html","id":"utility-functions-","dir":"Reference","previous_headings":"","what":"Utility Functions:","title":"manureshed: Manureshed Analysis with WWTP Integration — manureshed","text":"get_nutrient_colors: Get color schemes nutrients clean_category_names: Clean classification names display format_huc8: Format HUC8 codes leading zeros get_cropland_threshold: Calculate exclusion thresholds","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/manureshed.html","id":"spatial-scales","dir":"Reference","previous_headings":"","what":"Spatial Scales","title":"manureshed: Manureshed Analysis with WWTP Integration — manureshed","text":"package supports analysis three spatial scales: County: US county boundaries (3,000+ units) HUC8: 8-digit Hydrologic Unit Code watersheds (2,000+ units) HUC2: 2-digit Hydrologic Unit Code regions (18 units)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/manureshed.html","id":"nutrients-supported","dir":"Reference","previous_headings":"","what":"Nutrients Supported","title":"manureshed: Manureshed Analysis with WWTP Integration — manureshed","text":"package supports analysis major nutrients appropriate methodologies: Nitrogen: Uses 0.5 availability factor manure nitrogen calculations Phosphorus: Direct calculation without availability factor Users can analyze one nutrient, nutrients, different combinations workflow: nutrients = c(\"nitrogen\", \"phosphorus\")","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/manureshed.html","id":"classification-system","dir":"Reference","previous_headings":"","what":"Classification System","title":"manureshed: Manureshed Analysis with WWTP Integration — manureshed","text":"Spatial units classified five categories based nutrient balance: Source: Net nutrient surplus available export Sink Deficit: Total deficit requiring nutrient imports Sink Fertilizer: Fertilizer surplus available manure import Within Watershed/County: Balanced internal nutrient transfers Excluded: Insufficient cropland meaningful analysis (<500 ha equivalent)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/manureshed.html","id":"data-sources","dir":"Reference","previous_headings":"","what":"Data Sources","title":"manureshed: Manureshed Analysis with WWTP Integration — manureshed","text":"package provides access comprehensive built-datasets:","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/manureshed.html","id":"nugis-data-","dir":"Reference","previous_headings":"","what":"NuGIS Data:","title":"manureshed: Manureshed Analysis with WWTP Integration — manureshed","text":"County-level data (1987 - 2016) HUC8 watershed data (1987 - 2016) HUC2 regional data (1987 - 2016) nutrient balance components (manure, fertilizer, removal, fixation)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/manureshed.html","id":"spatial-boundaries-","dir":"Reference","previous_headings":"","what":"Spatial Boundaries:","title":"manureshed: Manureshed Analysis with WWTP Integration — manureshed","text":"US county boundaries (CONUS) HUC8 watershed boundaries HUC2 regional boundaries Albers Equal Area Conic projection (EPSG:5070)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/manureshed.html","id":"wwtp-data-","dir":"Reference","previous_headings":"","what":"WWTP Data:","title":"manureshed: Manureshed Analysis with WWTP Integration — manureshed","text":"Nitrogen discharge data (2007 - 2016) Phosphorus discharge data (2007 - 2016) Pre-processed classification-ready Includes facility metadata spatial coordinates","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/manureshed.html","id":"supplemental-data-","dir":"Reference","previous_headings":"","what":"Supplemental Data:","title":"manureshed: Manureshed Analysis with WWTP Integration — manureshed","text":"Texas HUC8 data (automatically integrated HUC8 analyses) Texas spatial boundaries","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/manureshed.html","id":"osf-data-repository","dir":"Reference","previous_headings":"","what":"OSF Data Repository","title":"manureshed: Manureshed Analysis with WWTP Integration — manureshed","text":"datasets hosted OSF downloaded -demand: Repository: https://osf.io/g39xa/ Automatic caching: Data downloaded reused Flexible loading: Load data need Version control: Permanent DOI reproducibility Size efficiency: Package <1MB, full datasets ~25MB","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/manureshed.html","id":"wwtp-data-flexibility","dir":"Reference","previous_headings":"","what":"WWTP Data Flexibility","title":"manureshed: Manureshed Analysis with WWTP Integration — manureshed","text":"package handles varying EPA WWTP data formats across different years: Unit Conversion: Automatic conversion kg, lbs, pounds, tons Column Mapping: Flexible mapping handle EPA naming changes Header Detection: Support different header row positions Built-2016: Ready--use cleaned data immediate analysis Custom Integration: Easy integration user data years","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/manureshed.html","id":"workflow-examples","dir":"Reference","previous_headings":"","what":"Workflow Examples","title":"manureshed: Manureshed Analysis with WWTP Integration — manureshed","text":"","code":"# Check what data is available check_builtin_data()  # Download all datasets (optional, ~40MB) download_all_data()  # Basic analysis using built-in data - any year 2007-2016 results <- run_builtin_analysis(   scale = \"huc8\",   year = 2012,  # Any year 2007-2016 now supported   nutrients = c(\"nitrogen\", \"phosphorus\"),   include_wwtp = TRUE )  wwtp_n_2010 <- load_builtin_wwtp(\"nitrogen\", year = 2010) wwtp_p_2015 <- load_builtin_wwtp(\"phosphorus\", year = 2015)   # Quick analysis with automatic visualizations viz_results <- quick_analysis(   scale = \"county\",   year = 2016,   nutrients = \"nitrogen\",   include_wwtp = TRUE )  # Historical analysis without WWTP historical <- run_builtin_analysis(   scale = \"huc8\",   year = 2010,   nutrients = c(\"nitrogen\", \"phosphorus\"),   include_wwtp = FALSE )  # Load specific datasets manually county_2016 <- load_builtin_nugis(\"county\", 2016) boundaries <- load_builtin_boundaries(\"county\") wwtp_n <- load_builtin_wwtp(\"nitrogen\")"},{"path":"https://exelegch.github.io/manureshed-docs/reference/manureshed.html","id":"analysis-outputs","dir":"Reference","previous_headings":"","what":"Analysis Outputs","title":"manureshed: Manureshed Analysis with WWTP Integration — manureshed","text":"package generates comprehensive outputs nutrient analyzed: Spatial Data: Classification results sf objects Maps: Classification, influence, facility maps Networks: Transition probability visualizations Comparisons: /WWTP integration analysis Data Files: CSV centroids, RDS spatial data Metadata: Analysis parameters processing information","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/manureshed.html","id":"performance-and-scalability","dir":"Reference","previous_headings":"","what":"Performance and Scalability","title":"manureshed: Manureshed Analysis with WWTP Integration — manureshed","text":"Optimized CONUS-scale analysis (1000s spatial units) Memory-efficient spatial operations -demand data loading reduces memory footprint Progress reporting long-running analyses Automatic garbage collection memory management","code":""},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/reference/manureshed.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"manureshed: Manureshed Analysis with WWTP Integration — manureshed","text":"Maintainer: Olatunde D. Akanbi olatunde.akanbi@case.edu (ORCID) [copyright holder] Authors: Vibha Mandayam (ORCID) Atharva Gupta (ORCID) K. Colton Flynn (ORCID) Jeffrey Yarus (ORCID) Erika . Barcelos erika.barcelos@case.edu (ORCID) [copyright holder] Roger H. French roger.french@case.edu (ORCID) [copyright holder]","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/map_agricultural_classification.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Agricultural Classification Map — map_agricultural_classification","title":"Create Agricultural Classification Map — map_agricultural_classification","text":"Create map showing agricultural nutrient classifications","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/map_agricultural_classification.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Agricultural Classification Map — map_agricultural_classification","text":"","code":"map_agricultural_classification(data, nutrient, classification_col, title)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/map_agricultural_classification.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Agricultural Classification Map — map_agricultural_classification","text":"data sf object. Spatial data classifications nutrient Character. \"nitrogen\" \"phosphorus\" classification_col Character. Name classification column title Character. Map title","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/map_agricultural_classification.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Agricultural Classification Map — map_agricultural_classification","text":"ggplot object","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/map_wwtp_columns.html","id":null,"dir":"Reference","previous_headings":"","what":"Map WWTP Column Names to Standard Format — map_wwtp_columns","title":"Map WWTP Column Names to Standard Format — map_wwtp_columns","text":"Create mapping EPA WWTP data column names standardized format. Handles various EPA data formats across different years.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/map_wwtp_columns.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Map WWTP Column Names to Standard Format — map_wwtp_columns","text":"","code":"map_wwtp_columns(raw_data, nutrient, custom_mapping = NULL)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/map_wwtp_columns.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Map WWTP Column Names to Standard Format — map_wwtp_columns","text":"raw_data Data frame. Raw WWTP data nutrient Character. \"nitrogen\" \"phosphorus\" custom_mapping Named list. Custom column mappings (optional)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/map_wwtp_columns.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Map WWTP Column Names to Standard Format — map_wwtp_columns","text":"Named list column mappings","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/map_wwtp_columns.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Map WWTP Column Names to Standard Format — map_wwtp_columns","text":"","code":"if (FALSE) { # \\dontrun{ mapping <- map_wwtp_columns(raw_wwtp_data, \"nitrogen\")  # Custom mapping for different format custom_map <- list(facility_name = \"Plant_Name\",                   pollutant_load = \"Annual_Load_kg\") mapping <- map_wwtp_columns(raw_data, \"nitrogen\", custom_map) } # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/map_wwtp_influence.html","id":null,"dir":"Reference","previous_headings":"","what":"Create WWTP Influence Map — map_wwtp_influence","title":"Create WWTP Influence Map — map_wwtp_influence","text":"Create map showing WWTP contribution proportion total nutrient load","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/map_wwtp_influence.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create WWTP Influence Map — map_wwtp_influence","text":"","code":"map_wwtp_influence(data, nutrient, title)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/map_wwtp_influence.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create WWTP Influence Map — map_wwtp_influence","text":"data sf object. Integrated data WWTP proportions nutrient Character. \"nitrogen\" \"phosphorus\" title Character. Map title","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/map_wwtp_influence.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create WWTP Influence Map — map_wwtp_influence","text":"ggplot object","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/map_wwtp_points.html","id":null,"dir":"Reference","previous_headings":"","what":"Create WWTP Point Map — map_wwtp_points","title":"Create WWTP Point Map — map_wwtp_points","text":"Create map showing WWTP locations classified load size","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/map_wwtp_points.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create WWTP Point Map — map_wwtp_points","text":"","code":"map_wwtp_points(wwtp_sf, nutrient, title)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/map_wwtp_points.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create WWTP Point Map — map_wwtp_points","text":"wwtp_sf sf object. Spatial WWTP data classifications nutrient Character. \"nitrogen\" \"phosphorus\" title Character. Map title","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/map_wwtp_points.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create WWTP Point Map — map_wwtp_points","text":"ggplot object","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/plot_absolute_changes.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Absolute Change Plot — plot_absolute_changes","title":"Create Absolute Change Plot — plot_absolute_changes","text":"Create plot showing absolute changes classification counts","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/plot_absolute_changes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Absolute Change Plot — plot_absolute_changes","text":"","code":"plot_absolute_changes(data, title)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/plot_absolute_changes.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Absolute Change Plot — plot_absolute_changes","text":"data Data frame. Summary data absolute changes title Character. Plot title","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/plot_absolute_changes.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Absolute Change Plot — plot_absolute_changes","text":"ggplot object","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/plot_before_after_comparison.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Before/After Comparison Plot — plot_before_after_comparison","title":"Create Before/After Comparison Plot — plot_before_after_comparison","text":"Create side--side comparison agricultural vs WWTP+agricultural classifications","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/plot_before_after_comparison.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Before/After Comparison Plot — plot_before_after_comparison","text":"","code":"plot_before_after_comparison(data, nutrient, title)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/plot_before_after_comparison.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Before/After Comparison Plot — plot_before_after_comparison","text":"data Data frame. Summary data create_classification_summary nutrient Character. \"nitrogen\" \"phosphorus\" coloring title Character. Plot title","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/plot_before_after_comparison.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Before/After Comparison Plot — plot_before_after_comparison","text":"ggplot object","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/plot_impact_ratios.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Impact Ratio Plot — plot_impact_ratios","title":"Create Impact Ratio Plot — plot_impact_ratios","text":"Create plot showing impact WWTP addition ratios","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/plot_impact_ratios.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Impact Ratio Plot — plot_impact_ratios","text":"","code":"plot_impact_ratios(data, title)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/plot_impact_ratios.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Impact Ratio Plot — plot_impact_ratios","text":"data Data frame. Summary data impact ratios title Character. Plot title","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/plot_impact_ratios.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Impact Ratio Plot — plot_impact_ratios","text":"ggplot object","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/quick_analysis.html","id":null,"dir":"Reference","previous_headings":"","what":"Quick Analysis with Visualization — quick_analysis","title":"Quick Analysis with Visualization — quick_analysis","text":"Run analysis automatically generate key visualizations specified nutrients. convenience function combines run_builtin_analysis automatic visualization generation.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/quick_analysis.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Quick Analysis with Visualization — quick_analysis","text":"","code":"quick_analysis(   scale = \"huc8\",   year = 2016,   nutrients = c(\"nitrogen\", \"phosphorus\"),   include_wwtp = TRUE,   output_dir = tempdir(),   create_maps = TRUE,   create_networks = TRUE,   create_comparisons = TRUE,   create_wwtp_maps = TRUE,   wwtp_load_units = \"kg\",   map_resolution = \"medium\",   generate_report = FALSE,   verbose = TRUE,   ... )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/quick_analysis.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Quick Analysis with Visualization — quick_analysis","text":"scale Character. Spatial scale: \"county\", \"huc8\", \"huc2\" year Numeric. Year analyze nutrients Character vector. Nutrients analyze: c(\"nitrogen\", \"phosphorus\") subset include_wwtp Logical. Whether include WWTP analysis (default: TRUE) output_dir Character. Output directory (default: tempdir()) create_maps Logical. Whether create classification maps (default: TRUE) create_networks Logical. Whether create network plots (default: TRUE) create_comparisons Logical. Whether create comparison plots (default: TRUE) create_wwtp_maps Logical. Whether create WWTP facility maps (default: TRUE) wwtp_load_units Character. Units WWTP loads using custom data (default: \"kg\") map_resolution Character. Map resolution: \"low\", \"medium\", \"high\" (default: \"medium\") generate_report Logical. Whether generate HTML report (default: FALSE) verbose Logical. Whether print progress messages (default: TRUE) ... Additional arguments passed run_builtin_analysis","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/quick_analysis.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Quick Analysis with Visualization — quick_analysis","text":"List results file paths created visualizations","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/quick_analysis.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Quick Analysis with Visualization — quick_analysis","text":"","code":"# \\donttest{ # Quick analysis with all visualizations (2007-2016 WWTP available) results <- quick_analysis(   scale = \"huc8\",   year = 2012,  # Use valid year   nutrients = c(\"nitrogen\", \"phosphorus\"),   include_wwtp = TRUE,   generate_report = TRUE ) #>  #> ====================================================================== #> QUICK MANURESHED ANALYSIS WITH VISUALIZATION #> ====================================================================== #> Scale:huc8 #> Year:2012 #> Nutrients:nitrogen, phosphorus #> Visualizations: Maps =TRUE, Networks =TRUE, Comparisons =TRUE #> ---------------------------------------------------------------------- #>  #>  #> ====================================================================== #> BATCH MANURESHED ANALYSIS #> ====================================================================== #> Year: 2012 #> Scale: huc8 #> Nutrients: nitrogen, phosphorus #> ---------------------------------------------------------------------- #> Checking data availability... #> Data availability confirmed #>   Available scales:county, huc8, huc2 #>   Available years forhuc8:1987-2016 #>   Built-in WWTP data:Available (2007-2016) #>  #> Loading built-in NuGIS data... #> Using cached version of nugis_huc8_data #> Loaded NuGIS huc8 data for year 2012 #> Number of spatial units: 2111 #> Loading built-in spatial boundaries... #> Using cached version of huc8_boundaries #> Loaded huc8 boundaries #> Number of spatial units: 2132 #> Calculating cropland threshold... #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2012 #> Number of spatial units: 3064 #> Calculated cropland threshold: #>   County baseline: 500 ha (1235.53 acres) #>   Percentile in county data: 5.32% #>   Threshold for target scale: 1731.65 acres #> Cropland threshold:1731.65acres #>  #> Processing agricultural classifications... #> Starting complete agricultural classification for huc8 scale... #> Processed NuGIS data for huc8 scale: #>   Spatial units: 2111 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 113 units #>   Sink_Deficit: 1494 units #>   Sink_Fertilizer: 340 units #>   Source: 26 units #>   Within_Watershed: 138 units #> Phosphorus classification summary: #>   Excluded: 113 units #>   Sink_Deficit: 1073 units #>   Sink_Fertilizer: 402 units #>   Source: 197 units #>   Within_Watershed: 326 units #> Agricultural classification complete! #> Applied threshold: 1731.65 acres #> Agricultural classification complete #>   Spatial units processed:2132 #>   Nitrogen classes:Excluded ( 115 ), Sink_Deficit ( 1509 ), Sink_Fertilizer ( 342 ), Source ( 26 ), Within_Watershed ( 140 ) #>   Phosphorus classes:Excluded ( 115 ), Sink_Deficit ( 1087 ), Sink_Fertilizer ( 402 ), Source ( 198 ), Within_Watershed ( 330 ) #>  #> Processing WWTP data... #>   Nutrients:nitrogen, phosphorus #>   WWTP year:2012 #>   Load units:kg #>   Data source:Built-in (2012) #>   Loading built-in nitrogen WWTP data for2012... #> Using cached version of wwtp_nitrogen_combined #> Loaded WWTP nitrogen data for year 2012 #> Number of facilities: 26971 #>   Loading built-in phosphorus WWTP data for2012... #> Using cached version of wwtp_phosphorus_combined #> Loaded WWTP phosphorus data for year 2012 #> Number of facilities: 8324 #>   Processing nitrogen WWTP facilities... #> Filtered for positive nitrogen loads: #>   Original: 26971 facilities #>   With positive loads: 26971 facilities #> WWTP nitrogen source classification: #>   Minor Source: 22348 facilities #>   Small Source: 2555 facilities #>   Medium Source: 1052 facilities #>   Large Source: 803 facilities #>   Very Large Source: 213 facilities #> Created spatial WWTP data with 26971 facilities #> Looking for boundary ID column: 'huc8' #> Available columns in boundaries: huc8, name, geometry, areasqkm #> Aggregating WWTP nitrogen loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 26971 #>   Spatial units with facilities: 1403 #>   Total nitrogen load: 1069082.41 tons/year #>   Processing phosphorus WWTP facilities... #> Filtered for positive phosphorus loads: #>   Original: 8324 facilities #>   With positive loads: 8324 facilities #> WWTP phosphorus source classification: #>   Minor Source: 5151 facilities #>   Small Source: 1680 facilities #>   Medium Source: 755 facilities #>   Large Source: 599 facilities #>   Very Large Source: 139 facilities #> Created spatial WWTP data with 8324 facilities #> Looking for boundary ID column: 'huc8' #> Available columns in boundaries: huc8, name, geometry, areasqkm #> Aggregating WWTP phosphorus loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 8324 #>   Spatial units with facilities: 1004 #>   Total phosphorus load: 86212.84 tons/year #> WWTP data processing complete #>   nitrogen:26971facilities in1403spatial units #>   phosphorus:8324facilities in1004spatial units #>  #> Integrating WWTP and agricultural data... #> Integrating WWTP nitrogen data with agricultural classifications... #> Using agricultural ID column: huc8 #> Combined nitrogen classification summary: #>   Excluded: 115 units #>   Sink_Deficit: 1436 units #>   Sink_Fertilizer: 323 units #>   Source: 91 units #>   Within_Watershed: 167 units #> Integrating WWTP phosphorus data with agricultural classifications... #> Using agricultural ID column: huc8 #> Combined phosphorus classification summary: #>   Excluded: 115 units #>   Sink_Deficit: 1041 units #>   Sink_Fertilizer: 381 units #>   Source: 251 units #>   Within_Watershed: 344 units #>  Integration complete #>  #> Saving results... #> Saved spatial data to: /tmp/Rtmp0dSqZ3/huc8_agricultural_2012.rds #> File size: 7.11 MB #> Rows: 2132, Columns: 17 #> Geometry type: MULTIPOLYGON #> CRS: EPSG:5070 #> Saved spatial data to: /tmp/Rtmp0dSqZ3/huc8_nitrogen_integrated_2012.rds #> File size: 7.15 MB #> Rows: 2132, Columns: 23 #> Geometry type: MULTIPOLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/huc8_nitrogen_centroids_2012.csv #> File size: 565.05 KB #> Rows: 2132, Columns: 24 #> Longitude range: [-124.345, -67.71] #> Latitude range: [25.201, 48.988] #> Saved spatial data to: /tmp/Rtmp0dSqZ3/huc8_phosphorus_integrated_2012.rds #> File size: 7.15 MB #> Rows: 2132, Columns: 23 #> Geometry type: MULTIPOLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/huc8_phosphorus_centroids_2012.csv #> File size: 550.58 KB #> Rows: 2132, Columns: 24 #> Longitude range: [-124.345, -67.71] #> Latitude range: [25.201, 48.988] #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/analysis_summary_2012.rds #> Format: RDS #> File size: 0.79 KB #>  Results saved to:/tmp/Rtmp0dSqZ3 #>   Files created:6 #>  #> ====================================================================== #> ANALYSIS COMPLETE #> ====================================================================== #> Processing time:0.1minutes #> Scale:huc8 #> Year:2012 #> Nutrients analyzed:nitrogen, phosphorus #> Spatial units:2132 #> WWTP facilities:35295 #> Output directory:/tmp/Rtmp0dSqZ3 #> ====================================================================== #> Generating visualizations... #>   Creatingnitrogenvisualizations... #> Retrieving data for the year 2024 #>    |                                                                               |                                                                      |   0%   |                                                                               |                                                                      |   1%   |                                                                               |=                                                                     |   1%   |                                                                               |=                                                                     |   2%   |                                                                               |==                                                                    |   2%   |                                                                               |==                                                                    |   3%   |                                                                               |===                                                                   |   4%   |                                                                               |===                                                                   |   5%   |                                                                               |====                                                                  |   5%   |                                                                               |====                                                                  |   6%   |                                                                               |=====                                                                 |   7%   |                                                                               |======                                                                |   8%   |                                                                               |======                                                                |   9%   |                                                                               |=======                                                               |  10%   |                                                                               |========                                                              |  11%   |                                                                               |========                                                              |  12%   |                                                                               |=========                                                             |  13%   |                                                                               |==========                                                            |  14%   |                                                                               |==========                                                            |  15%   |                                                                               |===========                                                           |  15%   |                                                                               |===========                                                           |  16%   |                                                                               |============                                                          |  17%   |                                                                               |=============                                                         |  19%   |                                                                               |==============                                                        |  20%   |                                                                               |===============                                                       |  21%   |                                                                               |================                                                      |  22%   |                                                                               |================                                                      |  23%   |                                                                               |=================                                                     |  24%   |                                                                               |==================                                                    |  25%   |                                                                               |==================                                                    |  26%   |                                                                               |===================                                                   |  27%   |                                                                               |===================                                                   |  28%   |                                                                               |====================                                                  |  29%   |                                                                               |=====================                                                 |  29%   |                                                                               |======================                                                |  31%   |                                                                               |=======================                                               |  32%   |                                                                               |========================                                              |  34%   |                                                                               |========================                                              |  35%   |                                                                               |=========================                                             |  35%   |                                                                               |==========================                                            |  36%   |                                                                               |==========================                                            |  37%   |                                                                               |===========================                                           |  38%   |                                                                               |===========================                                           |  39%   |                                                                               |============================                                          |  39%   |                                                                               |============================                                          |  40%   |                                                                               |============================                                          |  41%   |                                                                               |=============================                                         |  42%   |                                                                               |==============================                                        |  42%   |                                                                               |==============================                                        |  43%   |                                                                               |===============================                                       |  44%   |                                                                               |===============================                                       |  45%   |                                                                               |================================                                      |  45%   |                                                                               |================================                                      |  46%   |                                                                               |=================================                                     |  48%   |                                                                               |==================================                                    |  48%   |                                                                               |===================================                                   |  50%   |                                                                               |====================================                                  |  51%   |                                                                               |====================================                                  |  52%   |                                                                               |=====================================                                 |  52%   |                                                                               |======================================                                |  54%   |                                                                               |=======================================                               |  55%   |                                                                               |========================================                              |  57%   |                                                                               |=========================================                             |  58%   |                                                                               |=========================================                             |  59%   |                                                                               |==========================================                            |  60%   |                                                                               |===========================================                           |  61%   |                                                                               |===========================================                           |  62%   |                                                                               |============================================                          |  63%   |                                                                               |============================================                          |  64%   |                                                                               |==============================================                        |  65%   |                                                                               |==============================================                        |  66%   |                                                                               |===============================================                       |  67%   |                                                                               |================================================                      |  68%   |                                                                               |================================================                      |  69%   |                                                                               |=================================================                     |  70%   |                                                                               |==================================================                    |  71%   |                                                                               |==================================================                    |  72%   |                                                                               |===================================================                   |  73%   |                                                                               |====================================================                  |  74%   |                                                                               |=====================================================                 |  75%   |                                                                               |=====================================================                 |  76%   |                                                                               |======================================================                |  77%   |                                                                               |=======================================================               |  78%   |                                                                               |========================================================              |  79%   |                                                                               |========================================================              |  80%   |                                                                               |=========================================================             |  81%   |                                                                               |=========================================================             |  82%   |                                                                               |==========================================================            |  83%   |                                                                               |==========================================================            |  84%   |                                                                               |===========================================================           |  84%   |                                                                               |============================================================          |  86%   |                                                                               |=============================================================         |  87%   |                                                                               |==============================================================        |  89%   |                                                                               |===============================================================       |  90%   |                                                                               |===============================================================       |  91%   |                                                                               |================================================================      |  91%   |                                                                               |================================================================      |  92%   |                                                                               |=================================================================     |  93%   |                                                                               |==================================================================    |  95%   |                                                                               |===================================================================   |  96%   |                                                                               |====================================================================  |  97%   |                                                                               |===================================================================== |  98%   |                                                                               |===================================================================== |  99%   |                                                                               |======================================================================| 100% #> Saved plot to: /tmp/Rtmp0dSqZ3/map_agricultural_nitrogen_2012.png #> Dimensions: 11 x 6 in at 300 DPI #> File size: 1639.32 KB #> Device: png #> Retrieving data for the year 2024 #> Saved plot to: /tmp/Rtmp0dSqZ3/map_combined_nitrogen_2012.png #> Dimensions: 11 x 6 in at 300 DPI #> File size: 1646.81 KB #> Device: png #> Retrieving data for the year 2024 #> Saved plot to: /tmp/Rtmp0dSqZ3/map_wwtp_influence_nitrogen_2012.png #> Dimensions: 11 x 6 in at 300 DPI #> File size: 1689.25 KB #> Device: png #> Retrieving data for the year 2024 #> Saved plot to: /tmp/Rtmp0dSqZ3/map_wwtp_facilities_nitrogen_2012.png #> Dimensions: 11 x 6 in at 300 DPI #> File size: 1191.16 KB #> Device: png #> Created network plot: /tmp/Rtmp0dSqZ3/network_agricultural_nitrogen_2012.png #> Created network plot: /tmp/Rtmp0dSqZ3/network_combined_nitrogen_2012.png #> TRANSITION PROBABILITY MATRIX METADATA #> ====================================== #>  #> created_date:2026-01-27 20:15:50.752215 #> nutrient:nitrogen #> analysis_type:agricultural #> n_categories:4 #> categories: #>   Sink_Deficit #>   Sink_Fertilizer #>   Source #>   Within_Watershed #> Saved transition matrix to: /tmp/Rtmp0dSqZ3/transitions_agricultural_nitrogen_2012.csv #> Saved metadata to: /tmp/Rtmp0dSqZ3/transitions_agricultural_nitrogen_2012_metadata.txt #> File size: 0.19 KB #> Matrix dimensions: 4 x 4 #> TRANSITION PROBABILITY MATRIX METADATA #> ====================================== #>  #> created_date:2026-01-27 20:15:50.755628 #> nutrient:nitrogen #> analysis_type:combined #> n_categories:4 #> categories: #>   Sink_Deficit #>   Sink_Fertilizer #>   Source #>   Within_Watershed #> Saved transition matrix to: /tmp/Rtmp0dSqZ3/transitions_combined_nitrogen_2012.csv #> Saved metadata to: /tmp/Rtmp0dSqZ3/transitions_combined_nitrogen_2012_metadata.txt #> File size: 0.2 KB #> Matrix dimensions: 4 x 4 #> Saved plot to: /tmp/Rtmp0dSqZ3/comparison_nitrogen_2012.png #> Dimensions: 11 x 6 in at 300 DPI #> File size: 83.44 KB #> Device: png #> Saved plot to: /tmp/Rtmp0dSqZ3/impact_nitrogen_2012.png #> Dimensions: 11 x 6 in at 300 DPI #> File size: 79.01 KB #> Device: png #> Saved plot to: /tmp/Rtmp0dSqZ3/changes_nitrogen_2012.png #> Dimensions: 11 x 6 in at 300 DPI #> File size: 81.24 KB #> Device: png #>   Creatingphosphorusvisualizations... #> Retrieving data for the year 2024 #> Saved plot to: /tmp/Rtmp0dSqZ3/map_agricultural_phosphorus_2012.png #> Dimensions: 11 x 6 in at 300 DPI #> File size: 1536.55 KB #> Device: png #> Retrieving data for the year 2024 #> Saved plot to: /tmp/Rtmp0dSqZ3/map_combined_phosphorus_2012.png #> Dimensions: 11 x 6 in at 300 DPI #> File size: 1547.15 KB #> Device: png #> Retrieving data for the year 2024 #> Saved plot to: /tmp/Rtmp0dSqZ3/map_wwtp_influence_phosphorus_2012.png #> Dimensions: 11 x 6 in at 300 DPI #> File size: 1676.75 KB #> Device: png #> Retrieving data for the year 2024 #> Saved plot to: /tmp/Rtmp0dSqZ3/map_wwtp_facilities_phosphorus_2012.png #> Dimensions: 11 x 6 in at 300 DPI #> File size: 1248.58 KB #> Device: png #> Created network plot: /tmp/Rtmp0dSqZ3/network_agricultural_phosphorus_2012.png #> Created network plot: /tmp/Rtmp0dSqZ3/network_combined_phosphorus_2012.png #> TRANSITION PROBABILITY MATRIX METADATA #> ====================================== #>  #> created_date:2026-01-27 20:15:57.541814 #> nutrient:phosphorus #> analysis_type:agricultural #> n_categories:4 #> categories: #>   Sink_Deficit #>   Sink_Fertilizer #>   Source #>   Within_Watershed #> Saved transition matrix to: /tmp/Rtmp0dSqZ3/transitions_agricultural_phosphorus_2012.csv #> Saved metadata to: /tmp/Rtmp0dSqZ3/transitions_agricultural_phosphorus_2012_metadata.txt #> File size: 0.2 KB #> Matrix dimensions: 4 x 4 #> TRANSITION PROBABILITY MATRIX METADATA #> ====================================== #>  #> created_date:2026-01-27 20:15:57.545962 #> nutrient:phosphorus #> analysis_type:combined #> n_categories:4 #> categories: #>   Sink_Deficit #>   Sink_Fertilizer #>   Source #>   Within_Watershed #> Saved transition matrix to: /tmp/Rtmp0dSqZ3/transitions_combined_phosphorus_2012.csv #> Saved metadata to: /tmp/Rtmp0dSqZ3/transitions_combined_phosphorus_2012_metadata.txt #> File size: 0.2 KB #> Matrix dimensions: 4 x 4 #> Saved plot to: /tmp/Rtmp0dSqZ3/comparison_phosphorus_2012.png #> Dimensions: 11 x 6 in at 300 DPI #> File size: 84.42 KB #> Device: png #> Saved plot to: /tmp/Rtmp0dSqZ3/impact_phosphorus_2012.png #> Dimensions: 11 x 6 in at 300 DPI #> File size: 79.21 KB #> Device: png #> Saved plot to: /tmp/Rtmp0dSqZ3/changes_phosphorus_2012.png #> Dimensions: 11 x 6 in at 300 DPI #> File size: 83.76 KB #> Device: png #>   Generating analysis report... #> Generated analysis report: /tmp/Rtmp0dSqZ3/analysis_report_2012.html #> Format: HTML #>  Visualization complete #>   Files created:25 #>   By type:data_nitrogen ( 1 ), data_phosphorus ( 1 ), facilities_nitrogen_map ( 1 ), facilities_phosphorus_map ( 1 ), influence_nitrogen_map ( 1 ), influence_phosphorus_map ( 1 ), nitrogen ( 3 ), nitrogen_map ( 2 ), nitrogen_network ( 2 ), nitrogen_transitions ( 2 ), phosphorus ( 3 ), phosphorus_map ( 2 ), phosphorus_network ( 2 ), phosphorus_transitions ( 2 ), report ( 1 ) #>   Resolution:medium(11x6 @ 300 DPI) #>   Total time:0.34minutes #>  #> ====================================================================== #> QUICK ANALYSIS COMPLETE #> ====================================================================== #> Analysis + Visualization time:0.34minutes #> Output files:29 #> Output directory:/tmp/Rtmp0dSqZ3 #> Nutrients analyzed:nitrogen, phosphorus #> Report generated:analysis_report_2012.html #> ======================================================================  # Agricultural only analysis for pre-WWTP year results <- quick_analysis(   scale = \"county\",   year = 2005,  # Before WWTP data   nutrients = \"nitrogen\",   include_wwtp = FALSE,   create_networks = FALSE ) #>  #> ====================================================================== #> QUICK MANURESHED ANALYSIS WITH VISUALIZATION #> ====================================================================== #> Scale:county #> Year:2005 #> Nutrients:nitrogen #> Visualizations: Maps =TRUE, Networks =FALSE, Comparisons =TRUE #> ---------------------------------------------------------------------- #>  #>  #> ====================================================================== #> BATCH MANURESHED ANALYSIS #> ====================================================================== #> Year: 2005 #> Scale: county #> Nutrients: nitrogen #> ---------------------------------------------------------------------- #> Checking data availability... #> Data availability confirmed #>   Available scales:county, huc8, huc2 #>   Available years forcounty:1987-2016 #>   Built-in WWTP data:Available (2007-2016) #>  #> Loading built-in NuGIS data... #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2005 #> Number of spatial units: 3064 #> Loading built-in spatial boundaries... #> Using cached version of county_boundaries #> Loaded county boundaries #> Number of spatial units: 3112 #> Calculating cropland threshold... #> Cropland threshold:1235.53acres #>  #> Processing agricultural classifications... #> Starting complete agricultural classification for county scale... #> Processed NuGIS data for county scale: #>   Spatial units: 3064 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 138 units #>   Sink_Deficit: 2248 units #>   Sink_Fertilizer: 408 units #>   Source: 88 units #>   Within_County: 182 units #> Phosphorus classification summary: #>   Excluded: 138 units #>   Sink_Deficit: 1410 units #>   Sink_Fertilizer: 828 units #>   Source: 372 units #>   Within_County: 316 units #> Agricultural classification complete! #> Applied threshold: 1235.53 acres #> Agricultural classification complete #>   Spatial units processed:3112 #>   Nitrogen classes:Excluded ( 186 ), Sink_Deficit ( 2248 ), Sink_Fertilizer ( 408 ), Source ( 88 ), Within_County ( 182 ) #>   Phosphorus classes:Excluded ( 186 ), Sink_Deficit ( 1410 ), Sink_Fertilizer ( 828 ), Source ( 372 ), Within_County ( 316 ) #>  #> WWTP analysis skipped #>  #> Saving results... #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_agricultural_2005.rds #> File size: 1.04 MB #> Rows: 3112, Columns: 17 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/analysis_summary_2005.rds #> Format: RDS #> File size: 0.5 KB #>  Results saved to:/tmp/Rtmp0dSqZ3 #>   Files created:2 #>  #> ====================================================================== #> ANALYSIS COMPLETE #> ====================================================================== #> Processing time:0.01minutes #> Scale:county #> Year:2005 #> Nutrients analyzed:nitrogen #> Spatial units:3112 #> Output directory:/tmp/Rtmp0dSqZ3 #> ====================================================================== #> Generating visualizations... #>   Creatingnitrogenvisualizations... #> Retrieving data for the year 2024 #> Saved plot to: /tmp/Rtmp0dSqZ3/map_agricultural_nitrogen_2005.png #> Dimensions: 11 x 6 in at 300 DPI #> File size: 1202.14 KB #> Device: png #>  Visualization complete #>   Files created:1 #>   By type:nitrogen_map ( 1 ) #>   Resolution:medium(11x6 @ 300 DPI) #>   Total time:0.03minutes #>  #> ====================================================================== #> QUICK ANALYSIS COMPLETE #> ====================================================================== #> Analysis + Visualization time:0.03minutes #> Output files:1 #> Output directory:/tmp/Rtmp0dSqZ3 #> Nutrients analyzed:nitrogen #> ======================================================================  # High-resolution analysis with expanded year range results <- quick_analysis(   scale = \"huc8\",   year = 2008,  # Use valid WWTP year   nutrients = \"phosphorus\",   include_wwtp = TRUE,   map_resolution = \"high\" ) #>  #> ====================================================================== #> QUICK MANURESHED ANALYSIS WITH VISUALIZATION #> ====================================================================== #> Scale:huc8 #> Year:2008 #> Nutrients:phosphorus #> Visualizations: Maps =TRUE, Networks =TRUE, Comparisons =TRUE #> ---------------------------------------------------------------------- #>  #>  #> ====================================================================== #> BATCH MANURESHED ANALYSIS #> ====================================================================== #> Year: 2008 #> Scale: huc8 #> Nutrients: phosphorus #> ---------------------------------------------------------------------- #> Checking data availability... #> Data availability confirmed #>   Available scales:county, huc8, huc2 #>   Available years forhuc8:1987-2016 #>   Built-in WWTP data:Available (2007-2016) #>  #> Loading built-in NuGIS data... #> Using cached version of nugis_huc8_data #> Loaded NuGIS huc8 data for year 2008 #> Number of spatial units: 2111 #> Loading built-in spatial boundaries... #> Using cached version of huc8_boundaries #> Loaded huc8 boundaries #> Number of spatial units: 2132 #> Calculating cropland threshold... #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2008 #> Number of spatial units: 3064 #> Calculated cropland threshold: #>   County baseline: 500 ha (1235.53 acres) #>   Percentile in county data: 4.44% #>   Threshold for target scale: 1231.89 acres #> Cropland threshold:1231.89acres #>  #> Processing agricultural classifications... #> Starting complete agricultural classification for huc8 scale... #> Processed NuGIS data for huc8 scale: #>   Spatial units: 2111 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 94 units #>   Sink_Deficit: 1635 units #>   Sink_Fertilizer: 231 units #>   Source: 34 units #>   Within_Watershed: 117 units #> Phosphorus classification summary: #>   Excluded: 94 units #>   Sink_Deficit: 1134 units #>   Sink_Fertilizer: 327 units #>   Source: 221 units #>   Within_Watershed: 335 units #> Agricultural classification complete! #> Applied threshold: 1231.89 acres #> Agricultural classification complete #>   Spatial units processed:2132 #>   Nitrogen classes:Excluded ( 96 ), Sink_Deficit ( 1651 ), Sink_Fertilizer ( 234 ), Source ( 34 ), Within_Watershed ( 117 ) #>   Phosphorus classes:Excluded ( 96 ), Sink_Deficit ( 1147 ), Sink_Fertilizer ( 330 ), Source ( 222 ), Within_Watershed ( 337 ) #>  #> Processing WWTP data... #>   Nutrients:phosphorus #>   WWTP year:2008 #>   Load units:kg #>   Data source:Built-in (2008) #>   Loading built-in phosphorus WWTP data for2008... #> Using cached version of wwtp_phosphorus_combined #> Loaded WWTP phosphorus data for year 2008 #> Number of facilities: 6838 #>   Processing phosphorus WWTP facilities... #> Filtered for positive phosphorus loads: #>   Original: 6838 facilities #>   With positive loads: 6838 facilities #> WWTP phosphorus source classification: #>   Minor Source: 4027 facilities #>   Small Source: 1473 facilities #>   Medium Source: 656 facilities #>   Large Source: 524 facilities #>   Very Large Source: 158 facilities #> Created spatial WWTP data with 6838 facilities #> Looking for boundary ID column: 'huc8' #> Available columns in boundaries: huc8, name, geometry, areasqkm #> Aggregating WWTP phosphorus loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 6838 #>   Spatial units with facilities: 887 #>   Total phosphorus load: 120477.51 tons/year #> WWTP data processing complete #>   phosphorus:6838facilities in887spatial units #>  #> Integrating WWTP and agricultural data... #> Integrating WWTP phosphorus data with agricultural classifications... #> Using agricultural ID column: huc8 #> Combined phosphorus classification summary: #>   Excluded: 96 units #>   Sink_Deficit: 1099 units #>   Sink_Fertilizer: 304 units #>   Source: 278 units #>   Within_Watershed: 355 units #>  Integration complete #>  #> Saving results... #> Saved spatial data to: /tmp/Rtmp0dSqZ3/huc8_agricultural_2008.rds #> File size: 7.11 MB #> Rows: 2132, Columns: 17 #> Geometry type: MULTIPOLYGON #> CRS: EPSG:5070 #> Saved spatial data to: /tmp/Rtmp0dSqZ3/huc8_phosphorus_integrated_2008.rds #> File size: 7.14 MB #> Rows: 2132, Columns: 23 #> Geometry type: MULTIPOLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/huc8_phosphorus_centroids_2008.csv #> File size: 545.13 KB #> Rows: 2132, Columns: 24 #> Longitude range: [-124.345, -67.71] #> Latitude range: [25.201, 48.988] #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/analysis_summary_2008.rds #> Format: RDS #> File size: 0.72 KB #>  Results saved to:/tmp/Rtmp0dSqZ3 #>   Files created:4 #>  #> ====================================================================== #> ANALYSIS COMPLETE #> ====================================================================== #> Processing time:0.04minutes #> Scale:huc8 #> Year:2008 #> Nutrients analyzed:phosphorus #> Spatial units:2132 #> WWTP facilities:6838 #> Output directory:/tmp/Rtmp0dSqZ3 #> ====================================================================== #> Generating visualizations... #>   Creatingphosphorusvisualizations... #> Retrieving data for the year 2024 #> Saved plot to: /tmp/Rtmp0dSqZ3/map_agricultural_phosphorus_2008.png #> Dimensions: 16 x 9 in at 450 DPI #> File size: 4582.24 KB #> Device: png #> Retrieving data for the year 2024 #> Saved plot to: /tmp/Rtmp0dSqZ3/map_combined_phosphorus_2008.png #> Dimensions: 16 x 9 in at 450 DPI #> File size: 4606.45 KB #> Device: png #> Retrieving data for the year 2024 #> Saved plot to: /tmp/Rtmp0dSqZ3/map_wwtp_influence_phosphorus_2008.png #> Dimensions: 16 x 9 in at 450 DPI #> File size: 5047.38 KB #> Device: png #> Retrieving data for the year 2024 #> Saved plot to: /tmp/Rtmp0dSqZ3/map_wwtp_facilities_phosphorus_2008.png #> Dimensions: 16 x 9 in at 450 DPI #> File size: 3454.32 KB #> Device: png #> Created network plot: /tmp/Rtmp0dSqZ3/network_agricultural_phosphorus_2008.png #> Created network plot: /tmp/Rtmp0dSqZ3/network_combined_phosphorus_2008.png #> TRANSITION PROBABILITY MATRIX METADATA #> ====================================== #>  #> created_date:2026-01-27 20:16:11.08319 #> nutrient:phosphorus #> analysis_type:agricultural #> n_categories:4 #> categories: #>   Sink_Deficit #>   Sink_Fertilizer #>   Source #>   Within_Watershed #> Saved transition matrix to: /tmp/Rtmp0dSqZ3/transitions_agricultural_phosphorus_2008.csv #> Saved metadata to: /tmp/Rtmp0dSqZ3/transitions_agricultural_phosphorus_2008_metadata.txt #> File size: 0.2 KB #> Matrix dimensions: 4 x 4 #> TRANSITION PROBABILITY MATRIX METADATA #> ====================================== #>  #> created_date:2026-01-27 20:16:11.086663 #> nutrient:phosphorus #> analysis_type:combined #> n_categories:4 #> categories: #>   Sink_Deficit #>   Sink_Fertilizer #>   Source #>   Within_Watershed #> Saved transition matrix to: /tmp/Rtmp0dSqZ3/transitions_combined_phosphorus_2008.csv #> Saved metadata to: /tmp/Rtmp0dSqZ3/transitions_combined_phosphorus_2008_metadata.txt #> File size: 0.2 KB #> Matrix dimensions: 4 x 4 #> Saved plot to: /tmp/Rtmp0dSqZ3/comparison_phosphorus_2008.png #> Dimensions: 16 x 9 in at 450 DPI #> File size: 190.9 KB #> Device: png #> Saved plot to: /tmp/Rtmp0dSqZ3/impact_phosphorus_2008.png #> Dimensions: 16 x 9 in at 450 DPI #> File size: 185.55 KB #> Device: png #> Saved plot to: /tmp/Rtmp0dSqZ3/changes_phosphorus_2008.png #> Dimensions: 16 x 9 in at 450 DPI #> File size: 190.03 KB #> Device: png #>  Visualization complete #>   Files created:12 #>   By type:data_phosphorus ( 1 ), facilities_phosphorus_map ( 1 ), influence_phosphorus_map ( 1 ), phosphorus ( 3 ), phosphorus_map ( 2 ), phosphorus_network ( 2 ), phosphorus_transitions ( 2 ) #>   Resolution:high(16x9 @ 450 DPI) #>   Total time:0.22minutes #>  #> ====================================================================== #> QUICK ANALYSIS COMPLETE #> ====================================================================== #> Analysis + Visualization time:0.22minutes #> Output files:14 #> Output directory:/tmp/Rtmp0dSqZ3 #> Nutrients analyzed:phosphorus #> ====================================================================== # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/quick_check.html","id":null,"dir":"Reference","previous_headings":"","what":"Quick Data Check — quick_check","title":"Quick Data Check — quick_check","text":"Perform quick validation checks analysis results","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/quick_check.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Quick Data Check — quick_check","text":"","code":"quick_check(results, verbose = TRUE)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/quick_check.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Quick Data Check — quick_check","text":"results Analysis results object verbose Logical. Print detailed messages","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/quick_check.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Quick Data Check — quick_check","text":"Logical. TRUE checks pass","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/quick_state_analysis.html","id":null,"dir":"Reference","previous_headings":"","what":"Quick State Analysis with Visualization — quick_state_analysis","title":"Quick State Analysis with Visualization — quick_state_analysis","text":"Run state-level analysis automatic visualizations","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/quick_state_analysis.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Quick State Analysis with Visualization — quick_state_analysis","text":"","code":"quick_state_analysis(   state,   scale = \"huc8\",   year = 2016,   nutrients = c(\"nitrogen\", \"phosphorus\"),   include_wwtp = TRUE,   output_dir = file.path(tempdir(), paste0(\"state_\", tolower(state), \"_results\")),   create_maps = TRUE,   create_networks = TRUE,   create_comparisons = TRUE,   verbose = TRUE,   ... )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/quick_state_analysis.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Quick State Analysis with Visualization — quick_state_analysis","text":"state Character. Two-letter state abbreviation scale Character. Spatial scale year Numeric. Year analyze nutrients Character vector. Nutrients analyze include_wwtp Logical. Include WWTP analysis output_dir Character. Output directory create_maps Logical. Create maps create_networks Logical. Create network plots create_comparisons Logical. Create comparison plots verbose Logical. Show progress ... Additional arguments","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/quick_state_analysis.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Quick State Analysis with Visualization — quick_state_analysis","text":"List results visualizations","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/quick_state_analysis.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Quick State Analysis with Visualization — quick_state_analysis","text":"","code":"# \\donttest{ # Quick state analysis - use states with good data coverage results <- quick_state_analysis(   state = \"TX\",  # Texas has good data coverage   scale = \"county\",   year = 2016,   nutrients = \"nitrogen\",   include_wwtp = TRUE ) #>  #> ====================================================================== #> STATE-LEVEL MANURESHED ANALYSIS #> ====================================================================== #> State:TX #> Scale:county #> Year:2016 #> ---------------------------------------------------------------------- #> Loading national data... #> Filtering to stateTX... #> Filtered to state TX: 248 spatial units #> Filtered to state TX: 254 spatial units #> Processing agricultural classifications... #> Starting complete agricultural classification for county scale... #> Processed NuGIS data for county scale: #>   Spatial units: 248 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 9 units #>   Sink_Deficit: 199 units #>   Sink_Fertilizer: 22 units #>   Source: 5 units #>   Within_County: 13 units #> Phosphorus classification summary: #>   Excluded: 9 units #>   Sink_Deficit: 126 units #>   Sink_Fertilizer: 28 units #>   Source: 35 units #>   Within_County: 50 units #> Agricultural classification complete! #> Applied threshold: 1235.53 acres #> Processing state WWTP data... #> Filtered for positive nitrogen loads: #>   Original: 1397 facilities #>   With positive loads: 1397 facilities #> WWTP nitrogen source classification: #>   Minor Source: 1323 facilities #>   Small Source: 52 facilities #>   Medium Source: 15 facilities #>   Large Source: 7 facilities #>   Very Large Source: 0 facilities #> Created spatial WWTP data with 1397 facilities #> Looking for boundary ID column: 'FIPS' #> Available columns in boundaries: FIPS, County, State_Name, geometry #> Aggregating WWTP nitrogen loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 1397 #>   Spatial units with facilities: 176 #>   Total nitrogen load: 6377.22 tons/year #> Integrating WWTP and agricultural data... #> Integrating WWTP nitrogen data with agricultural classifications... #> Using agricultural ID column: FIPS #> Combined nitrogen classification summary: #>   Excluded: 9 units #>   Sink_Deficit: 197 units #>   Sink_Fertilizer: 21 units #>   Source: 8 units #>   Within_County: 19 units #>  #> ====================================================================== #> STATE ANALYSIS COMPLETE #> ====================================================================== #> State:TX #> Spatial units:254 #> WWTP facilities:1397 #> ====================================================================== #>  #> Generating state visualizations... #> Retrieving data for the year 2024 #> Saved plot to: /tmp/Rtmp0dSqZ3/state_tx_results/map_tx_agricultural_nitrogen_2016.png #> Dimensions: 10 x 8 in at 300 DPI #> File size: 436.41 KB #> Device: png #> Retrieving data for the year 2024 #> Saved plot to: /tmp/Rtmp0dSqZ3/state_tx_results/map_tx_combined_nitrogen_2016.png #> Dimensions: 10 x 8 in at 300 DPI #> File size: 435.83 KB #> Device: png # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/run_builtin_analysis.html","id":null,"dir":"Reference","previous_headings":"","what":"Complete Manureshed Analysis Workflow (Built-in Data) — run_builtin_analysis","title":"Complete Manureshed Analysis Workflow (Built-in Data) — run_builtin_analysis","text":"Run complete manureshed analysis using built-NuGIS data (start-2016) optional WWTP data. WWTP analysis beyond 2016, users must provide data. Supports analysis nitrogen, phosphorus, nutrients simultaneously.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/run_builtin_analysis.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Complete Manureshed Analysis Workflow (Built-in Data) — run_builtin_analysis","text":"","code":"run_builtin_analysis(   scale = \"huc8\",   year = 2016,   nutrients = c(\"nitrogen\", \"phosphorus\"),   output_dir = tempdir(),   include_wwtp = TRUE,   wwtp_year = NULL,   custom_wwtp_nitrogen = NULL,   custom_wwtp_phosphorus = NULL,   wwtp_column_mapping = NULL,   wwtp_skip_rows = 0,   wwtp_header_row = 1,   wwtp_load_units = \"kg\",   add_texas = FALSE,   save_outputs = TRUE,   cropland_threshold = NULL,   verbose = TRUE )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/run_builtin_analysis.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Complete Manureshed Analysis Workflow (Built-in Data) — run_builtin_analysis","text":"scale Character. Spatial scale: \"county\", \"huc8\", \"huc2\" year Numeric. Year analyze (available: start-2016 NuGIS, 2016 built-WWTP) nutrients Character vector. Nutrients analyze: c(\"nitrogen\", \"phosphorus\") subset output_dir Character. Output directory results (default: \"manureshed_results\") include_wwtp Logical. Whether include WWTP analysis (default: TRUE) wwtp_year Numeric. Year WWTP data (default: year, 2016 available built-) custom_wwtp_nitrogen Character. Path custom WWTP nitrogen file (non-2016 years) custom_wwtp_phosphorus Character. Path custom WWTP phosphorus file (non-2016 years) wwtp_column_mapping Named list. Custom column mapping WWTP data wwtp_skip_rows Numeric. Rows skip custom WWTP files (default: 0) wwtp_header_row Numeric. Header row custom WWTP files (default: 1) wwtp_load_units Character. Units WWTP loads: \"kg\", \"lbs\", \"pounds\", \"tons\" (default: \"kg\") add_texas Logical. Whether add Texas HUC8 data (HUC8 scale, default: FALSE) save_outputs Logical. Whether save results files (default: TRUE) cropland_threshold Numeric. Custom cropland threshold exclusion (optional) verbose Logical. Whether print detailed progress messages (default: TRUE)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/run_builtin_analysis.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Complete Manureshed Analysis Workflow (Built-in Data) — run_builtin_analysis","text":"List analysis results specified nutrients","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/run_builtin_analysis.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Complete Manureshed Analysis Workflow (Built-in Data) — run_builtin_analysis","text":"","code":"# \\donttest{ # Basic analysis using built-in data (2007-2016 WWTP available) results_2016 <- run_builtin_analysis(   scale = \"huc8\",   year = 2016,   nutrients = c(\"nitrogen\", \"phosphorus\"),   include_wwtp = TRUE ) #>  #> ====================================================================== #> BATCH MANURESHED ANALYSIS #> ====================================================================== #> Year: 2016 #> Scale: huc8 #> Nutrients: nitrogen, phosphorus #> ---------------------------------------------------------------------- #> Checking data availability... #> Data availability confirmed #>   Available scales:county, huc8, huc2 #>   Available years forhuc8:1987-2016 #>   Built-in WWTP data:Available (2007-2016) #>  #> Loading built-in NuGIS data... #> Using cached version of nugis_huc8_data #> Loaded NuGIS huc8 data for year 2016 #> Number of spatial units: 2109 #> Loading built-in spatial boundaries... #> Using cached version of huc8_boundaries #> Loaded huc8 boundaries #> Number of spatial units: 2132 #> Calculating cropland threshold... #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2016 #> Number of spatial units: 3058 #> Calculated cropland threshold: #>   County baseline: 500 ha (1235.53 acres) #>   Percentile in county data: 5.17% #>   Threshold for target scale: 1452.81 acres #> Cropland threshold:1452.81acres #>  #> Processing agricultural classifications... #> Starting complete agricultural classification for huc8 scale... #> Processed NuGIS data for huc8 scale: #>   Spatial units: 2109 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 109 units #>   Sink_Deficit: 1721 units #>   Sink_Fertilizer: 144 units #>   Source: 28 units #>   Within_Watershed: 107 units #> Phosphorus classification summary: #>   Excluded: 109 units #>   Sink_Deficit: 1296 units #>   Sink_Fertilizer: 217 units #>   Source: 210 units #>   Within_Watershed: 277 units #> Agricultural classification complete! #> Applied threshold: 1452.81 acres #> Agricultural classification complete #>   Spatial units processed:2132 #>   Nitrogen classes:Excluded ( 115 ), Sink_Deficit ( 1734 ), Sink_Fertilizer ( 145 ), Source ( 28 ), Within_Watershed ( 110 ) #>   Phosphorus classes:Excluded ( 115 ), Sink_Deficit ( 1307 ), Sink_Fertilizer ( 219 ), Source ( 211 ), Within_Watershed ( 280 ) #>  #> Processing WWTP data... #>   Nutrients:nitrogen, phosphorus #>   WWTP year:2016 #>   Load units:kg #>   Data source:Built-in (2016) #>   Loading built-in nitrogen WWTP data for2016... #> Using cached version of wwtp_nitrogen_combined #> Loaded WWTP nitrogen data for year 2016 #> Number of facilities: 20846 #>   Loading built-in phosphorus WWTP data for2016... #> Using cached version of wwtp_phosphorus_combined #> Loaded WWTP phosphorus data for year 2016 #> Number of facilities: 10148 #>   Processing nitrogen WWTP facilities... #> Filtered for positive nitrogen loads: #>   Original: 20846 facilities #>   With positive loads: 20846 facilities #> WWTP nitrogen source classification: #>   Minor Source: 17801 facilities #>   Small Source: 1799 facilities #>   Medium Source: 729 facilities #>   Large Source: 417 facilities #>   Very Large Source: 100 facilities #> Created spatial WWTP data with 20846 facilities #> Looking for boundary ID column: 'huc8' #> Available columns in boundaries: huc8, name, geometry, areasqkm #> Aggregating WWTP nitrogen loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 20846 #>   Spatial units with facilities: 1458 #>   Total nitrogen load: 582759.72 tons/year #>   Processing phosphorus WWTP facilities... #> Filtered for positive phosphorus loads: #>   Original: 10148 facilities #>   With positive loads: 10148 facilities #> WWTP phosphorus source classification: #>   Minor Source: 6846 facilities #>   Small Source: 1839 facilities #>   Medium Source: 795 facilities #>   Large Source: 561 facilities #>   Very Large Source: 107 facilities #> Created spatial WWTP data with 10148 facilities #> Looking for boundary ID column: 'huc8' #> Available columns in boundaries: huc8, name, geometry, areasqkm #> Aggregating WWTP phosphorus loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 10148 #>   Spatial units with facilities: 1160 #>   Total phosphorus load: 174715.88 tons/year #> WWTP data processing complete #>   nitrogen:20846facilities in1458spatial units #>   phosphorus:10148facilities in1160spatial units #>  #> Integrating WWTP and agricultural data... #> Integrating WWTP nitrogen data with agricultural classifications... #> Using agricultural ID column: huc8 #> Combined nitrogen classification summary: #>   Excluded: 115 units #>   Sink_Deficit: 1666 units #>   Sink_Fertilizer: 131 units #>   Source: 72 units #>   Within_Watershed: 148 units #> Integrating WWTP phosphorus data with agricultural classifications... #> Using agricultural ID column: huc8 #> Combined phosphorus classification summary: #>   Excluded: 115 units #>   Sink_Deficit: 1256 units #>   Sink_Fertilizer: 197 units #>   Source: 262 units #>   Within_Watershed: 302 units #>  Integration complete #>  #> Saving results... #> Saved spatial data to: /tmp/Rtmp0dSqZ3/huc8_agricultural_2016.rds #> File size: 7.11 MB #> Rows: 2132, Columns: 17 #> Geometry type: MULTIPOLYGON #> CRS: EPSG:5070 #> Saved spatial data to: /tmp/Rtmp0dSqZ3/huc8_nitrogen_integrated_2016.rds #> File size: 7.15 MB #> Rows: 2132, Columns: 23 #> Geometry type: MULTIPOLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/huc8_nitrogen_centroids_2016.csv #> File size: 564.95 KB #> Rows: 2132, Columns: 24 #> Longitude range: [-124.345, -67.71] #> Latitude range: [25.201, 48.988] #> Saved spatial data to: /tmp/Rtmp0dSqZ3/huc8_phosphorus_integrated_2016.rds #> File size: 7.15 MB #> Rows: 2132, Columns: 23 #> Geometry type: MULTIPOLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/huc8_phosphorus_centroids_2016.csv #> File size: 554.06 KB #> Rows: 2132, Columns: 24 #> Longitude range: [-124.345, -67.71] #> Latitude range: [25.201, 48.988] #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/analysis_summary_2016.rds #> Format: RDS #> File size: 0.78 KB #>  Results saved to:/tmp/Rtmp0dSqZ3 #>   Files created:6 #>  #> ====================================================================== #> ANALYSIS COMPLETE #> ====================================================================== #> Processing time:0.08minutes #> Scale:huc8 #> Year:2016 #> Nutrients analyzed:nitrogen, phosphorus #> Spatial units:2132 #> WWTP facilities:30994 #> Output directory:/tmp/Rtmp0dSqZ3 #> ======================================================================  # Analysis for earlier year (no WWTP available) - nitrogen only results_2010 <- run_builtin_analysis(   scale = \"county\",   year = 2010,   nutrients = \"nitrogen\",   include_wwtp = FALSE ) #>  #> ====================================================================== #> BATCH MANURESHED ANALYSIS #> ====================================================================== #> Year: 2010 #> Scale: county #> Nutrients: nitrogen #> ---------------------------------------------------------------------- #> Checking data availability... #> Data availability confirmed #>   Available scales:county, huc8, huc2 #>   Available years forcounty:1987-2016 #>   Built-in WWTP data:Available (2007-2016) #>  #> Loading built-in NuGIS data... #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2010 #> Number of spatial units: 3064 #> Loading built-in spatial boundaries... #> Using cached version of county_boundaries #> Loaded county boundaries #> Number of spatial units: 3112 #> Calculating cropland threshold... #> Cropland threshold:1235.53acres #>  #> Processing agricultural classifications... #> Starting complete agricultural classification for county scale... #> Processed NuGIS data for county scale: #>   Spatial units: 3064 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 145 units #>   Sink_Deficit: 2362 units #>   Sink_Fertilizer: 287 units #>   Source: 83 units #>   Within_County: 187 units #> Phosphorus classification summary: #>   Excluded: 145 units #>   Sink_Deficit: 1760 units #>   Sink_Fertilizer: 469 units #>   Source: 343 units #>   Within_County: 347 units #> Agricultural classification complete! #> Applied threshold: 1235.53 acres #> Agricultural classification complete #>   Spatial units processed:3112 #>   Nitrogen classes:Excluded ( 193 ), Sink_Deficit ( 2362 ), Sink_Fertilizer ( 287 ), Source ( 83 ), Within_County ( 187 ) #>   Phosphorus classes:Excluded ( 193 ), Sink_Deficit ( 1760 ), Sink_Fertilizer ( 469 ), Source ( 343 ), Within_County ( 347 ) #>  #> WWTP analysis skipped #>  #> Saving results... #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_agricultural_2010.rds #> File size: 1.04 MB #> Rows: 3112, Columns: 17 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/analysis_summary_2010.rds #> Format: RDS #> File size: 0.5 KB #>  Results saved to:/tmp/Rtmp0dSqZ3 #>   Files created:2 #>  #> ====================================================================== #> ANALYSIS COMPLETE #> ====================================================================== #> Processing time:0.01minutes #> Scale:county #> Year:2010 #> Nutrients analyzed:nitrogen #> Spatial units:3112 #> Output directory:/tmp/Rtmp0dSqZ3 #> ======================================================================  # Analysis for earlier year with WWTP now available results_2010 <- run_builtin_analysis(   scale = \"county\",   year = 2010,   nutrients = \"nitrogen\",   include_wwtp = TRUE  # Now supported for 2010! ) #>  #> ====================================================================== #> BATCH MANURESHED ANALYSIS #> ====================================================================== #> Year: 2010 #> Scale: county #> Nutrients: nitrogen #> ---------------------------------------------------------------------- #> Checking data availability... #> Data availability confirmed #>   Available scales:county, huc8, huc2 #>   Available years forcounty:1987-2016 #>   Built-in WWTP data:Available (2007-2016) #>  #> Loading built-in NuGIS data... #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2010 #> Number of spatial units: 3064 #> Loading built-in spatial boundaries... #> Using cached version of county_boundaries #> Loaded county boundaries #> Number of spatial units: 3112 #> Calculating cropland threshold... #> Cropland threshold:1235.53acres #>  #> Processing agricultural classifications... #> Starting complete agricultural classification for county scale... #> Processed NuGIS data for county scale: #>   Spatial units: 3064 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 145 units #>   Sink_Deficit: 2362 units #>   Sink_Fertilizer: 287 units #>   Source: 83 units #>   Within_County: 187 units #> Phosphorus classification summary: #>   Excluded: 145 units #>   Sink_Deficit: 1760 units #>   Sink_Fertilizer: 469 units #>   Source: 343 units #>   Within_County: 347 units #> Agricultural classification complete! #> Applied threshold: 1235.53 acres #> Agricultural classification complete #>   Spatial units processed:3112 #>   Nitrogen classes:Excluded ( 193 ), Sink_Deficit ( 2362 ), Sink_Fertilizer ( 287 ), Source ( 83 ), Within_County ( 187 ) #>   Phosphorus classes:Excluded ( 193 ), Sink_Deficit ( 1760 ), Sink_Fertilizer ( 469 ), Source ( 343 ), Within_County ( 347 ) #>  #> Processing WWTP data... #>   Nutrients:nitrogen #>   WWTP year:2010 #>   Load units:kg #>   Data source:Built-in (2010) #>   Loading built-in nitrogen WWTP data for2010... #> Using cached version of wwtp_nitrogen_combined #> Loaded WWTP nitrogen data for year 2010 #> Number of facilities: 24727 #>   Processing nitrogen WWTP facilities... #> Filtered for positive nitrogen loads: #>   Original: 24727 facilities #>   With positive loads: 24727 facilities #> WWTP nitrogen source classification: #>   Minor Source: 20327 facilities #>   Small Source: 2445 facilities #>   Medium Source: 987 facilities #>   Large Source: 745 facilities #>   Very Large Source: 223 facilities #> Created spatial WWTP data with 24727 facilities #> Looking for boundary ID column: 'FIPS' #> Available columns in boundaries: FIPS, County, State_Name, geometry #> Aggregating WWTP nitrogen loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 24727 #>   Spatial units with facilities: 2370 #>   Total nitrogen load: 2010631.56 tons/year #> WWTP data processing complete #>   nitrogen:24727facilities in2370spatial units #>  #> Integrating WWTP and agricultural data... #> Integrating WWTP nitrogen data with agricultural classifications... #> Using agricultural ID column: FIPS #> Combined nitrogen classification summary: #>   Excluded: 193 units #>   Sink_Deficit: 2243 units #>   Sink_Fertilizer: 266 units #>   Source: 180 units #>   Within_County: 230 units #>  Integration complete #>  #> Saving results... #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_agricultural_2010.rds #> File size: 1.04 MB #> Rows: 3112, Columns: 17 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_nitrogen_integrated_2010.rds #> File size: 1.1 MB #> Rows: 3112, Columns: 23 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/county_nitrogen_centroids_2010.csv #> File size: 752.63 KB #> Rows: 3112, Columns: 24 #> Longitude range: [-124.158, -67.637] #> Latitude range: [25.49, 48.826] #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/analysis_summary_2010.rds #> Format: RDS #> File size: 0.7 KB #>  Results saved to:/tmp/Rtmp0dSqZ3 #>   Files created:4 #>  #> ====================================================================== #> ANALYSIS COMPLETE #> ====================================================================== #> Processing time:0.04minutes #> Scale:county #> Year:2010 #> Nutrients analyzed:nitrogen #> Spatial units:3112 #> WWTP facilities:24727 #> Output directory:/tmp/Rtmp0dSqZ3 #> ======================================================================  # Analysis for year before WWTP availability results_2005 <- run_builtin_analysis(   scale = \"huc8\",   year = 2005,   nutrients = \"phosphorus\",   include_wwtp = FALSE  # No WWTP data before 2007 ) #>  #> ====================================================================== #> BATCH MANURESHED ANALYSIS #> ====================================================================== #> Year: 2005 #> Scale: huc8 #> Nutrients: phosphorus #> ---------------------------------------------------------------------- #> Checking data availability... #> Data availability confirmed #>   Available scales:county, huc8, huc2 #>   Available years forhuc8:1987-2016 #>   Built-in WWTP data:Available (2007-2016) #>  #> Loading built-in NuGIS data... #> Using cached version of nugis_huc8_data #> Loaded NuGIS huc8 data for year 2005 #> Number of spatial units: 2111 #> Loading built-in spatial boundaries... #> Using cached version of huc8_boundaries #> Loaded huc8 boundaries #> Number of spatial units: 2132 #> Calculating cropland threshold... #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2005 #> Number of spatial units: 3064 #> Calculated cropland threshold: #>   County baseline: 500 ha (1235.53 acres) #>   Percentile in county data: 4.5% #>   Threshold for target scale: 1214.18 acres #> Cropland threshold:1214.18acres #>  #> Processing agricultural classifications... #> Starting complete agricultural classification for huc8 scale... #> Processed NuGIS data for huc8 scale: #>   Spatial units: 2111 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 96 units #>   Sink_Deficit: 1572 units #>   Sink_Fertilizer: 273 units #>   Source: 32 units #>   Within_Watershed: 138 units #> Phosphorus classification summary: #>   Excluded: 96 units #>   Sink_Deficit: 952 units #>   Sink_Fertilizer: 549 units #>   Source: 219 units #>   Within_Watershed: 295 units #> Agricultural classification complete! #> Applied threshold: 1214.18 acres #> Agricultural classification complete #>   Spatial units processed:2132 #>   Nitrogen classes:Excluded ( 98 ), Sink_Deficit ( 1588 ), Sink_Fertilizer ( 275 ), Source ( 32 ), Within_Watershed ( 139 ) #>   Phosphorus classes:Excluded ( 98 ), Sink_Deficit ( 964 ), Sink_Fertilizer ( 554 ), Source ( 220 ), Within_Watershed ( 296 ) #>  #> WWTP analysis skipped #>  #> Saving results... #> Saved spatial data to: /tmp/Rtmp0dSqZ3/huc8_agricultural_2005.rds #> File size: 7.11 MB #> Rows: 2132, Columns: 17 #> Geometry type: MULTIPOLYGON #> CRS: EPSG:5070 #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/analysis_summary_2005.rds #> Format: RDS #> File size: 0.52 KB #>  Results saved to:/tmp/Rtmp0dSqZ3 #>   Files created:2 #>  #> ====================================================================== #> ANALYSIS COMPLETE #> ====================================================================== #> Processing time:0.02minutes #> Scale:huc8 #> Year:2005 #> Nutrients analyzed:phosphorus #> Spatial units:2132 #> Output directory:/tmp/Rtmp0dSqZ3 #> ====================================================================== # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/run_state_analysis.html","id":null,"dir":"Reference","previous_headings":"","what":"Run State-Level Analysis — run_state_analysis","title":"Run State-Level Analysis — run_state_analysis","text":"Run manureshed analysis specific state","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/run_state_analysis.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run State-Level Analysis — run_state_analysis","text":"","code":"run_state_analysis(   state,   scale = \"huc8\",   year = 2016,   nutrients = c(\"nitrogen\", \"phosphorus\"),   include_wwtp = TRUE,   output_dir = file.path(tempdir(), paste0(\"state_\", tolower(state), \"_results\")),   verbose = TRUE,   ... )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/run_state_analysis.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run State-Level Analysis — run_state_analysis","text":"state Character. Two-letter state abbreviation (e.g., \"OH\", \"TX\") scale Character. Spatial scale: \"county\", \"huc8\", \"huc2\" year Numeric. Year analyze nutrients Character vector. Nutrients analyze include_wwtp Logical. Whether include WWTP analysis output_dir Character. Output directory verbose Logical. Show progress messages ... Additional arguments passed run_builtin_analysis","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/run_state_analysis.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run State-Level Analysis — run_state_analysis","text":"List analysis results state","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/run_state_analysis.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Run State-Level Analysis — run_state_analysis","text":"","code":"# \\donttest{ # Use Texas which has more data texas_results <- run_state_analysis(   state = \"TX\",   scale = \"county\",  # Use county for faster processing   year = 2016,   nutrients = \"nitrogen\",  # Single nutrient for speed   include_wwtp = TRUE ) #>  #> ====================================================================== #> STATE-LEVEL MANURESHED ANALYSIS #> ====================================================================== #> State:TX #> Scale:county #> Year:2016 #> ---------------------------------------------------------------------- #> Loading national data... #> Filtering to stateTX... #> Filtered to state TX: 248 spatial units #> Filtered to state TX: 254 spatial units #> Processing agricultural classifications... #> Starting complete agricultural classification for county scale... #> Processed NuGIS data for county scale: #>   Spatial units: 248 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 9 units #>   Sink_Deficit: 199 units #>   Sink_Fertilizer: 22 units #>   Source: 5 units #>   Within_County: 13 units #> Phosphorus classification summary: #>   Excluded: 9 units #>   Sink_Deficit: 126 units #>   Sink_Fertilizer: 28 units #>   Source: 35 units #>   Within_County: 50 units #> Agricultural classification complete! #> Applied threshold: 1235.53 acres #> Processing state WWTP data... #> Filtered for positive nitrogen loads: #>   Original: 1397 facilities #>   With positive loads: 1397 facilities #> WWTP nitrogen source classification: #>   Minor Source: 1323 facilities #>   Small Source: 52 facilities #>   Medium Source: 15 facilities #>   Large Source: 7 facilities #>   Very Large Source: 0 facilities #> Created spatial WWTP data with 1397 facilities #> Looking for boundary ID column: 'FIPS' #> Available columns in boundaries: FIPS, County, State_Name, geometry #> Aggregating WWTP nitrogen loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 1397 #>   Spatial units with facilities: 176 #>   Total nitrogen load: 6377.22 tons/year #> Integrating WWTP and agricultural data... #> Integrating WWTP nitrogen data with agricultural classifications... #> Using agricultural ID column: FIPS #> Combined nitrogen classification summary: #>   Excluded: 9 units #>   Sink_Deficit: 197 units #>   Sink_Fertilizer: 21 units #>   Source: 8 units #>   Within_County: 19 units #>  #> ====================================================================== #> STATE ANALYSIS COMPLETE #> ====================================================================== #> State:TX #> Spatial units:254 #> WWTP facilities:1397 #> ======================================================================  # California county-level analysis ca_results <- run_state_analysis(   state = \"CA\",   scale = \"county\",   year = 2010,   nutrients = \"nitrogen\" ) #>  #> ====================================================================== #> STATE-LEVEL MANURESHED ANALYSIS #> ====================================================================== #> State:CA #> Scale:county #> Year:2010 #> ---------------------------------------------------------------------- #> Loading national data... #> Filtering to stateCA... #> Filtered to state CA: 57 spatial units #> Filtered to state CA: 58 spatial units #> Processing agricultural classifications... #> Starting complete agricultural classification for county scale... #> Processed NuGIS data for county scale: #>   Spatial units: 57 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 7 units #>   Sink_Deficit: 32 units #>   Sink_Fertilizer: 15 units #>   Source: 1 units #>   Within_County: 2 units #> Phosphorus classification summary: #>   Excluded: 7 units #>   Sink_Deficit: 18 units #>   Sink_Fertilizer: 15 units #>   Source: 9 units #>   Within_County: 8 units #> Agricultural classification complete! #> Applied threshold: 1235.53 acres #> Processing state WWTP data... #> Filtered for positive nitrogen loads: #>   Original: 549 facilities #>   With positive loads: 549 facilities #> WWTP nitrogen source classification: #>   Minor Source: 260 facilities #>   Small Source: 144 facilities #>   Medium Source: 70 facilities #>   Large Source: 60 facilities #>   Very Large Source: 15 facilities #> Created spatial WWTP data with 549 facilities #> Looking for boundary ID column: 'FIPS' #> Available columns in boundaries: FIPS, County, State_Name, geometry #> Aggregating WWTP nitrogen loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 549 #>   Spatial units with facilities: 42 #>   Total nitrogen load: 93743.95 tons/year #> Integrating WWTP and agricultural data... #> Integrating WWTP nitrogen data with agricultural classifications... #> Using agricultural ID column: FIPS #> Combined nitrogen classification summary: #>   Excluded: 7 units #>   Sink_Deficit: 30 units #>   Sink_Fertilizer: 9 units #>   Source: 7 units #>   Within_County: 5 units #>  #> ====================================================================== #> STATE ANALYSIS COMPLETE #> ====================================================================== #> State:CA #> Spatial units:58 #> WWTP facilities:549 #> ====================================================================== # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/save_analysis_summary.html","id":null,"dir":"Reference","previous_headings":"","what":"Save Analysis Summary — save_analysis_summary","title":"Save Analysis Summary — save_analysis_summary","text":"Save comprehensive summary analysis parameters results","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/save_analysis_summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save Analysis Summary — save_analysis_summary","text":"","code":"save_analysis_summary(results, file_path = NULL, format = \"rds\")"},{"path":"https://exelegch.github.io/manureshed-docs/reference/save_analysis_summary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save Analysis Summary — save_analysis_summary","text":"results List. Complete analysis results workflow functions file_path Character. Output file path. NULL, auto-generated format Character. Output format: \"rds\", \"json\", \"txt\"","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/save_analysis_summary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Save Analysis Summary — save_analysis_summary","text":"Character. Path saved file","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/save_analysis_summary.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Save Analysis Summary — save_analysis_summary","text":"","code":"# \\donttest{ # Create analysis results first results <- run_builtin_analysis(scale = \"county\", year = 2016) #>  #> ====================================================================== #> BATCH MANURESHED ANALYSIS #> ====================================================================== #> Year: 2016 #> Scale: county #> Nutrients: nitrogen, phosphorus #> ---------------------------------------------------------------------- #> Checking data availability... #> Data availability confirmed #>   Available scales:county, huc8, huc2 #>   Available years forcounty:1987-2016 #>   Built-in WWTP data:Available (2007-2016) #>  #> Loading built-in NuGIS data... #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2016 #> Number of spatial units: 3058 #> Loading built-in spatial boundaries... #> Using cached version of county_boundaries #> Loaded county boundaries #> Number of spatial units: 3112 #> Calculating cropland threshold... #> Cropland threshold:1235.53acres #>  #> Processing agricultural classifications... #> Starting complete agricultural classification for county scale... #> Processed NuGIS data for county scale: #>   Spatial units: 3058 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 158 units #>   Sink_Deficit: 2450 units #>   Sink_Fertilizer: 214 units #>   Source: 83 units #>   Within_County: 153 units #> Phosphorus classification summary: #>   Excluded: 158 units #>   Sink_Deficit: 1891 units #>   Sink_Fertilizer: 372 units #>   Source: 317 units #>   Within_County: 320 units #> Agricultural classification complete! #> Applied threshold: 1235.53 acres #> Agricultural classification complete #>   Spatial units processed:3112 #>   Nitrogen classes:Excluded ( 212 ), Sink_Deficit ( 2450 ), Sink_Fertilizer ( 214 ), Source ( 83 ), Within_County ( 153 ) #>   Phosphorus classes:Excluded ( 212 ), Sink_Deficit ( 1891 ), Sink_Fertilizer ( 372 ), Source ( 317 ), Within_County ( 320 ) #>  #> Processing WWTP data... #>   Nutrients:nitrogen, phosphorus #>   WWTP year:2016 #>   Load units:kg #>   Data source:Built-in (2016) #>   Loading built-in nitrogen WWTP data for2016... #> Using cached version of wwtp_nitrogen_combined #> Loaded WWTP nitrogen data for year 2016 #> Number of facilities: 20846 #>   Loading built-in phosphorus WWTP data for2016... #> Using cached version of wwtp_phosphorus_combined #> Loaded WWTP phosphorus data for year 2016 #> Number of facilities: 10148 #>   Processing nitrogen WWTP facilities... #> Filtered for positive nitrogen loads: #>   Original: 20846 facilities #>   With positive loads: 20846 facilities #> WWTP nitrogen source classification: #>   Minor Source: 17801 facilities #>   Small Source: 1799 facilities #>   Medium Source: 729 facilities #>   Large Source: 417 facilities #>   Very Large Source: 100 facilities #> Created spatial WWTP data with 20846 facilities #> Looking for boundary ID column: 'FIPS' #> Available columns in boundaries: FIPS, County, State_Name, geometry #> Aggregating WWTP nitrogen loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 20846 #>   Spatial units with facilities: 2581 #>   Total nitrogen load: 582738.6 tons/year #>   Processing phosphorus WWTP facilities... #> Filtered for positive phosphorus loads: #>   Original: 10148 facilities #>   With positive loads: 10148 facilities #> WWTP phosphorus source classification: #>   Minor Source: 6846 facilities #>   Small Source: 1839 facilities #>   Medium Source: 795 facilities #>   Large Source: 561 facilities #>   Very Large Source: 107 facilities #> Created spatial WWTP data with 10148 facilities #> Looking for boundary ID column: 'FIPS' #> Available columns in boundaries: FIPS, County, State_Name, geometry #> Aggregating WWTP phosphorus loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 10148 #>   Spatial units with facilities: 1966 #>   Total phosphorus load: 177064.66 tons/year #> WWTP data processing complete #>   nitrogen:20846facilities in2581spatial units #>   phosphorus:10148facilities in1966spatial units #>  #> Integrating WWTP and agricultural data... #> Integrating WWTP nitrogen data with agricultural classifications... #> Using agricultural ID column: FIPS #> Combined nitrogen classification summary: #>   Excluded: 212 units #>   Sink_Deficit: 2358 units #>   Sink_Fertilizer: 185 units #>   Source: 157 units #>   Within_County: 200 units #> Integrating WWTP phosphorus data with agricultural classifications... #> Using agricultural ID column: FIPS #> Combined phosphorus classification summary: #>   Excluded: 212 units #>   Sink_Deficit: 1819 units #>   Sink_Fertilizer: 344 units #>   Source: 389 units #>   Within_County: 348 units #>  Integration complete #>  #> Saving results... #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_agricultural_2016.rds #> File size: 1.04 MB #> Rows: 3112, Columns: 17 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_nitrogen_integrated_2016.rds #> File size: 1.1 MB #> Rows: 3112, Columns: 23 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/county_nitrogen_centroids_2016.csv #> File size: 760.52 KB #> Rows: 3112, Columns: 24 #> Longitude range: [-124.158, -67.637] #> Latitude range: [25.49, 48.826] #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_phosphorus_integrated_2016.rds #> File size: 1.09 MB #> Rows: 3112, Columns: 23 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/county_phosphorus_centroids_2016.csv #> File size: 736.85 KB #> Rows: 3112, Columns: 24 #> Longitude range: [-124.158, -67.637] #> Latitude range: [25.49, 48.826] #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/analysis_summary_2016.rds #> Format: RDS #> File size: 0.77 KB #>  Results saved to:/tmp/Rtmp0dSqZ3 #>   Files created:6 #>  #> ====================================================================== #> ANALYSIS COMPLETE #> ====================================================================== #> Processing time:0.07minutes #> Scale:county #> Year:2016 #> Nutrients analyzed:nitrogen, phosphorus #> Spatial units:3112 #> WWTP facilities:30994 #> Output directory:/tmp/Rtmp0dSqZ3 #> ======================================================================  # Save complete analysis summary summary_path <- file.path(tempdir(), \"analysis_summary_2016.json\") save_analysis_summary(results, summary_path, format = \"json\") #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/analysis_summary_2016.json #> Format: JSON #> File size: 1.5 KB #> [1] \"/tmp/Rtmp0dSqZ3/analysis_summary_2016.json\" # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/save_centroid_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Save Centroid Data — save_centroid_data","title":"Save Centroid Data — save_centroid_data","text":"Save centroid data CSV file transition probability analysis","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/save_centroid_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save Centroid Data — save_centroid_data","text":"","code":"save_centroid_data(   data,   file_path = NULL,   scale = \"huc8\",   nutrient = \"nitrogen\",   analysis_type = \"centroids\",   year = format(Sys.Date(), \"%Y\") )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/save_centroid_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save Centroid Data — save_centroid_data","text":"data Data frame. Data centroid coordinates file_path Character. Output file path (end .csv). NULL, auto-generated scale Character. Spatial scale file naming nutrient Character. Nutrient type file naming analysis_type Character. Analysis type file naming year Numeric. Year file naming","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/save_centroid_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Save Centroid Data — save_centroid_data","text":"Character. Path saved file","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/save_centroid_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Save Centroid Data — save_centroid_data","text":"","code":"# \\donttest{ # Create some example data first results <- run_builtin_analysis(scale = \"county\", year = 2016, include_wwtp = TRUE) #>  #> ====================================================================== #> BATCH MANURESHED ANALYSIS #> ====================================================================== #> Year: 2016 #> Scale: county #> Nutrients: nitrogen, phosphorus #> ---------------------------------------------------------------------- #> Checking data availability... #> Data availability confirmed #>   Available scales:county, huc8, huc2 #>   Available years forcounty:1987-2016 #>   Built-in WWTP data:Available (2007-2016) #>  #> Loading built-in NuGIS data... #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2016 #> Number of spatial units: 3058 #> Loading built-in spatial boundaries... #> Using cached version of county_boundaries #> Loaded county boundaries #> Number of spatial units: 3112 #> Calculating cropland threshold... #> Cropland threshold:1235.53acres #>  #> Processing agricultural classifications... #> Starting complete agricultural classification for county scale... #> Processed NuGIS data for county scale: #>   Spatial units: 3058 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 158 units #>   Sink_Deficit: 2450 units #>   Sink_Fertilizer: 214 units #>   Source: 83 units #>   Within_County: 153 units #> Phosphorus classification summary: #>   Excluded: 158 units #>   Sink_Deficit: 1891 units #>   Sink_Fertilizer: 372 units #>   Source: 317 units #>   Within_County: 320 units #> Agricultural classification complete! #> Applied threshold: 1235.53 acres #> Agricultural classification complete #>   Spatial units processed:3112 #>   Nitrogen classes:Excluded ( 212 ), Sink_Deficit ( 2450 ), Sink_Fertilizer ( 214 ), Source ( 83 ), Within_County ( 153 ) #>   Phosphorus classes:Excluded ( 212 ), Sink_Deficit ( 1891 ), Sink_Fertilizer ( 372 ), Source ( 317 ), Within_County ( 320 ) #>  #> Processing WWTP data... #>   Nutrients:nitrogen, phosphorus #>   WWTP year:2016 #>   Load units:kg #>   Data source:Built-in (2016) #>   Loading built-in nitrogen WWTP data for2016... #> Using cached version of wwtp_nitrogen_combined #> Loaded WWTP nitrogen data for year 2016 #> Number of facilities: 20846 #>   Loading built-in phosphorus WWTP data for2016... #> Using cached version of wwtp_phosphorus_combined #> Loaded WWTP phosphorus data for year 2016 #> Number of facilities: 10148 #>   Processing nitrogen WWTP facilities... #> Filtered for positive nitrogen loads: #>   Original: 20846 facilities #>   With positive loads: 20846 facilities #> WWTP nitrogen source classification: #>   Minor Source: 17801 facilities #>   Small Source: 1799 facilities #>   Medium Source: 729 facilities #>   Large Source: 417 facilities #>   Very Large Source: 100 facilities #> Created spatial WWTP data with 20846 facilities #> Looking for boundary ID column: 'FIPS' #> Available columns in boundaries: FIPS, County, State_Name, geometry #> Aggregating WWTP nitrogen loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 20846 #>   Spatial units with facilities: 2581 #>   Total nitrogen load: 582738.6 tons/year #>   Processing phosphorus WWTP facilities... #> Filtered for positive phosphorus loads: #>   Original: 10148 facilities #>   With positive loads: 10148 facilities #> WWTP phosphorus source classification: #>   Minor Source: 6846 facilities #>   Small Source: 1839 facilities #>   Medium Source: 795 facilities #>   Large Source: 561 facilities #>   Very Large Source: 107 facilities #> Created spatial WWTP data with 10148 facilities #> Looking for boundary ID column: 'FIPS' #> Available columns in boundaries: FIPS, County, State_Name, geometry #> Aggregating WWTP phosphorus loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 10148 #>   Spatial units with facilities: 1966 #>   Total phosphorus load: 177064.66 tons/year #> WWTP data processing complete #>   nitrogen:20846facilities in2581spatial units #>   phosphorus:10148facilities in1966spatial units #>  #> Integrating WWTP and agricultural data... #> Integrating WWTP nitrogen data with agricultural classifications... #> Using agricultural ID column: FIPS #> Combined nitrogen classification summary: #>   Excluded: 212 units #>   Sink_Deficit: 2358 units #>   Sink_Fertilizer: 185 units #>   Source: 157 units #>   Within_County: 200 units #> Integrating WWTP phosphorus data with agricultural classifications... #> Using agricultural ID column: FIPS #> Combined phosphorus classification summary: #>   Excluded: 212 units #>   Sink_Deficit: 1819 units #>   Sink_Fertilizer: 344 units #>   Source: 389 units #>   Within_County: 348 units #>  Integration complete #>  #> Saving results... #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_agricultural_2016.rds #> File size: 1.04 MB #> Rows: 3112, Columns: 17 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_nitrogen_integrated_2016.rds #> File size: 1.1 MB #> Rows: 3112, Columns: 23 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/county_nitrogen_centroids_2016.csv #> File size: 760.52 KB #> Rows: 3112, Columns: 24 #> Longitude range: [-124.158, -67.637] #> Latitude range: [25.49, 48.826] #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_phosphorus_integrated_2016.rds #> File size: 1.09 MB #> Rows: 3112, Columns: 23 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/county_phosphorus_centroids_2016.csv #> File size: 736.85 KB #> Rows: 3112, Columns: 24 #> Longitude range: [-124.158, -67.637] #> Latitude range: [25.49, 48.826] #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/analysis_summary_2016.rds #> Format: RDS #> File size: 0.77 KB #>  Results saved to:/tmp/Rtmp0dSqZ3 #>   Files created:6 #>  #> ====================================================================== #> ANALYSIS COMPLETE #> ====================================================================== #> Processing time:0.06minutes #> Scale:county #> Year:2016 #> Nutrients analyzed:nitrogen, phosphorus #> Spatial units:3112 #> WWTP facilities:30994 #> Output directory:/tmp/Rtmp0dSqZ3 #> ======================================================================  # Save centroids for transition analysis if (\"integrated\" %in% names(results) && \"nitrogen\" %in% names(results$integrated)) {   centroids <- add_centroid_coordinates(results$integrated$nitrogen)   save_centroid_data(centroids, scale = \"county\", nutrient = \"nitrogen\") } #> Saved centroid data to: /tmp/Rtmp0dSqZ3/county_nitrogen_centroids_2026_20260127.csv #> File size: 760.52 KB #> Rows: 3112, Columns: 24 #> Longitude range: [-124.158, -67.637] #> Latitude range: [25.49, 48.826] #> [1] \"/tmp/Rtmp0dSqZ3/county_nitrogen_centroids_2026_20260127.csv\" # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/save_plot.html","id":null,"dir":"Reference","previous_headings":"","what":"Save Plot — save_plot","title":"Save Plot — save_plot","text":"Save ggplot object file publication-quality settings","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/save_plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save Plot — save_plot","text":"","code":"save_plot(   plot,   file_path,   width = 11,   height = 6,   dpi = 300,   units = \"in\",   device = NULL )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/save_plot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save Plot — save_plot","text":"plot ggplot object. Plot save file_path Character. Output file path width Numeric. Plot width inches (default: 11) height Numeric. Plot height inches (default: 6) dpi Numeric. Resolution dots per inch (default: 300) units Character. Units width height (default: \"\") device Character. Output device (auto-detected file extension)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/save_plot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Save Plot — save_plot","text":"Character. Path saved file","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/save_plot.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Save Plot — save_plot","text":"","code":"# \\donttest{ # Create a simple plot for demonstration library(ggplot2) p <- ggplot(mtcars, aes(x = mpg, y = hp)) + geom_point()  # Save with default settings (300 DPI, 11x6 inches) save_plot(p, file.path(tempdir(), \"test_plot.png\")) #> Saved plot to: /tmp/Rtmp0dSqZ3/test_plot.png #> Dimensions: 11 x 6 in at 300 DPI #> File size: 50.33 KB #> Device: png #> [1] \"/tmp/Rtmp0dSqZ3/test_plot.png\"  # Save with custom dimensions for presentation save_plot(p, file.path(tempdir(), \"presentation_plot.png\"), width = 16, height = 9) #> Saved plot to: /tmp/Rtmp0dSqZ3/presentation_plot.png #> Dimensions: 16 x 9 in at 300 DPI #> File size: 72.17 KB #> Device: png #> [1] \"/tmp/Rtmp0dSqZ3/presentation_plot.png\"  # Save as PDF for publication save_plot(p, file.path(tempdir(), \"publication_figure.pdf\"), width = 8, height = 6) #> Saved plot to: /tmp/Rtmp0dSqZ3/publication_figure.pdf #> Dimensions: 8 x 6 in at 300 DPI #> File size: 6.25 KB #> Device: pdf #> [1] \"/tmp/Rtmp0dSqZ3/publication_figure.pdf\" # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/save_spatial_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Save Spatial Data — save_spatial_data","title":"Save Spatial Data — save_spatial_data","text":"Save spatial data RDS file standardized naming","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/save_spatial_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save Spatial Data — save_spatial_data","text":"","code":"save_spatial_data(   data,   file_path = NULL,   scale = \"huc8\",   nutrient = \"both\",   analysis_type = \"combined\",   year = format(Sys.Date(), \"%Y\") )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/save_spatial_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save Spatial Data — save_spatial_data","text":"data sf object. Spatial data save file_path Character. Output file path (end .rds). NULL, auto-generated scale Character. Spatial scale file naming nutrient Character. Nutrient type file naming (\"nitrogen\", \"phosphorus\", \"\") analysis_type Character. Analysis type file naming year Numeric. Year file naming","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/save_spatial_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Save Spatial Data — save_spatial_data","text":"Character. Path saved file","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/save_spatial_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Save Spatial Data — save_spatial_data","text":"","code":"# \\donttest{ # Create some example results first results <- run_builtin_analysis(scale = \"county\", year = 2016) #>  #> ====================================================================== #> BATCH MANURESHED ANALYSIS #> ====================================================================== #> Year: 2016 #> Scale: county #> Nutrients: nitrogen, phosphorus #> ---------------------------------------------------------------------- #> Checking data availability... #> Data availability confirmed #>   Available scales:county, huc8, huc2 #>   Available years forcounty:1987-2016 #>   Built-in WWTP data:Available (2007-2016) #>  #> Loading built-in NuGIS data... #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2016 #> Number of spatial units: 3058 #> Loading built-in spatial boundaries... #> Using cached version of county_boundaries #> Loaded county boundaries #> Number of spatial units: 3112 #> Calculating cropland threshold... #> Cropland threshold:1235.53acres #>  #> Processing agricultural classifications... #> Starting complete agricultural classification for county scale... #> Processed NuGIS data for county scale: #>   Spatial units: 3058 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 158 units #>   Sink_Deficit: 2450 units #>   Sink_Fertilizer: 214 units #>   Source: 83 units #>   Within_County: 153 units #> Phosphorus classification summary: #>   Excluded: 158 units #>   Sink_Deficit: 1891 units #>   Sink_Fertilizer: 372 units #>   Source: 317 units #>   Within_County: 320 units #> Agricultural classification complete! #> Applied threshold: 1235.53 acres #> Agricultural classification complete #>   Spatial units processed:3112 #>   Nitrogen classes:Excluded ( 212 ), Sink_Deficit ( 2450 ), Sink_Fertilizer ( 214 ), Source ( 83 ), Within_County ( 153 ) #>   Phosphorus classes:Excluded ( 212 ), Sink_Deficit ( 1891 ), Sink_Fertilizer ( 372 ), Source ( 317 ), Within_County ( 320 ) #>  #> Processing WWTP data... #>   Nutrients:nitrogen, phosphorus #>   WWTP year:2016 #>   Load units:kg #>   Data source:Built-in (2016) #>   Loading built-in nitrogen WWTP data for2016... #> Using cached version of wwtp_nitrogen_combined #> Loaded WWTP nitrogen data for year 2016 #> Number of facilities: 20846 #>   Loading built-in phosphorus WWTP data for2016... #> Using cached version of wwtp_phosphorus_combined #> Loaded WWTP phosphorus data for year 2016 #> Number of facilities: 10148 #>   Processing nitrogen WWTP facilities... #> Filtered for positive nitrogen loads: #>   Original: 20846 facilities #>   With positive loads: 20846 facilities #> WWTP nitrogen source classification: #>   Minor Source: 17801 facilities #>   Small Source: 1799 facilities #>   Medium Source: 729 facilities #>   Large Source: 417 facilities #>   Very Large Source: 100 facilities #> Created spatial WWTP data with 20846 facilities #> Looking for boundary ID column: 'FIPS' #> Available columns in boundaries: FIPS, County, State_Name, geometry #> Aggregating WWTP nitrogen loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 20846 #>   Spatial units with facilities: 2581 #>   Total nitrogen load: 582738.6 tons/year #>   Processing phosphorus WWTP facilities... #> Filtered for positive phosphorus loads: #>   Original: 10148 facilities #>   With positive loads: 10148 facilities #> WWTP phosphorus source classification: #>   Minor Source: 6846 facilities #>   Small Source: 1839 facilities #>   Medium Source: 795 facilities #>   Large Source: 561 facilities #>   Very Large Source: 107 facilities #> Created spatial WWTP data with 10148 facilities #> Looking for boundary ID column: 'FIPS' #> Available columns in boundaries: FIPS, County, State_Name, geometry #> Aggregating WWTP phosphorus loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 10148 #>   Spatial units with facilities: 1966 #>   Total phosphorus load: 177064.66 tons/year #> WWTP data processing complete #>   nitrogen:20846facilities in2581spatial units #>   phosphorus:10148facilities in1966spatial units #>  #> Integrating WWTP and agricultural data... #> Integrating WWTP nitrogen data with agricultural classifications... #> Using agricultural ID column: FIPS #> Combined nitrogen classification summary: #>   Excluded: 212 units #>   Sink_Deficit: 2358 units #>   Sink_Fertilizer: 185 units #>   Source: 157 units #>   Within_County: 200 units #> Integrating WWTP phosphorus data with agricultural classifications... #> Using agricultural ID column: FIPS #> Combined phosphorus classification summary: #>   Excluded: 212 units #>   Sink_Deficit: 1819 units #>   Sink_Fertilizer: 344 units #>   Source: 389 units #>   Within_County: 348 units #>  Integration complete #>  #> Saving results... #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_agricultural_2016.rds #> File size: 1.04 MB #> Rows: 3112, Columns: 17 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_nitrogen_integrated_2016.rds #> File size: 1.1 MB #> Rows: 3112, Columns: 23 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/county_nitrogen_centroids_2016.csv #> File size: 760.52 KB #> Rows: 3112, Columns: 24 #> Longitude range: [-124.158, -67.637] #> Latitude range: [25.49, 48.826] #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_phosphorus_integrated_2016.rds #> File size: 1.09 MB #> Rows: 3112, Columns: 23 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/county_phosphorus_centroids_2016.csv #> File size: 736.85 KB #> Rows: 3112, Columns: 24 #> Longitude range: [-124.158, -67.637] #> Latitude range: [25.49, 48.826] #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/analysis_summary_2016.rds #> Format: RDS #> File size: 0.77 KB #>  Results saved to:/tmp/Rtmp0dSqZ3 #>   Files created:6 #>  #> ====================================================================== #> ANALYSIS COMPLETE #> ====================================================================== #> Processing time:0.08minutes #> Scale:county #> Year:2016 #> Nutrients analyzed:nitrogen, phosphorus #> Spatial units:3112 #> WWTP facilities:30994 #> Output directory:/tmp/Rtmp0dSqZ3 #> ======================================================================  # Save with auto-generated filename save_spatial_data(results$agricultural, scale = \"county\", year = 2016) #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_combined_2016_20260127.rds #> File size: 1.04 MB #> Rows: 3112, Columns: 17 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> [1] \"/tmp/Rtmp0dSqZ3/county_combined_2016_20260127.rds\"  # Save with custom filename save_spatial_data(results$agricultural,                   file.path(tempdir(), \"my_results.rds\")) #> Saved spatial data to: /tmp/Rtmp0dSqZ3/my_results.rds #> File size: 1.04 MB #> Rows: 3112, Columns: 17 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> [1] \"/tmp/Rtmp0dSqZ3/my_results.rds\" # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/save_transition_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Save Transition Probability Matrix — save_transition_matrix","title":"Save Transition Probability Matrix — save_transition_matrix","text":"Save transition probability matrix CSV metadata","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/save_transition_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save Transition Probability Matrix — save_transition_matrix","text":"","code":"save_transition_matrix(   transition_df,   file_path,   nutrient,   analysis_type = \"combined\",   metadata = NULL )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/save_transition_matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save Transition Probability Matrix — save_transition_matrix","text":"transition_df Data frame. Transition probability matrix file_path Character. Output file path nutrient Character. Nutrient type analysis_type Character. Type analysis metadata List. Additional metadata include","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/save_transition_matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Save Transition Probability Matrix — save_transition_matrix","text":"Character. Path saved file","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/save_transition_matrix.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Save Transition Probability Matrix — save_transition_matrix","text":"","code":"# \\donttest{ # Create example analysis results first results <- run_builtin_analysis(scale = \"county\", year = 2016, include_wwtp = TRUE) #>  #> ====================================================================== #> BATCH MANURESHED ANALYSIS #> ====================================================================== #> Year: 2016 #> Scale: county #> Nutrients: nitrogen, phosphorus #> ---------------------------------------------------------------------- #> Checking data availability... #> Data availability confirmed #>   Available scales:county, huc8, huc2 #>   Available years forcounty:1987-2016 #>   Built-in WWTP data:Available (2007-2016) #>  #> Loading built-in NuGIS data... #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2016 #> Number of spatial units: 3058 #> Loading built-in spatial boundaries... #> Using cached version of county_boundaries #> Loaded county boundaries #> Number of spatial units: 3112 #> Calculating cropland threshold... #> Cropland threshold:1235.53acres #>  #> Processing agricultural classifications... #> Starting complete agricultural classification for county scale... #> Processed NuGIS data for county scale: #>   Spatial units: 3058 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 158 units #>   Sink_Deficit: 2450 units #>   Sink_Fertilizer: 214 units #>   Source: 83 units #>   Within_County: 153 units #> Phosphorus classification summary: #>   Excluded: 158 units #>   Sink_Deficit: 1891 units #>   Sink_Fertilizer: 372 units #>   Source: 317 units #>   Within_County: 320 units #> Agricultural classification complete! #> Applied threshold: 1235.53 acres #> Agricultural classification complete #>   Spatial units processed:3112 #>   Nitrogen classes:Excluded ( 212 ), Sink_Deficit ( 2450 ), Sink_Fertilizer ( 214 ), Source ( 83 ), Within_County ( 153 ) #>   Phosphorus classes:Excluded ( 212 ), Sink_Deficit ( 1891 ), Sink_Fertilizer ( 372 ), Source ( 317 ), Within_County ( 320 ) #>  #> Processing WWTP data... #>   Nutrients:nitrogen, phosphorus #>   WWTP year:2016 #>   Load units:kg #>   Data source:Built-in (2016) #>   Loading built-in nitrogen WWTP data for2016... #> Using cached version of wwtp_nitrogen_combined #> Loaded WWTP nitrogen data for year 2016 #> Number of facilities: 20846 #>   Loading built-in phosphorus WWTP data for2016... #> Using cached version of wwtp_phosphorus_combined #> Loaded WWTP phosphorus data for year 2016 #> Number of facilities: 10148 #>   Processing nitrogen WWTP facilities... #> Filtered for positive nitrogen loads: #>   Original: 20846 facilities #>   With positive loads: 20846 facilities #> WWTP nitrogen source classification: #>   Minor Source: 17801 facilities #>   Small Source: 1799 facilities #>   Medium Source: 729 facilities #>   Large Source: 417 facilities #>   Very Large Source: 100 facilities #> Created spatial WWTP data with 20846 facilities #> Looking for boundary ID column: 'FIPS' #> Available columns in boundaries: FIPS, County, State_Name, geometry #> Aggregating WWTP nitrogen loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 20846 #>   Spatial units with facilities: 2581 #>   Total nitrogen load: 582738.6 tons/year #>   Processing phosphorus WWTP facilities... #> Filtered for positive phosphorus loads: #>   Original: 10148 facilities #>   With positive loads: 10148 facilities #> WWTP phosphorus source classification: #>   Minor Source: 6846 facilities #>   Small Source: 1839 facilities #>   Medium Source: 795 facilities #>   Large Source: 561 facilities #>   Very Large Source: 107 facilities #> Created spatial WWTP data with 10148 facilities #> Looking for boundary ID column: 'FIPS' #> Available columns in boundaries: FIPS, County, State_Name, geometry #> Aggregating WWTP phosphorus loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 10148 #>   Spatial units with facilities: 1966 #>   Total phosphorus load: 177064.66 tons/year #> WWTP data processing complete #>   nitrogen:20846facilities in2581spatial units #>   phosphorus:10148facilities in1966spatial units #>  #> Integrating WWTP and agricultural data... #> Integrating WWTP nitrogen data with agricultural classifications... #> Using agricultural ID column: FIPS #> Combined nitrogen classification summary: #>   Excluded: 212 units #>   Sink_Deficit: 2358 units #>   Sink_Fertilizer: 185 units #>   Source: 157 units #>   Within_County: 200 units #> Integrating WWTP phosphorus data with agricultural classifications... #> Using agricultural ID column: FIPS #> Combined phosphorus classification summary: #>   Excluded: 212 units #>   Sink_Deficit: 1819 units #>   Sink_Fertilizer: 344 units #>   Source: 389 units #>   Within_County: 348 units #>  Integration complete #>  #> Saving results... #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_agricultural_2016.rds #> File size: 1.04 MB #> Rows: 3112, Columns: 17 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_nitrogen_integrated_2016.rds #> File size: 1.1 MB #> Rows: 3112, Columns: 23 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/county_nitrogen_centroids_2016.csv #> File size: 760.52 KB #> Rows: 3112, Columns: 24 #> Longitude range: [-124.158, -67.637] #> Latitude range: [25.49, 48.826] #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_phosphorus_integrated_2016.rds #> File size: 1.09 MB #> Rows: 3112, Columns: 23 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/county_phosphorus_centroids_2016.csv #> File size: 736.85 KB #> Rows: 3112, Columns: 24 #> Longitude range: [-124.158, -67.637] #> Latitude range: [25.49, 48.826] #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/analysis_summary_2016.rds #> Format: RDS #> File size: 0.77 KB #>  Results saved to:/tmp/Rtmp0dSqZ3 #>   Files created:6 #>  #> ====================================================================== #> ANALYSIS COMPLETE #> ====================================================================== #> Processing time:0.07minutes #> Scale:county #> Year:2016 #> Nutrients analyzed:nitrogen, phosphorus #> Spatial units:3112 #> WWTP facilities:30994 #> Output directory:/tmp/Rtmp0dSqZ3 #> ======================================================================  # Save transition probabilities (only if integrated results exist) if (\"integrated\" %in% names(results) && \"nitrogen\" %in% names(results$integrated)) {   centroids <- add_centroid_coordinates(results$integrated$nitrogen)   transitions <- calculate_transition_probabilities(centroids, \"combined_N_class\")   save_transition_matrix(transitions,                         file.path(tempdir(), \"transitions_nitrogen.csv\"),                         \"nitrogen\") } #> TRANSITION PROBABILITY MATRIX METADATA #> ====================================== #>  #> created_date:2026-01-27 20:16:50.174048 #> nutrient:nitrogen #> analysis_type:combined #> n_categories:4 #> categories: #>   Sink_Deficit #>   Sink_Fertilizer #>   Source #>   Within_County #> Saved transition matrix to: /tmp/Rtmp0dSqZ3/transitions_nitrogen.csv #> Saved metadata to: /tmp/Rtmp0dSqZ3/transitions_nitrogen_metadata.txt #> File size: 0.19 KB #> Matrix dimensions: 4 x 4 #> [1] \"/tmp/Rtmp0dSqZ3/transitions_nitrogen.csv\" # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/summarize_results.html","id":null,"dir":"Reference","previous_headings":"","what":"Print Summary of Analysis Results — summarize_results","title":"Print Summary of Analysis Results — summarize_results","text":"Print formatted summary manureshed analysis results console. summary includes analysis configuration parameters (scale, year, nutrients, WWTP inclusion), spatial coverage statistics, agricultural nutrient classifications counts percentages, WWTP integration metrics (applicable), integrated classifications (available), output file information, processing time.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/summarize_results.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print Summary of Analysis Results — summarize_results","text":"","code":"summarize_results(results, detailed = FALSE)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/summarize_results.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print Summary of Analysis Results — summarize_results","text":"results List. Analysis results run_builtin_analysis run_state_analysis. Must contain minimum: parameters: List scale, year, nutrients, include_wwtp agricultural: sf data frame classification columns Optional components: wwtp: WWTP analysis results integrated: Integrated classification results created_files saved_files: Output file paths detailed Logical. TRUE, includes additional breakdown integrated classifications showing combined agricultural-WWTP nutrient classes. FALSE (default), shows agricultural classifications basic WWTP statistics.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/summarize_results.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print Summary of Analysis Results — summarize_results","text":"Invisibly returns input results list unchanged. function called primarily side effect printing formatted summary console. invisible return allows piping operations displaying summary.","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/summarize_results.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Print Summary of Analysis Results — summarize_results","text":"summary output organized sections: Analysis Configuration Scale, year, nutrients analyzed, WWTP inclusion, state (applicable) Spatial Coverage Total number spatial units analyzed Agricultural Classifications Nitrogen phosphorus classification counts percentages WWTP Integration Number facilities total loads nutrient (applicable) Integrated Classifications Combined agricultural-WWTP classes (detailed = TRUE) Output Files Number types created files (saved) Processing Time Analysis duration minutes (available) Classification names cleaned display (underscores replaced spaces, line breaks removed). Percentages rounded one decimal place. console output uses message can suppressed suppressMessages.","code":""},{"path":[]},{"path":"https://exelegch.github.io/manureshed-docs/reference/summarize_results.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Print Summary of Analysis Results — summarize_results","text":"","code":"# \\donttest{ # Basic summary results <- run_builtin_analysis(scale = \"county\", year = 2016) #>  #> ====================================================================== #> BATCH MANURESHED ANALYSIS #> ====================================================================== #> Year: 2016 #> Scale: county #> Nutrients: nitrogen, phosphorus #> ---------------------------------------------------------------------- #> Checking data availability... #> Data availability confirmed #>   Available scales:county, huc8, huc2 #>   Available years forcounty:1987-2016 #>   Built-in WWTP data:Available (2007-2016) #>  #> Loading built-in NuGIS data... #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2016 #> Number of spatial units: 3058 #> Loading built-in spatial boundaries... #> Using cached version of county_boundaries #> Loaded county boundaries #> Number of spatial units: 3112 #> Calculating cropland threshold... #> Cropland threshold:1235.53acres #>  #> Processing agricultural classifications... #> Starting complete agricultural classification for county scale... #> Processed NuGIS data for county scale: #>   Spatial units: 3058 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 158 units #>   Sink_Deficit: 2450 units #>   Sink_Fertilizer: 214 units #>   Source: 83 units #>   Within_County: 153 units #> Phosphorus classification summary: #>   Excluded: 158 units #>   Sink_Deficit: 1891 units #>   Sink_Fertilizer: 372 units #>   Source: 317 units #>   Within_County: 320 units #> Agricultural classification complete! #> Applied threshold: 1235.53 acres #> Agricultural classification complete #>   Spatial units processed:3112 #>   Nitrogen classes:Excluded ( 212 ), Sink_Deficit ( 2450 ), Sink_Fertilizer ( 214 ), Source ( 83 ), Within_County ( 153 ) #>   Phosphorus classes:Excluded ( 212 ), Sink_Deficit ( 1891 ), Sink_Fertilizer ( 372 ), Source ( 317 ), Within_County ( 320 ) #>  #> Processing WWTP data... #>   Nutrients:nitrogen, phosphorus #>   WWTP year:2016 #>   Load units:kg #>   Data source:Built-in (2016) #>   Loading built-in nitrogen WWTP data for2016... #> Using cached version of wwtp_nitrogen_combined #> Loaded WWTP nitrogen data for year 2016 #> Number of facilities: 20846 #>   Loading built-in phosphorus WWTP data for2016... #> Using cached version of wwtp_phosphorus_combined #> Loaded WWTP phosphorus data for year 2016 #> Number of facilities: 10148 #>   Processing nitrogen WWTP facilities... #> Filtered for positive nitrogen loads: #>   Original: 20846 facilities #>   With positive loads: 20846 facilities #> WWTP nitrogen source classification: #>   Minor Source: 17801 facilities #>   Small Source: 1799 facilities #>   Medium Source: 729 facilities #>   Large Source: 417 facilities #>   Very Large Source: 100 facilities #> Created spatial WWTP data with 20846 facilities #> Looking for boundary ID column: 'FIPS' #> Available columns in boundaries: FIPS, County, State_Name, geometry #> Aggregating WWTP nitrogen loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 20846 #>   Spatial units with facilities: 2581 #>   Total nitrogen load: 582738.6 tons/year #>   Processing phosphorus WWTP facilities... #> Filtered for positive phosphorus loads: #>   Original: 10148 facilities #>   With positive loads: 10148 facilities #> WWTP phosphorus source classification: #>   Minor Source: 6846 facilities #>   Small Source: 1839 facilities #>   Medium Source: 795 facilities #>   Large Source: 561 facilities #>   Very Large Source: 107 facilities #> Created spatial WWTP data with 10148 facilities #> Looking for boundary ID column: 'FIPS' #> Available columns in boundaries: FIPS, County, State_Name, geometry #> Aggregating WWTP phosphorus loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 10148 #>   Spatial units with facilities: 1966 #>   Total phosphorus load: 177064.66 tons/year #> WWTP data processing complete #>   nitrogen:20846facilities in2581spatial units #>   phosphorus:10148facilities in1966spatial units #>  #> Integrating WWTP and agricultural data... #> Integrating WWTP nitrogen data with agricultural classifications... #> Using agricultural ID column: FIPS #> Combined nitrogen classification summary: #>   Excluded: 212 units #>   Sink_Deficit: 2358 units #>   Sink_Fertilizer: 185 units #>   Source: 157 units #>   Within_County: 200 units #> Integrating WWTP phosphorus data with agricultural classifications... #> Using agricultural ID column: FIPS #> Combined phosphorus classification summary: #>   Excluded: 212 units #>   Sink_Deficit: 1819 units #>   Sink_Fertilizer: 344 units #>   Source: 389 units #>   Within_County: 348 units #>  Integration complete #>  #> Saving results... #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_agricultural_2016.rds #> File size: 1.04 MB #> Rows: 3112, Columns: 17 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_nitrogen_integrated_2016.rds #> File size: 1.1 MB #> Rows: 3112, Columns: 23 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/county_nitrogen_centroids_2016.csv #> File size: 760.52 KB #> Rows: 3112, Columns: 24 #> Longitude range: [-124.158, -67.637] #> Latitude range: [25.49, 48.826] #> Saved spatial data to: /tmp/Rtmp0dSqZ3/county_phosphorus_integrated_2016.rds #> File size: 1.09 MB #> Rows: 3112, Columns: 23 #> Geometry type: POLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/county_phosphorus_centroids_2016.csv #> File size: 736.85 KB #> Rows: 3112, Columns: 24 #> Longitude range: [-124.158, -67.637] #> Latitude range: [25.49, 48.826] #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/analysis_summary_2016.rds #> Format: RDS #> File size: 0.77 KB #>  Results saved to:/tmp/Rtmp0dSqZ3 #>   Files created:6 #>  #> ====================================================================== #> ANALYSIS COMPLETE #> ====================================================================== #> Processing time:0.07minutes #> Scale:county #> Year:2016 #> Nutrients analyzed:nitrogen, phosphorus #> Spatial units:3112 #> WWTP facilities:30994 #> Output directory:/tmp/Rtmp0dSqZ3 #> ====================================================================== summarize_results(results) #>  #> ============================================================ #> MANURESHED ANALYSIS SUMMARY #> ============================================================ #> Analysis Configuration: #>   Scale:     county #>   Year:      2016 #>   Nutrients: nitrogen, phosphorus #>   WWTP:      Yes #>  #> Spatial Coverage: #>   Total units: 3112 #> Agricultural Classifications: #>   Nitrogen: #>     excluded               212 (  6.8%) #>     sink deficit          2450 ( 78.7%) #>     sink fertilizer        214 (  6.9%) #>     source                  83 (  2.7%) #>     within county          153 (  4.9%) #>  #>   Phosphorus: #>     excluded               212 (  6.8%) #>     sink deficit          1891 ( 60.8%) #>     sink fertilizer        372 ( 12.0%) #>     source                 317 ( 10.2%) #>     within county          320 ( 10.3%) #>  #> WWTP Integration: #>   Nitrogen: #>     Facilities:  20846 #>     Total load:  634580.1 tons/year #>   Phosphorus: #>     Facilities:  10148 #>     Total load:  178423.7 tons/year #>  #> Output Files: 4 files created #>  #> Processing Time: 0.07 minutes #> ============================================================  # Detailed summary with integrated classifications results <- run_builtin_analysis(   scale = \"huc8\",   year = 2012,   include_wwtp = TRUE ) #>  #> ====================================================================== #> BATCH MANURESHED ANALYSIS #> ====================================================================== #> Year: 2012 #> Scale: huc8 #> Nutrients: nitrogen, phosphorus #> ---------------------------------------------------------------------- #> Checking data availability... #> Data availability confirmed #>   Available scales:county, huc8, huc2 #>   Available years forhuc8:1987-2016 #>   Built-in WWTP data:Available (2007-2016) #>  #> Loading built-in NuGIS data... #> Using cached version of nugis_huc8_data #> Loaded NuGIS huc8 data for year 2012 #> Number of spatial units: 2111 #> Loading built-in spatial boundaries... #> Using cached version of huc8_boundaries #> Loaded huc8 boundaries #> Number of spatial units: 2132 #> Calculating cropland threshold... #> Using cached version of nugis_county_data #> Loaded NuGIS county data for year 2012 #> Number of spatial units: 3064 #> Calculated cropland threshold: #>   County baseline: 500 ha (1235.53 acres) #>   Percentile in county data: 5.32% #>   Threshold for target scale: 1731.65 acres #> Cropland threshold:1731.65acres #>  #> Processing agricultural classifications... #> Starting complete agricultural classification for huc8 scale... #> Processed NuGIS data for huc8 scale: #>   Spatial units: 2111 #>   Converted P2O5 to P using factor: 0.436 #> Nitrogen classification summary: #>   Excluded: 113 units #>   Sink_Deficit: 1494 units #>   Sink_Fertilizer: 340 units #>   Source: 26 units #>   Within_Watershed: 138 units #> Phosphorus classification summary: #>   Excluded: 113 units #>   Sink_Deficit: 1073 units #>   Sink_Fertilizer: 402 units #>   Source: 197 units #>   Within_Watershed: 326 units #> Agricultural classification complete! #> Applied threshold: 1731.65 acres #> Agricultural classification complete #>   Spatial units processed:2132 #>   Nitrogen classes:Excluded ( 115 ), Sink_Deficit ( 1509 ), Sink_Fertilizer ( 342 ), Source ( 26 ), Within_Watershed ( 140 ) #>   Phosphorus classes:Excluded ( 115 ), Sink_Deficit ( 1087 ), Sink_Fertilizer ( 402 ), Source ( 198 ), Within_Watershed ( 330 ) #>  #> Processing WWTP data... #>   Nutrients:nitrogen, phosphorus #>   WWTP year:2012 #>   Load units:kg #>   Data source:Built-in (2012) #>   Loading built-in nitrogen WWTP data for2012... #> Using cached version of wwtp_nitrogen_combined #> Loaded WWTP nitrogen data for year 2012 #> Number of facilities: 26971 #>   Loading built-in phosphorus WWTP data for2012... #> Using cached version of wwtp_phosphorus_combined #> Loaded WWTP phosphorus data for year 2012 #> Number of facilities: 8324 #>   Processing nitrogen WWTP facilities... #> Filtered for positive nitrogen loads: #>   Original: 26971 facilities #>   With positive loads: 26971 facilities #> WWTP nitrogen source classification: #>   Minor Source: 22348 facilities #>   Small Source: 2555 facilities #>   Medium Source: 1052 facilities #>   Large Source: 803 facilities #>   Very Large Source: 213 facilities #> Created spatial WWTP data with 26971 facilities #> Looking for boundary ID column: 'huc8' #> Available columns in boundaries: huc8, name, geometry, areasqkm #> Aggregating WWTP nitrogen loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 26971 #>   Spatial units with facilities: 1403 #>   Total nitrogen load: 1069082.41 tons/year #>   Processing phosphorus WWTP facilities... #> Filtered for positive phosphorus loads: #>   Original: 8324 facilities #>   With positive loads: 8324 facilities #> WWTP phosphorus source classification: #>   Minor Source: 5151 facilities #>   Small Source: 1680 facilities #>   Medium Source: 755 facilities #>   Large Source: 599 facilities #>   Very Large Source: 139 facilities #> Created spatial WWTP data with 8324 facilities #> Looking for boundary ID column: 'huc8' #> Available columns in boundaries: huc8, name, geometry, areasqkm #> Aggregating WWTP phosphorus loads by spatial boundaries... #> Aggregation complete: #>   WWTP facilities: 8324 #>   Spatial units with facilities: 1004 #>   Total phosphorus load: 86212.84 tons/year #> WWTP data processing complete #>   nitrogen:26971facilities in1403spatial units #>   phosphorus:8324facilities in1004spatial units #>  #> Integrating WWTP and agricultural data... #> Integrating WWTP nitrogen data with agricultural classifications... #> Using agricultural ID column: huc8 #> Combined nitrogen classification summary: #>   Excluded: 115 units #>   Sink_Deficit: 1436 units #>   Sink_Fertilizer: 323 units #>   Source: 91 units #>   Within_Watershed: 167 units #> Integrating WWTP phosphorus data with agricultural classifications... #> Using agricultural ID column: huc8 #> Combined phosphorus classification summary: #>   Excluded: 115 units #>   Sink_Deficit: 1041 units #>   Sink_Fertilizer: 381 units #>   Source: 251 units #>   Within_Watershed: 344 units #>  Integration complete #>  #> Saving results... #> Saved spatial data to: /tmp/Rtmp0dSqZ3/huc8_agricultural_2012.rds #> File size: 7.11 MB #> Rows: 2132, Columns: 17 #> Geometry type: MULTIPOLYGON #> CRS: EPSG:5070 #> Saved spatial data to: /tmp/Rtmp0dSqZ3/huc8_nitrogen_integrated_2012.rds #> File size: 7.15 MB #> Rows: 2132, Columns: 23 #> Geometry type: MULTIPOLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/huc8_nitrogen_centroids_2012.csv #> File size: 565.05 KB #> Rows: 2132, Columns: 24 #> Longitude range: [-124.345, -67.71] #> Latitude range: [25.201, 48.988] #> Saved spatial data to: /tmp/Rtmp0dSqZ3/huc8_phosphorus_integrated_2012.rds #> File size: 7.15 MB #> Rows: 2132, Columns: 23 #> Geometry type: MULTIPOLYGON #> CRS: EPSG:5070 #> Saved centroid data to: /tmp/Rtmp0dSqZ3/huc8_phosphorus_centroids_2012.csv #> File size: 550.58 KB #> Rows: 2132, Columns: 24 #> Longitude range: [-124.345, -67.71] #> Latitude range: [25.201, 48.988] #> Saved analysis summary to: /tmp/Rtmp0dSqZ3/analysis_summary_2012.rds #> Format: RDS #> File size: 0.79 KB #>  Results saved to:/tmp/Rtmp0dSqZ3 #>   Files created:6 #>  #> ====================================================================== #> ANALYSIS COMPLETE #> ====================================================================== #> Processing time:0.08minutes #> Scale:huc8 #> Year:2012 #> Nutrients analyzed:nitrogen, phosphorus #> Spatial units:2132 #> WWTP facilities:35295 #> Output directory:/tmp/Rtmp0dSqZ3 #> ====================================================================== summarize_results(results, detailed = TRUE) #>  #> ============================================================ #> MANURESHED ANALYSIS SUMMARY #> ============================================================ #> Analysis Configuration: #>   Scale:     huc8 #>   Year:      2012 #>   Nutrients: nitrogen, phosphorus #>   WWTP:      Yes #>  #> Spatial Coverage: #>   Total units: 2132 #> Agricultural Classifications: #>   Nitrogen: #>     excluded               115 (  5.4%) #>     sink deficit          1509 ( 70.8%) #>     sink fertilizer        342 ( 16.0%) #>     source                  26 (  1.2%) #>     within watershed       140 (  6.6%) #>  #>   Phosphorus: #>     excluded               115 (  5.4%) #>     sink deficit          1087 ( 51.0%) #>     sink fertilizer        402 ( 18.9%) #>     source                 198 (  9.3%) #>     within watershed       330 ( 15.5%) #>  #> WWTP Integration: #>   Nitrogen: #>     Facilities:  26971 #>     Total load:  1163337.0 tons/year #>   Phosphorus: #>     Facilities:  8324 #>     Total load:  90409.7 tons/year #>  #> Integrated Classifications (with WWTP): #>   Nitrogen: #>     excluded               115 (  5.4%) #>     sink deficit          1436 ( 67.4%) #>     sink fertilizer        323 ( 15.2%) #>     source                  91 (  4.3%) #>     within watershed       167 (  7.8%) #>   Phosphorus: #>     excluded               115 (  5.4%) #>     sink deficit          1041 ( 48.8%) #>     sink fertilizer        381 ( 17.9%) #>     source                 251 ( 11.8%) #>     within watershed       344 ( 16.1%) #>  #> Output Files: 4 files created #>   nitrogen_integrated: huc8_nitrogen_integrated_2012.rds #>   nitrogen_centroids: huc8_nitrogen_centroids_2012.csv #>   phosphorus_integrated: huc8_phosphorus_integrated_2012.rds #>   phosphorus_centroids: huc8_phosphorus_centroids_2012.csv #>  #> Processing Time: 0.08 minutes #> ============================================================ # } if (FALSE) { # \\dontrun{   # This requires magrittr - never auto-run   library(magrittr)   results <- run_builtin_analysis(scale = \"huc2\", year = 2015) %>%     summarize_results() %>%     export_for_gis(output_dir = tempdir()) } # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/test_osf_connection.html","id":null,"dir":"Reference","previous_headings":"","what":"Test OSF Connection — test_osf_connection","title":"Test OSF Connection — test_osf_connection","text":"Test downloading small dataset verify OSF connectivity","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/test_osf_connection.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Test OSF Connection — test_osf_connection","text":"","code":"test_osf_connection(verbose = TRUE)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/test_osf_connection.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Test OSF Connection — test_osf_connection","text":"verbose Logical. Show detailed test results","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/test_osf_connection.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Test OSF Connection — test_osf_connection","text":"Logical. TRUE test successful","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/validate_columns.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate Required Columns — validate_columns","title":"Validate Required Columns — validate_columns","text":"Validate Required Columns","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/validate_columns.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate Required Columns — validate_columns","text":"","code":"validate_columns(data, required_cols, data_type = \"data\")"},{"path":"https://exelegch.github.io/manureshed-docs/reference/validate_columns.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate Required Columns — validate_columns","text":"data Data frame validate required_cols Character vector required column names data_type Character description data type error messages","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/validate_columns.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate Required Columns — validate_columns","text":"Logical. TRUE columns present, stops error otherwise","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/wwtp_aggregate_by_boundaries.html","id":null,"dir":"Reference","previous_headings":"","what":"Aggregate WWTP Data by Spatial Boundaries — wwtp_aggregate_by_boundaries","title":"Aggregate WWTP Data by Spatial Boundaries — wwtp_aggregate_by_boundaries","text":"Aggregate WWTP loads spatial units (counties, HUC8s, etc.)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/wwtp_aggregate_by_boundaries.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Aggregate WWTP Data by Spatial Boundaries — wwtp_aggregate_by_boundaries","text":"","code":"wwtp_aggregate_by_boundaries(wwtp_sf, boundaries, nutrient, boundary_id_col)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/wwtp_aggregate_by_boundaries.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Aggregate WWTP Data by Spatial Boundaries — wwtp_aggregate_by_boundaries","text":"wwtp_sf sf object. Spatial WWTP data boundaries sf object. Spatial boundaries aggregation nutrient Character. \"nitrogen\" \"phosphorus\" boundary_id_col Character. Name boundary ID column","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/wwtp_aggregate_by_boundaries.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Aggregate WWTP Data by Spatial Boundaries — wwtp_aggregate_by_boundaries","text":"Data frame aggregated loads spatial unit","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/wwtp_classify_sources.html","id":null,"dir":"Reference","previous_headings":"","what":"Classify WWTP Sources by Load Size — wwtp_classify_sources","title":"Classify WWTP Sources by Load Size — wwtp_classify_sources","text":"Classify WWTP facilities size categories based annual nutrient loads","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/wwtp_classify_sources.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Classify WWTP Sources by Load Size — wwtp_classify_sources","text":"","code":"wwtp_classify_sources(wwtp_data, nutrient)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/wwtp_classify_sources.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Classify WWTP Sources by Load Size — wwtp_classify_sources","text":"wwtp_data Data frame. WWTP data load information nutrient Character. \"nitrogen\" \"phosphorus\"","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/wwtp_classify_sources.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Classify WWTP Sources by Load Size — wwtp_classify_sources","text":"Data frame source_class column added","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/wwtp_classify_sources.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Classify WWTP Sources by Load Size — wwtp_classify_sources","text":"","code":"# \\donttest{ # Load WWTP data first wwtp_data <- load_builtin_wwtp(\"nitrogen\", 2016) #> Using cached version of wwtp_nitrogen_combined #> Loaded WWTP nitrogen data for year 2016 #> Number of facilities: 20846  # Classify nitrogen sources classified_data <- wwtp_classify_sources(wwtp_data, \"nitrogen\") #> WWTP nitrogen source classification: #>   Minor Source: 17801 facilities #>   Small Source: 1799 facilities #>   Medium Source: 729 facilities #>   Large Source: 417 facilities #>   Very Large Source: 100 facilities table(classified_data$source_class) #>  #>      Minor Source      Small Source     Medium Source      Large Source  #>             17801              1799               729               417  #> Very Large Source  #>               100  # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/wwtp_clean_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Clean WWTP Data — wwtp_clean_data","title":"Clean WWTP Data — wwtp_clean_data","text":"Clean validate WWTP data analysis Clean validate WWTP data analysis","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/wwtp_clean_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clean WWTP Data — wwtp_clean_data","text":"","code":"wwtp_clean_data(wwtp_data, nutrient)  wwtp_clean_data(wwtp_data, nutrient)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/wwtp_clean_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Clean WWTP Data — wwtp_clean_data","text":"wwtp_data Data frame. Raw standardized WWTP data nutrient Character. \"nitrogen\" \"phosphorus\"","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/wwtp_clean_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Clean WWTP Data — wwtp_clean_data","text":"Data frame cleaned WWTP data Data frame cleaned WWTP data","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/wwtp_clean_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Clean WWTP Data — wwtp_clean_data","text":"","code":"if (FALSE) { # \\dontrun{ # Clean user-loaded data will not run. They need to be supplied by users clean_data <- wwtp_clean_data(raw_wwtp_data, \"nitrogen\")  # Clean OSF data (usually already clean, available 2007-2016) osf_data <- load_builtin_wwtp(\"phosphorus\", 2012) clean_data <- wwtp_clean_data(osf_data, \"phosphorus\") } # } # \\donttest{ # Load and clean WWTP data raw_wwtp_data <- load_builtin_wwtp(\"nitrogen\", 2016) #> Using cached version of wwtp_nitrogen_combined #> Loaded WWTP nitrogen data for year 2016 #> Number of facilities: 20846 clean_data <- wwtp_clean_data(raw_wwtp_data, \"nitrogen\") #> Cleaning WWTP nitrogen data... #> Cleaning complete: #>   Original facilities: 20846 #>   Removed: 3476 (missing data, duplicates, or outside CONUS) #>   Final facilities: 17370 # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/wwtp_filter_positive_loads.html","id":null,"dir":"Reference","previous_headings":"","what":"Filter WWTP Data for Positive Loads — wwtp_filter_positive_loads","title":"Filter WWTP Data for Positive Loads — wwtp_filter_positive_loads","text":"Filter WWTP data include facilities positive nutrient loads","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/wwtp_filter_positive_loads.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Filter WWTP Data for Positive Loads — wwtp_filter_positive_loads","text":"","code":"wwtp_filter_positive_loads(wwtp_data, nutrient)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/wwtp_filter_positive_loads.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Filter WWTP Data for Positive Loads — wwtp_filter_positive_loads","text":"wwtp_data Data frame. WWTP data nutrient Character. \"nitrogen\" \"phosphorus\"","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/wwtp_filter_positive_loads.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Filter WWTP Data for Positive Loads — wwtp_filter_positive_loads","text":"Data frame facilities positive loads","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/wwtp_process_complete.html","id":null,"dir":"Reference","previous_headings":"","what":"Complete WWTP Processing Pipeline — wwtp_process_complete","title":"Complete WWTP Processing Pipeline — wwtp_process_complete","text":"Run complete WWTP processing pipeline nutrients","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/wwtp_process_complete.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Complete WWTP Processing Pipeline — wwtp_process_complete","text":"","code":"wwtp_process_complete(   nitrogen_path = NULL,   phosphorus_path = NULL,   column_mapping = NULL,   skip_rows = 0,   header_row = 1,   load_units = \"kg\",   verbose = TRUE )"},{"path":"https://exelegch.github.io/manureshed-docs/reference/wwtp_process_complete.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Complete WWTP Processing Pipeline — wwtp_process_complete","text":"nitrogen_path Character. Path nitrogen WWTP data (NULL, loads OSF) phosphorus_path Character. Path phosphorus WWTP data (NULL, loads OSF) column_mapping Named list. Custom column mapping user data skip_rows Numeric. Rows skip user files header_row Numeric. Header row user files load_units Character. Units loads user files verbose Logical. Show processing messages","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/wwtp_process_complete.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Complete WWTP Processing Pipeline — wwtp_process_complete","text":"List processed nitrogen phosphorus WWTP data","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/wwtp_process_complete.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Complete WWTP Processing Pipeline — wwtp_process_complete","text":"","code":"# \\donttest{ # Process built-in OSF data (2016 default) wwtp_results_builtin <- wwtp_process_complete(   nitrogen_path = NULL,     # Use built-in data   phosphorus_path = NULL,   # Use built-in data   verbose = TRUE ) #> Starting complete WWTP processing pipeline... #> Loading nitrogen WWTP data from OSF... #> Using cached version of wwtp_nitrogen_combined #> Loaded WWTP nitrogen data for year 2016 #> Number of facilities: 20846 #> Filtered for positive nitrogen loads: #>   Original: 20846 facilities #>   With positive loads: 20846 facilities #> WWTP nitrogen source classification: #>   Minor Source: 17801 facilities #>   Small Source: 1799 facilities #>   Medium Source: 729 facilities #>   Large Source: 417 facilities #>   Very Large Source: 100 facilities #> Created spatial WWTP data with 20846 facilities #> Loading phosphorus WWTP data from OSF... #> Using cached version of wwtp_phosphorus_combined #> Loaded WWTP phosphorus data for year 2016 #> Number of facilities: 10148 #> Filtered for positive phosphorus loads: #>   Original: 10148 facilities #>   With positive loads: 10148 facilities #> WWTP phosphorus source classification: #>   Minor Source: 6846 facilities #>   Small Source: 1839 facilities #>   Medium Source: 795 facilities #>   Large Source: 561 facilities #>   Very Large Source: 107 facilities #> Created spatial WWTP data with 10148 facilities #> WWTP processing complete! #>   Nitrogen facilities: 20846 #>   Phosphorus facilities: 10148  # Process custom user data # wwtp_results_custom <- wwtp_process_complete( #   nitrogen_path = \"nitrogen_2020.csv\", #   phosphorus_path = \"phosphorus_2020.csv\", #   load_units = \"lbs\" # )  # Mixed: OSF for one nutrient, custom for another # wwtp_results_mixed <- wwtp_process_complete( #   nitrogen_path = NULL,           # Use OSF built-in #   phosphorus_path = \"custom_P.csv\" # Use custom # ) # }"},{"path":"https://exelegch.github.io/manureshed-docs/reference/wwtp_to_spatial.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert WWTP Data to Spatial Format — wwtp_to_spatial","title":"Convert WWTP Data to Spatial Format — wwtp_to_spatial","text":"Convert WWTP data frame sf spatial object","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/wwtp_to_spatial.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert WWTP Data to Spatial Format — wwtp_to_spatial","text":"","code":"wwtp_to_spatial(wwtp_data, crs = 4326)"},{"path":"https://exelegch.github.io/manureshed-docs/reference/wwtp_to_spatial.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert WWTP Data to Spatial Format — wwtp_to_spatial","text":"wwtp_data Data frame. WWTP data Lat/Long coordinates crs Numeric. Coordinate reference system (default: 4326 WGS84)","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/wwtp_to_spatial.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert WWTP Data to Spatial Format — wwtp_to_spatial","text":"sf object WWTP facilities point geometries","code":""},{"path":"https://exelegch.github.io/manureshed-docs/reference/wwtp_to_spatial.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert WWTP Data to Spatial Format — wwtp_to_spatial","text":"","code":"# \\donttest{ # Load and convert to spatial format wwtp_data <- load_builtin_wwtp(\"nitrogen\", 2016) #> Using cached version of wwtp_nitrogen_combined #> Loaded WWTP nitrogen data for year 2016 #> Number of facilities: 20846 wwtp_clean_data <- wwtp_clean_data(wwtp_data, \"nitrogen\") #> Cleaning WWTP nitrogen data... #> Cleaning complete: #>   Original facilities: 20846 #>   Removed: 3476 (missing data, duplicates, or outside CONUS) #>   Final facilities: 17370 wwtp_sf <- wwtp_to_spatial(wwtp_clean_data) #> Created spatial WWTP data with 17370 facilities  # Convert and transform to analysis CRS (without using pipe operator) wwtp_sf <- wwtp_to_spatial(wwtp_clean_data) #> Created spatial WWTP data with 17370 facilities wwtp_sf_transformed <- sf::st_transform(wwtp_sf, 5070)  # Albers Equal Area Conic # }"},{"path":"https://exelegch.github.io/manureshed-docs/news/index.html","id":"manureshed-012","dir":"Changelog","previous_headings":"","what":"manureshed 0.1.2","title":"manureshed 0.1.2","text":"Fixed hexa color problems Added cheatsheet Added region comparison function","code":""},{"path":"https://exelegch.github.io/manureshed-docs/news/index.html","id":"manureshed-011","dir":"Changelog","previous_headings":"","what":"manureshed 0.1.1","title":"manureshed 0.1.1","text":"CRAN release: 2026-01-26","code":""},{"path":"https://exelegch.github.io/manureshed-docs/news/index.html","id":"new-features-0-1-1","dir":"Changelog","previous_headings":"","what":"New Features","title":"manureshed 0.1.1","text":"Added github pkgdown documentation Added compare_scenarios() side--side scenario comparison Added launch_dashboard() interactive Shiny interface Dashboard requires optional packages: shiny, shinydashboard, leaflet, plotly, DT","code":""},{"path":"https://exelegch.github.io/manureshed-docs/news/index.html","id":"documentation-0-1-1","dir":"Changelog","previous_headings":"","what":"Documentation","title":"manureshed 0.1.1","text":"New vignette: “Scenario Comparison Analysis” New vignette: “Using Interactive Dashboard”","code":""},{"path":"https://exelegch.github.io/manureshed-docs/news/index.html","id":"bug-fixes-0-1-1","dir":"Changelog","previous_headings":"","what":"Bug Fixes","title":"manureshed 0.1.1","text":"Fixed deprecated ggplot2 size aesthetic (changed linewidth) Fixed graphics device compatibility ragg package","code":""},{"path":"https://exelegch.github.io/manureshed-docs/news/index.html","id":"manureshed-010","dir":"Changelog","previous_headings":"","what":"manureshed 0.1.0","title":"manureshed 0.1.0","text":"CRAN release: 2025-12-22 Initial CRAN submission.","code":""}]
